{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar __defProp = Object.defineProperty;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __publicField = function __publicField(obj, key, value) {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n  return value;\n};\n\nimport { Pass } from \"./Pass.js\";\n\nvar MaskPass = /*#__PURE__*/function (_Pass) {\n  _inherits(MaskPass, _Pass);\n\n  var _super = _createSuper(MaskPass);\n\n  function MaskPass(scene, camera) {\n    var _this;\n\n    _classCallCheck(this, MaskPass);\n\n    _this = _super.call(this);\n\n    __publicField(_assertThisInitialized(_this), \"scene\");\n\n    __publicField(_assertThisInitialized(_this), \"camera\");\n\n    __publicField(_assertThisInitialized(_this), \"inverse\");\n\n    _this.scene = scene;\n    _this.camera = camera;\n    _this.clear = true;\n    _this.needsSwap = false;\n    _this.inverse = false;\n    return _this;\n  }\n\n  _createClass(MaskPass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer) {\n      var context = renderer.getContext();\n      var state = renderer.state;\n      state.buffers.color.setMask(false);\n      state.buffers.depth.setMask(false);\n      state.buffers.color.setLocked(true);\n      state.buffers.depth.setLocked(true);\n      var writeValue, clearValue;\n\n      if (this.inverse) {\n        writeValue = 0;\n        clearValue = 1;\n      } else {\n        writeValue = 1;\n        clearValue = 0;\n      }\n\n      state.buffers.stencil.setTest(true);\n      state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n      state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 4294967295);\n      state.buffers.stencil.setClear(clearValue);\n      state.buffers.stencil.setLocked(true);\n      renderer.setRenderTarget(readBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera);\n      renderer.setRenderTarget(writeBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera);\n      state.buffers.color.setLocked(false);\n      state.buffers.depth.setLocked(false);\n      state.buffers.stencil.setLocked(false);\n      state.buffers.stencil.setFunc(context.EQUAL, 1, 4294967295);\n      state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n      state.buffers.stencil.setLocked(true);\n    }\n  }]);\n\n  return MaskPass;\n}(Pass);\n\nvar ClearMaskPass = /*#__PURE__*/function (_Pass2) {\n  _inherits(ClearMaskPass, _Pass2);\n\n  var _super2 = _createSuper(ClearMaskPass);\n\n  function ClearMaskPass() {\n    var _this2;\n\n    _classCallCheck(this, ClearMaskPass);\n\n    _this2 = _super2.call(this);\n    _this2.needsSwap = false;\n    return _this2;\n  }\n\n  _createClass(ClearMaskPass, [{\n    key: \"render\",\n    value: function render(renderer) {\n      renderer.state.buffers.stencil.setLocked(false);\n      renderer.state.buffers.stencil.setTest(false);\n    }\n  }]);\n\n  return ClearMaskPass;\n}(Pass);\n\nexport { ClearMaskPass, MaskPass };","map":{"version":3,"sources":["/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/three-stdlib/postprocessing/MaskPass.js"],"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","Pass","MaskPass","scene","camera","clear","needsSwap","inverse","renderer","writeBuffer","readBuffer","context","getContext","state","buffers","color","setMask","depth","setLocked","writeValue","clearValue","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","setRenderTarget","render","EQUAL","KEEP","ClearMaskPass"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { Pass } from \"./Pass.js\";\nclass MaskPass extends Pass {\n  constructor(scene, camera) {\n    super();\n    __publicField(this, \"scene\");\n    __publicField(this, \"camera\");\n    __publicField(this, \"inverse\");\n    this.scene = scene;\n    this.camera = camera;\n    this.clear = true;\n    this.needsSwap = false;\n    this.inverse = false;\n  }\n  render(renderer, writeBuffer, readBuffer) {\n    const context = renderer.getContext();\n    const state = renderer.state;\n    state.buffers.color.setMask(false);\n    state.buffers.depth.setMask(false);\n    state.buffers.color.setLocked(true);\n    state.buffers.depth.setLocked(true);\n    let writeValue, clearValue;\n    if (this.inverse) {\n      writeValue = 0;\n      clearValue = 1;\n    } else {\n      writeValue = 1;\n      clearValue = 0;\n    }\n    state.buffers.stencil.setTest(true);\n    state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 4294967295);\n    state.buffers.stencil.setClear(clearValue);\n    state.buffers.stencil.setLocked(true);\n    renderer.setRenderTarget(readBuffer);\n    if (this.clear)\n      renderer.clear();\n    renderer.render(this.scene, this.camera);\n    renderer.setRenderTarget(writeBuffer);\n    if (this.clear)\n      renderer.clear();\n    renderer.render(this.scene, this.camera);\n    state.buffers.color.setLocked(false);\n    state.buffers.depth.setLocked(false);\n    state.buffers.stencil.setLocked(false);\n    state.buffers.stencil.setFunc(context.EQUAL, 1, 4294967295);\n    state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    state.buffers.stencil.setLocked(true);\n  }\n}\nclass ClearMaskPass extends Pass {\n  constructor() {\n    super();\n    this.needsSwap = false;\n  }\n  render(renderer) {\n    renderer.state.buffers.stencil.setLocked(false);\n    renderer.state.buffers.stencil.setTest(false);\n  }\n}\nexport {\n  ClearMaskPass,\n  MaskPass\n};\n"]},"metadata":{},"sourceType":"module"}