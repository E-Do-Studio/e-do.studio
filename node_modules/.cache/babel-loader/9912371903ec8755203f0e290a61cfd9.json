{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar LWO3Parser = /*#__PURE__*/function () {\n  function LWO3Parser(IFFParser) {\n    _classCallCheck(this, LWO3Parser);\n\n    this.IFF = IFFParser;\n  }\n\n  _createClass(LWO3Parser, [{\n    key: \"parseBlock\",\n    value: function parseBlock() {\n      this.IFF.debugger.offset = this.IFF.reader.offset;\n      this.IFF.debugger.closeForms();\n      var blockID = this.IFF.reader.getIDTag();\n      var length = this.IFF.reader.getUint32();\n      this.IFF.debugger.dataOffset = this.IFF.reader.offset;\n      this.IFF.debugger.length = length;\n\n      switch (blockID) {\n        case \"FORM\":\n          this.IFF.parseForm(length);\n          break;\n\n        case \"ICON\":\n        case \"VMPA\":\n        case \"BBOX\":\n        case \"NORM\":\n        case \"PRE \":\n        case \"POST\":\n        case \"KEY \":\n        case \"SPAN\":\n        case \"TIME\":\n        case \"CLRS\":\n        case \"CLRA\":\n        case \"FILT\":\n        case \"DITH\":\n        case \"CONT\":\n        case \"BRIT\":\n        case \"SATR\":\n        case \"HUE \":\n        case \"GAMM\":\n        case \"NEGA\":\n        case \"IFLT\":\n        case \"PFLT\":\n        case \"PROJ\":\n        case \"AXIS\":\n        case \"AAST\":\n        case \"PIXB\":\n        case \"STCK\":\n        case \"VALU\":\n        case \"PNAM\":\n        case \"INAM\":\n        case \"GRST\":\n        case \"GREN\":\n        case \"GRPT\":\n        case \"FKEY\":\n        case \"IKEY\":\n        case \"CSYS\":\n        case \"OPAQ\":\n        case \"CMAP\":\n        case \"NLOC\":\n        case \"NZOM\":\n        case \"NVER\":\n        case \"NSRV\":\n        case \"NCRD\":\n        case \"NMOD\":\n        case \"NSEL\":\n        case \"NPRW\":\n        case \"NPLA\":\n        case \"VERS\":\n        case \"ENUM\":\n        case \"TAG \":\n        case \"CGMD\":\n        case \"CGTY\":\n        case \"CGST\":\n        case \"CGEN\":\n        case \"CGTS\":\n        case \"CGTE\":\n        case \"OSMP\":\n        case \"OMDE\":\n        case \"OUTR\":\n        case \"FLAG\":\n        case \"TRNL\":\n        case \"SHRP\":\n        case \"RFOP\":\n        case \"RSAN\":\n        case \"TROP\":\n        case \"RBLR\":\n        case \"TBLR\":\n        case \"CLRH\":\n        case \"CLRF\":\n        case \"ADTR\":\n        case \"GLOW\":\n        case \"LINE\":\n        case \"ALPH\":\n        case \"VCOL\":\n        case \"ENAB\":\n          this.IFF.debugger.skipped = true;\n          this.IFF.reader.skip(length);\n          break;\n\n        case \"IPIX\":\n        case \"IMIP\":\n        case \"IMOD\":\n        case \"AMOD\":\n        case \"IINV\":\n        case \"INCR\":\n        case \"IAXS\":\n        case \"IFOT\":\n        case \"ITIM\":\n        case \"IWRL\":\n        case \"IUTI\":\n        case \"IINX\":\n        case \"IINY\":\n        case \"IINZ\":\n        case \"IREF\":\n          if (length === 4) this.IFF.currentNode[blockID] = this.IFF.reader.getInt32();else this.IFF.reader.skip(length);\n          break;\n\n        case \"OTAG\":\n          this.IFF.parseObjectTag();\n          break;\n\n        case \"LAYR\":\n          this.IFF.parseLayer(length);\n          break;\n\n        case \"PNTS\":\n          this.IFF.parsePoints(length);\n          break;\n\n        case \"VMAP\":\n          this.IFF.parseVertexMapping(length);\n          break;\n\n        case \"POLS\":\n          this.IFF.parsePolygonList(length);\n          break;\n\n        case \"TAGS\":\n          this.IFF.parseTagStrings(length);\n          break;\n\n        case \"PTAG\":\n          this.IFF.parsePolygonTagMapping(length);\n          break;\n\n        case \"VMAD\":\n          this.IFF.parseVertexMapping(length, true);\n          break;\n\n        case \"DESC\":\n          this.IFF.currentForm.description = this.IFF.reader.getString();\n          break;\n\n        case \"TEXT\":\n        case \"CMNT\":\n        case \"NCOM\":\n          this.IFF.currentForm.comment = this.IFF.reader.getString();\n          break;\n\n        case \"NAME\":\n          this.IFF.currentForm.channelName = this.IFF.reader.getString();\n          break;\n\n        case \"WRAP\":\n          this.IFF.currentForm.wrap = {\n            w: this.IFF.reader.getUint16(),\n            h: this.IFF.reader.getUint16()\n          };\n          break;\n\n        case \"IMAG\":\n          var index = this.IFF.reader.getVariableLengthIndex();\n          this.IFF.currentForm.imageIndex = index;\n          break;\n\n        case \"OREF\":\n          this.IFF.currentForm.referenceObject = this.IFF.reader.getString();\n          break;\n\n        case \"ROID\":\n          this.IFF.currentForm.referenceObjectID = this.IFF.reader.getUint32();\n          break;\n\n        case \"SSHN\":\n          this.IFF.currentSurface.surfaceShaderName = this.IFF.reader.getString();\n          break;\n\n        case \"AOVN\":\n          this.IFF.currentSurface.surfaceCustomAOVName = this.IFF.reader.getString();\n          break;\n\n        case \"NSTA\":\n          this.IFF.currentForm.disabled = this.IFF.reader.getUint16();\n          break;\n\n        case \"NRNM\":\n          this.IFF.currentForm.realName = this.IFF.reader.getString();\n          break;\n\n        case \"NNME\":\n          this.IFF.currentForm.refName = this.IFF.reader.getString();\n          this.IFF.currentSurface.nodes[this.IFF.currentForm.refName] = this.IFF.currentForm;\n          break;\n\n        case \"INME\":\n          if (!this.IFF.currentForm.nodeName) this.IFF.currentForm.nodeName = [];\n          this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());\n          break;\n\n        case \"IINN\":\n          if (!this.IFF.currentForm.inputNodeName) this.IFF.currentForm.inputNodeName = [];\n          this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());\n          break;\n\n        case \"IINM\":\n          if (!this.IFF.currentForm.inputName) this.IFF.currentForm.inputName = [];\n          this.IFF.currentForm.inputName.push(this.IFF.reader.getString());\n          break;\n\n        case \"IONM\":\n          if (!this.IFF.currentForm.inputOutputName) this.IFF.currentForm.inputOutputName = [];\n          this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());\n          break;\n\n        case \"FNAM\":\n          this.IFF.currentForm.fileName = this.IFF.reader.getString();\n          break;\n\n        case \"CHAN\":\n          if (length === 4) this.IFF.currentForm.textureChannel = this.IFF.reader.getIDTag();else this.IFF.reader.skip(length);\n          break;\n\n        case \"SMAN\":\n          var maxSmoothingAngle = this.IFF.reader.getFloat32();\n          this.IFF.currentSurface.attributes.smooth = maxSmoothingAngle < 0 ? false : true;\n          break;\n\n        case \"COLR\":\n          this.IFF.currentSurface.attributes.Color = {\n            value: this.IFF.reader.getFloat32Array(3)\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"LUMI\":\n          this.IFF.currentSurface.attributes.Luminosity = {\n            value: this.IFF.reader.getFloat32()\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"SPEC\":\n          this.IFF.currentSurface.attributes.Specular = {\n            value: this.IFF.reader.getFloat32()\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"DIFF\":\n          this.IFF.currentSurface.attributes.Diffuse = {\n            value: this.IFF.reader.getFloat32()\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"REFL\":\n          this.IFF.currentSurface.attributes.Reflection = {\n            value: this.IFF.reader.getFloat32()\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"GLOS\":\n          this.IFF.currentSurface.attributes.Glossiness = {\n            value: this.IFF.reader.getFloat32()\n          };\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"TRAN\":\n          this.IFF.currentSurface.attributes.opacity = this.IFF.reader.getFloat32();\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"BUMP\":\n          this.IFF.currentSurface.attributes.bumpStrength = this.IFF.reader.getFloat32();\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"SIDE\":\n          this.IFF.currentSurface.attributes.side = this.IFF.reader.getUint16();\n          break;\n\n        case \"RIMG\":\n          this.IFF.currentSurface.attributes.reflectionMap = this.IFF.reader.getVariableLengthIndex();\n          break;\n\n        case \"RIND\":\n          this.IFF.currentSurface.attributes.refractiveIndex = this.IFF.reader.getFloat32();\n          this.IFF.reader.skip(2);\n          break;\n\n        case \"TIMG\":\n          this.IFF.currentSurface.attributes.refractionMap = this.IFF.reader.getVariableLengthIndex();\n          break;\n\n        case \"IMAP\":\n          this.IFF.currentSurface.attributes.imageMapIndex = this.IFF.reader.getUint32();\n          break;\n\n        case \"IUVI\":\n          this.IFF.currentNode.UVChannel = this.IFF.reader.getString(length);\n          break;\n\n        case \"IUTL\":\n          this.IFF.currentNode.widthWrappingMode = this.IFF.reader.getUint32();\n          break;\n\n        case \"IVTL\":\n          this.IFF.currentNode.heightWrappingMode = this.IFF.reader.getUint32();\n          break;\n\n        default:\n          this.IFF.parseUnknownCHUNK(blockID, length);\n      }\n\n      if (blockID != \"FORM\") {\n        this.IFF.debugger.node = 1;\n        this.IFF.debugger.nodeID = blockID;\n        this.IFF.debugger.log();\n      }\n\n      if (this.IFF.reader.offset >= this.IFF.currentFormEnd) {\n        this.IFF.currentForm = this.IFF.parentForm;\n      }\n    }\n  }]);\n\n  return LWO3Parser;\n}();\n\nexport { LWO3Parser };","map":{"version":3,"sources":["/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/three-stdlib/loaders/lwo/LWO3Parser.js"],"names":["LWO3Parser","IFFParser","IFF","debugger","offset","reader","closeForms","blockID","getIDTag","length","getUint32","dataOffset","parseForm","skipped","skip","currentNode","getInt32","parseObjectTag","parseLayer","parsePoints","parseVertexMapping","parsePolygonList","parseTagStrings","parsePolygonTagMapping","currentForm","description","getString","comment","channelName","wrap","w","getUint16","h","index","getVariableLengthIndex","imageIndex","referenceObject","referenceObjectID","currentSurface","surfaceShaderName","surfaceCustomAOVName","disabled","realName","refName","nodes","nodeName","push","inputNodeName","inputName","inputOutputName","fileName","textureChannel","maxSmoothingAngle","getFloat32","attributes","smooth","Color","value","getFloat32Array","Luminosity","Specular","Diffuse","Reflection","Glossiness","opacity","bumpStrength","side","reflectionMap","refractiveIndex","refractionMap","imageMapIndex","UVChannel","widthWrappingMode","heightWrappingMode","parseUnknownCHUNK","node","nodeID","log","currentFormEnd","parentForm"],"mappings":"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","sourcesContent":["class LWO3Parser {\n  constructor(IFFParser) {\n    this.IFF = IFFParser;\n  }\n  parseBlock() {\n    this.IFF.debugger.offset = this.IFF.reader.offset;\n    this.IFF.debugger.closeForms();\n    const blockID = this.IFF.reader.getIDTag();\n    const length = this.IFF.reader.getUint32();\n    this.IFF.debugger.dataOffset = this.IFF.reader.offset;\n    this.IFF.debugger.length = length;\n    switch (blockID) {\n      case \"FORM\":\n        this.IFF.parseForm(length);\n        break;\n      case \"ICON\":\n      case \"VMPA\":\n      case \"BBOX\":\n      case \"NORM\":\n      case \"PRE \":\n      case \"POST\":\n      case \"KEY \":\n      case \"SPAN\":\n      case \"TIME\":\n      case \"CLRS\":\n      case \"CLRA\":\n      case \"FILT\":\n      case \"DITH\":\n      case \"CONT\":\n      case \"BRIT\":\n      case \"SATR\":\n      case \"HUE \":\n      case \"GAMM\":\n      case \"NEGA\":\n      case \"IFLT\":\n      case \"PFLT\":\n      case \"PROJ\":\n      case \"AXIS\":\n      case \"AAST\":\n      case \"PIXB\":\n      case \"STCK\":\n      case \"VALU\":\n      case \"PNAM\":\n      case \"INAM\":\n      case \"GRST\":\n      case \"GREN\":\n      case \"GRPT\":\n      case \"FKEY\":\n      case \"IKEY\":\n      case \"CSYS\":\n      case \"OPAQ\":\n      case \"CMAP\":\n      case \"NLOC\":\n      case \"NZOM\":\n      case \"NVER\":\n      case \"NSRV\":\n      case \"NCRD\":\n      case \"NMOD\":\n      case \"NSEL\":\n      case \"NPRW\":\n      case \"NPLA\":\n      case \"VERS\":\n      case \"ENUM\":\n      case \"TAG \":\n      case \"CGMD\":\n      case \"CGTY\":\n      case \"CGST\":\n      case \"CGEN\":\n      case \"CGTS\":\n      case \"CGTE\":\n      case \"OSMP\":\n      case \"OMDE\":\n      case \"OUTR\":\n      case \"FLAG\":\n      case \"TRNL\":\n      case \"SHRP\":\n      case \"RFOP\":\n      case \"RSAN\":\n      case \"TROP\":\n      case \"RBLR\":\n      case \"TBLR\":\n      case \"CLRH\":\n      case \"CLRF\":\n      case \"ADTR\":\n      case \"GLOW\":\n      case \"LINE\":\n      case \"ALPH\":\n      case \"VCOL\":\n      case \"ENAB\":\n        this.IFF.debugger.skipped = true;\n        this.IFF.reader.skip(length);\n        break;\n      case \"IPIX\":\n      case \"IMIP\":\n      case \"IMOD\":\n      case \"AMOD\":\n      case \"IINV\":\n      case \"INCR\":\n      case \"IAXS\":\n      case \"IFOT\":\n      case \"ITIM\":\n      case \"IWRL\":\n      case \"IUTI\":\n      case \"IINX\":\n      case \"IINY\":\n      case \"IINZ\":\n      case \"IREF\":\n        if (length === 4)\n          this.IFF.currentNode[blockID] = this.IFF.reader.getInt32();\n        else\n          this.IFF.reader.skip(length);\n        break;\n      case \"OTAG\":\n        this.IFF.parseObjectTag();\n        break;\n      case \"LAYR\":\n        this.IFF.parseLayer(length);\n        break;\n      case \"PNTS\":\n        this.IFF.parsePoints(length);\n        break;\n      case \"VMAP\":\n        this.IFF.parseVertexMapping(length);\n        break;\n      case \"POLS\":\n        this.IFF.parsePolygonList(length);\n        break;\n      case \"TAGS\":\n        this.IFF.parseTagStrings(length);\n        break;\n      case \"PTAG\":\n        this.IFF.parsePolygonTagMapping(length);\n        break;\n      case \"VMAD\":\n        this.IFF.parseVertexMapping(length, true);\n        break;\n      case \"DESC\":\n        this.IFF.currentForm.description = this.IFF.reader.getString();\n        break;\n      case \"TEXT\":\n      case \"CMNT\":\n      case \"NCOM\":\n        this.IFF.currentForm.comment = this.IFF.reader.getString();\n        break;\n      case \"NAME\":\n        this.IFF.currentForm.channelName = this.IFF.reader.getString();\n        break;\n      case \"WRAP\":\n        this.IFF.currentForm.wrap = { w: this.IFF.reader.getUint16(), h: this.IFF.reader.getUint16() };\n        break;\n      case \"IMAG\":\n        const index = this.IFF.reader.getVariableLengthIndex();\n        this.IFF.currentForm.imageIndex = index;\n        break;\n      case \"OREF\":\n        this.IFF.currentForm.referenceObject = this.IFF.reader.getString();\n        break;\n      case \"ROID\":\n        this.IFF.currentForm.referenceObjectID = this.IFF.reader.getUint32();\n        break;\n      case \"SSHN\":\n        this.IFF.currentSurface.surfaceShaderName = this.IFF.reader.getString();\n        break;\n      case \"AOVN\":\n        this.IFF.currentSurface.surfaceCustomAOVName = this.IFF.reader.getString();\n        break;\n      case \"NSTA\":\n        this.IFF.currentForm.disabled = this.IFF.reader.getUint16();\n        break;\n      case \"NRNM\":\n        this.IFF.currentForm.realName = this.IFF.reader.getString();\n        break;\n      case \"NNME\":\n        this.IFF.currentForm.refName = this.IFF.reader.getString();\n        this.IFF.currentSurface.nodes[this.IFF.currentForm.refName] = this.IFF.currentForm;\n        break;\n      case \"INME\":\n        if (!this.IFF.currentForm.nodeName)\n          this.IFF.currentForm.nodeName = [];\n        this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());\n        break;\n      case \"IINN\":\n        if (!this.IFF.currentForm.inputNodeName)\n          this.IFF.currentForm.inputNodeName = [];\n        this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());\n        break;\n      case \"IINM\":\n        if (!this.IFF.currentForm.inputName)\n          this.IFF.currentForm.inputName = [];\n        this.IFF.currentForm.inputName.push(this.IFF.reader.getString());\n        break;\n      case \"IONM\":\n        if (!this.IFF.currentForm.inputOutputName)\n          this.IFF.currentForm.inputOutputName = [];\n        this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());\n        break;\n      case \"FNAM\":\n        this.IFF.currentForm.fileName = this.IFF.reader.getString();\n        break;\n      case \"CHAN\":\n        if (length === 4)\n          this.IFF.currentForm.textureChannel = this.IFF.reader.getIDTag();\n        else\n          this.IFF.reader.skip(length);\n        break;\n      case \"SMAN\":\n        const maxSmoothingAngle = this.IFF.reader.getFloat32();\n        this.IFF.currentSurface.attributes.smooth = maxSmoothingAngle < 0 ? false : true;\n        break;\n      case \"COLR\":\n        this.IFF.currentSurface.attributes.Color = { value: this.IFF.reader.getFloat32Array(3) };\n        this.IFF.reader.skip(2);\n        break;\n      case \"LUMI\":\n        this.IFF.currentSurface.attributes.Luminosity = { value: this.IFF.reader.getFloat32() };\n        this.IFF.reader.skip(2);\n        break;\n      case \"SPEC\":\n        this.IFF.currentSurface.attributes.Specular = { value: this.IFF.reader.getFloat32() };\n        this.IFF.reader.skip(2);\n        break;\n      case \"DIFF\":\n        this.IFF.currentSurface.attributes.Diffuse = { value: this.IFF.reader.getFloat32() };\n        this.IFF.reader.skip(2);\n        break;\n      case \"REFL\":\n        this.IFF.currentSurface.attributes.Reflection = { value: this.IFF.reader.getFloat32() };\n        this.IFF.reader.skip(2);\n        break;\n      case \"GLOS\":\n        this.IFF.currentSurface.attributes.Glossiness = { value: this.IFF.reader.getFloat32() };\n        this.IFF.reader.skip(2);\n        break;\n      case \"TRAN\":\n        this.IFF.currentSurface.attributes.opacity = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n      case \"BUMP\":\n        this.IFF.currentSurface.attributes.bumpStrength = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n      case \"SIDE\":\n        this.IFF.currentSurface.attributes.side = this.IFF.reader.getUint16();\n        break;\n      case \"RIMG\":\n        this.IFF.currentSurface.attributes.reflectionMap = this.IFF.reader.getVariableLengthIndex();\n        break;\n      case \"RIND\":\n        this.IFF.currentSurface.attributes.refractiveIndex = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n      case \"TIMG\":\n        this.IFF.currentSurface.attributes.refractionMap = this.IFF.reader.getVariableLengthIndex();\n        break;\n      case \"IMAP\":\n        this.IFF.currentSurface.attributes.imageMapIndex = this.IFF.reader.getUint32();\n        break;\n      case \"IUVI\":\n        this.IFF.currentNode.UVChannel = this.IFF.reader.getString(length);\n        break;\n      case \"IUTL\":\n        this.IFF.currentNode.widthWrappingMode = this.IFF.reader.getUint32();\n        break;\n      case \"IVTL\":\n        this.IFF.currentNode.heightWrappingMode = this.IFF.reader.getUint32();\n        break;\n      default:\n        this.IFF.parseUnknownCHUNK(blockID, length);\n    }\n    if (blockID != \"FORM\") {\n      this.IFF.debugger.node = 1;\n      this.IFF.debugger.nodeID = blockID;\n      this.IFF.debugger.log();\n    }\n    if (this.IFF.reader.offset >= this.IFF.currentFormEnd) {\n      this.IFF.currentForm = this.IFF.parentForm;\n    }\n  }\n}\nexport {\n  LWO3Parser\n};\n"]},"metadata":{},"sourceType":"module"}