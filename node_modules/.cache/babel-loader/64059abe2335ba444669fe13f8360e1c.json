{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Vector3, Quaternion, Object3D, Matrix4 } from \"three\";\n\nvar _position = /* @__PURE__ */new Vector3();\n\nvar _quaternion = /* @__PURE__ */new Quaternion();\n\nvar _scale = /* @__PURE__ */new Vector3();\n\nvar CSS3DObject = /*#__PURE__*/function (_Object3D) {\n  _inherits(CSS3DObject, _Object3D);\n\n  var _super = _createSuper(CSS3DObject);\n\n  function CSS3DObject() {\n    var _this2;\n\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.createElement(\"div\");\n\n    _classCallCheck(this, CSS3DObject);\n\n    _this2 = _super.call(this);\n    _this2.isCSS3DObject = true;\n    _this2.element = element;\n    _this2.element.style.position = \"absolute\";\n    _this2.element.style.pointerEvents = \"auto\";\n    _this2.element.style.userSelect = \"none\";\n\n    _this2.element.setAttribute(\"draggable\", false);\n\n    _this2.addEventListener(\"removed\", function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n\n    return _this2;\n  }\n\n  _createClass(CSS3DObject, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS3DObject.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.element = source.element.cloneNode(true);\n      return this;\n    }\n  }]);\n\n  return CSS3DObject;\n}(Object3D);\n\nvar CSS3DSprite = /*#__PURE__*/function (_CSS3DObject) {\n  _inherits(CSS3DSprite, _CSS3DObject);\n\n  var _super2 = _createSuper(CSS3DSprite);\n\n  function CSS3DSprite(element) {\n    var _this3;\n\n    _classCallCheck(this, CSS3DSprite);\n\n    _this3 = _super2.call(this, element);\n    _this3.isCSS3DSprite = true;\n    _this3.rotation2D = 0;\n    return _this3;\n  }\n\n  _createClass(CSS3DSprite, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS3DSprite.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.rotation2D = source.rotation2D;\n      return this;\n    }\n  }]);\n\n  return CSS3DSprite;\n}(CSS3DObject);\n\nvar _matrix = /* @__PURE__ */new Matrix4();\n\nvar _matrix2 = /* @__PURE__ */new Matrix4();\n\nvar CSS3DRenderer = function CSS3DRenderer() {\n  var parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, CSS3DRenderer);\n\n  var _this = this;\n\n  var _width, _height;\n\n  var _widthHalf, _heightHalf;\n\n  var cache = {\n    camera: {\n      fov: 0,\n      style: \"\"\n    },\n    objects: /* @__PURE__ */new WeakMap()\n  };\n  var domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n  domElement.style.overflow = \"hidden\";\n  this.domElement = domElement;\n  var viewElement = document.createElement(\"div\");\n  viewElement.style.transformOrigin = \"0 0\";\n  viewElement.style.pointerEvents = \"none\";\n  domElement.appendChild(viewElement);\n  var cameraElement = document.createElement(\"div\");\n  cameraElement.style.transformStyle = \"preserve-3d\";\n  viewElement.appendChild(cameraElement);\n\n  this.getSize = function () {\n    return {\n      width: _width,\n      height: _height\n    };\n  };\n\n  this.render = function (scene, camera) {\n    var fov = camera.projectionMatrix.elements[5] * _heightHalf;\n\n    if (cache.camera.fov !== fov) {\n      viewElement.style.perspective = camera.isPerspectiveCamera ? fov + \"px\" : \"\";\n      cache.camera.fov = fov;\n    }\n\n    if (camera.view && camera.view.enabled) {\n      viewElement.style.transform = \"translate( \".concat(-camera.view.offsetX * (_width / camera.view.width), \"px, \").concat(-camera.view.offsetY * (_height / camera.view.height), \"px )\");\n      viewElement.style.transform += \"scale( \".concat(camera.view.fullWidth / camera.view.width, \", \").concat(camera.view.fullHeight / camera.view.height, \" )\");\n    } else {\n      viewElement.style.transform = \"\";\n    }\n\n    if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n    var tx, ty;\n\n    if (camera.isOrthographicCamera) {\n      tx = -(camera.right + camera.left) / 2;\n      ty = (camera.top + camera.bottom) / 2;\n    }\n\n    var scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n    var cameraCSSMatrix = camera.isOrthographicCamera ? \"scale( \".concat(scaleByViewOffset, \" )scale(\") + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : \"scale( \".concat(scaleByViewOffset, \" )translateZ(\") + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\n    var style = cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\n\n    if (cache.camera.style !== style) {\n      cameraElement.style.transform = style;\n      cache.camera.style = style;\n    }\n\n    renderObject(scene, scene, camera, cameraCSSMatrix);\n  };\n\n  this.setSize = function (width, height) {\n    _width = width;\n    _height = height;\n    _widthHalf = _width / 2;\n    _heightHalf = _height / 2;\n    domElement.style.width = width + \"px\";\n    domElement.style.height = height + \"px\";\n    viewElement.style.width = width + \"px\";\n    viewElement.style.height = height + \"px\";\n    cameraElement.style.width = width + \"px\";\n    cameraElement.style.height = height + \"px\";\n  };\n\n  function epsilon(value) {\n    return Math.abs(value) < 1e-10 ? 0 : value;\n  }\n\n  function getCameraCSSMatrix(matrix) {\n    var elements = matrix.elements;\n    return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n  }\n\n  function getObjectCSSMatrix(matrix) {\n    var elements = matrix.elements;\n    var matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n    return \"translate(-50%,-50%)\" + matrix3d;\n  }\n\n  function renderObject(object, scene, camera, cameraCSSMatrix) {\n    if (object.isCSS3DObject) {\n      var visible = object.visible === true && object.layers.test(camera.layers) === true;\n      object.element.style.display = visible === true ? \"\" : \"none\";\n\n      if (visible === true) {\n        object.onBeforeRender(_this, scene, camera);\n        var style;\n\n        if (object.isCSS3DSprite) {\n          _matrix.copy(camera.matrixWorldInverse);\n\n          _matrix.transpose();\n\n          if (object.rotation2D !== 0) _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\n          object.matrixWorld.decompose(_position, _quaternion, _scale);\n\n          _matrix.setPosition(_position);\n\n          _matrix.scale(_scale);\n\n          _matrix.elements[3] = 0;\n          _matrix.elements[7] = 0;\n          _matrix.elements[11] = 0;\n          _matrix.elements[15] = 1;\n          style = getObjectCSSMatrix(_matrix);\n        } else {\n          style = getObjectCSSMatrix(object.matrixWorld);\n        }\n\n        var element = object.element;\n        var cachedObject = cache.objects.get(object);\n\n        if (cachedObject === void 0 || cachedObject.style !== style) {\n          element.style.transform = style;\n          var objectData = {\n            style: style\n          };\n          cache.objects.set(object, objectData);\n        }\n\n        if (element.parentNode !== cameraElement) {\n          cameraElement.appendChild(element);\n        }\n\n        object.onAfterRender(_this, scene, camera);\n      }\n    }\n\n    for (var i = 0, l = object.children.length; i < l; i++) {\n      renderObject(object.children[i], scene, camera, cameraCSSMatrix);\n    }\n  }\n};\n\nexport { CSS3DObject, CSS3DRenderer, CSS3DSprite };","map":{"version":3,"sources":["/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/three-stdlib/renderers/CSS3DRenderer.js"],"names":["Vector3","Quaternion","Object3D","Matrix4","_position","_quaternion","_scale","CSS3DObject","element","document","createElement","isCSS3DObject","style","position","pointerEvents","userSelect","setAttribute","addEventListener","traverse","object","Element","parentNode","removeChild","source","recursive","cloneNode","CSS3DSprite","isCSS3DSprite","rotation2D","_matrix","_matrix2","CSS3DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","camera","fov","objects","WeakMap","domElement","overflow","viewElement","transformOrigin","appendChild","cameraElement","transformStyle","getSize","width","height","render","scene","projectionMatrix","elements","perspective","isPerspectiveCamera","view","enabled","transform","offsetX","offsetY","fullWidth","fullHeight","matrixWorldAutoUpdate","updateMatrixWorld","parent","tx","ty","isOrthographicCamera","right","left","top","bottom","scaleByViewOffset","cameraCSSMatrix","epsilon","getCameraCSSMatrix","matrixWorldInverse","renderObject","setSize","value","Math","abs","matrix","getObjectCSSMatrix","matrix3d","visible","layers","test","display","onBeforeRender","copy","transpose","multiply","makeRotationZ","matrixWorld","decompose","setPosition","scale","cachedObject","get","objectData","set","onAfterRender","i","l","children","length"],"mappings":"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","sourcesContent":["import { Vector3, Quaternion, Object3D, Matrix4 } from \"three\";\nconst _position = /* @__PURE__ */ new Vector3();\nconst _quaternion = /* @__PURE__ */ new Quaternion();\nconst _scale = /* @__PURE__ */ new Vector3();\nclass CSS3DObject extends Object3D {\n  constructor(element = document.createElement(\"div\")) {\n    super();\n    this.isCSS3DObject = true;\n    this.element = element;\n    this.element.style.position = \"absolute\";\n    this.element.style.pointerEvents = \"auto\";\n    this.element.style.userSelect = \"none\";\n    this.element.setAttribute(\"draggable\", false);\n    this.addEventListener(\"removed\", function() {\n      this.traverse(function(object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n  }\n  copy(source, recursive) {\n    super.copy(source, recursive);\n    this.element = source.element.cloneNode(true);\n    return this;\n  }\n}\nclass CSS3DSprite extends CSS3DObject {\n  constructor(element) {\n    super(element);\n    this.isCSS3DSprite = true;\n    this.rotation2D = 0;\n  }\n  copy(source, recursive) {\n    super.copy(source, recursive);\n    this.rotation2D = source.rotation2D;\n    return this;\n  }\n}\nconst _matrix = /* @__PURE__ */ new Matrix4();\nconst _matrix2 = /* @__PURE__ */ new Matrix4();\nclass CSS3DRenderer {\n  constructor(parameters = {}) {\n    const _this = this;\n    let _width, _height;\n    let _widthHalf, _heightHalf;\n    const cache = {\n      camera: { fov: 0, style: \"\" },\n      objects: /* @__PURE__ */ new WeakMap()\n    };\n    const domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n    domElement.style.overflow = \"hidden\";\n    this.domElement = domElement;\n    const viewElement = document.createElement(\"div\");\n    viewElement.style.transformOrigin = \"0 0\";\n    viewElement.style.pointerEvents = \"none\";\n    domElement.appendChild(viewElement);\n    const cameraElement = document.createElement(\"div\");\n    cameraElement.style.transformStyle = \"preserve-3d\";\n    viewElement.appendChild(cameraElement);\n    this.getSize = function() {\n      return {\n        width: _width,\n        height: _height\n      };\n    };\n    this.render = function(scene, camera) {\n      const fov = camera.projectionMatrix.elements[5] * _heightHalf;\n      if (cache.camera.fov !== fov) {\n        viewElement.style.perspective = camera.isPerspectiveCamera ? fov + \"px\" : \"\";\n        cache.camera.fov = fov;\n      }\n      if (camera.view && camera.view.enabled) {\n        viewElement.style.transform = `translate( ${-camera.view.offsetX * (_width / camera.view.width)}px, ${-camera.view.offsetY * (_height / camera.view.height)}px )`;\n        viewElement.style.transform += `scale( ${camera.view.fullWidth / camera.view.width}, ${camera.view.fullHeight / camera.view.height} )`;\n      } else {\n        viewElement.style.transform = \"\";\n      }\n      if (scene.matrixWorldAutoUpdate === true)\n        scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true)\n        camera.updateMatrixWorld();\n      let tx, ty;\n      if (camera.isOrthographicCamera) {\n        tx = -(camera.right + camera.left) / 2;\n        ty = (camera.top + camera.bottom) / 2;\n      }\n      const scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n      const cameraCSSMatrix = camera.isOrthographicCamera ? `scale( ${scaleByViewOffset} )scale(` + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : `scale( ${scaleByViewOffset} )translateZ(` + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\n      const style = cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\n      if (cache.camera.style !== style) {\n        cameraElement.style.transform = style;\n        cache.camera.style = style;\n      }\n      renderObject(scene, scene, camera, cameraCSSMatrix);\n    };\n    this.setSize = function(width, height) {\n      _width = width;\n      _height = height;\n      _widthHalf = _width / 2;\n      _heightHalf = _height / 2;\n      domElement.style.width = width + \"px\";\n      domElement.style.height = height + \"px\";\n      viewElement.style.width = width + \"px\";\n      viewElement.style.height = height + \"px\";\n      cameraElement.style.width = width + \"px\";\n      cameraElement.style.height = height + \"px\";\n    };\n    function epsilon(value) {\n      return Math.abs(value) < 1e-10 ? 0 : value;\n    }\n    function getCameraCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n    }\n    function getObjectCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      const matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n      return \"translate(-50%,-50%)\" + matrix3d;\n    }\n    function renderObject(object, scene, camera, cameraCSSMatrix) {\n      if (object.isCSS3DObject) {\n        const visible = object.visible === true && object.layers.test(camera.layers) === true;\n        object.element.style.display = visible === true ? \"\" : \"none\";\n        if (visible === true) {\n          object.onBeforeRender(_this, scene, camera);\n          let style;\n          if (object.isCSS3DSprite) {\n            _matrix.copy(camera.matrixWorldInverse);\n            _matrix.transpose();\n            if (object.rotation2D !== 0)\n              _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\n            object.matrixWorld.decompose(_position, _quaternion, _scale);\n            _matrix.setPosition(_position);\n            _matrix.scale(_scale);\n            _matrix.elements[3] = 0;\n            _matrix.elements[7] = 0;\n            _matrix.elements[11] = 0;\n            _matrix.elements[15] = 1;\n            style = getObjectCSSMatrix(_matrix);\n          } else {\n            style = getObjectCSSMatrix(object.matrixWorld);\n          }\n          const element = object.element;\n          const cachedObject = cache.objects.get(object);\n          if (cachedObject === void 0 || cachedObject.style !== style) {\n            element.style.transform = style;\n            const objectData = { style };\n            cache.objects.set(object, objectData);\n          }\n          if (element.parentNode !== cameraElement) {\n            cameraElement.appendChild(element);\n          }\n          object.onAfterRender(_this, scene, camera);\n        }\n      }\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        renderObject(object.children[i], scene, camera, cameraCSSMatrix);\n      }\n    }\n  }\n}\nexport {\n  CSS3DObject,\n  CSS3DRenderer,\n  CSS3DSprite\n};\n"]},"metadata":{},"sourceType":"module"}