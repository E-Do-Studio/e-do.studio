{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/Repositories/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/Repositories/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/theodaguier/Repositories/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/theodaguier/Repositories/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Loader, FileLoader, Vector3, DataTexture, UnsignedByteType, LinearFilter, ClampToEdgeWrapping } from \"three\";\nimport { Data3DTexture } from \"../_polyfill/Data3DTexture.js\";\n\nvar LUTCubeLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(LUTCubeLoader, _Loader);\n\n  var _super = _createSuper(LUTCubeLoader);\n\n  function LUTCubeLoader() {\n    _classCallCheck(this, LUTCubeLoader);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LUTCubeLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var _this = this;\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType(\"text\");\n      loader.load(url, function (text) {\n        try {\n          onLoad(_this.parse(text));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n\n          _this.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(str) {\n      str = str.replace(/^#.*?(\\n|\\r)/gm, \"\").replace(/^\\s*?(\\n|\\r)/gm, \"\").trim();\n      var title = null;\n      var size = null;\n      var domainMin = new Vector3(0, 0, 0);\n      var domainMax = new Vector3(1, 1, 1);\n      var lines = str.split(/[\\n\\r]+/g);\n      var data = null;\n      var currIndex = 0;\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i].trim();\n        var split = line.split(/\\s/g);\n\n        switch (split[0]) {\n          case \"TITLE\":\n            title = line.substring(7, line.length - 1);\n            break;\n\n          case \"LUT_3D_SIZE\":\n            var sizeToken = split[1];\n            size = parseFloat(sizeToken);\n            data = new Uint8Array(size * size * size * 4);\n            break;\n\n          case \"DOMAIN_MIN\":\n            domainMin.x = parseFloat(split[1]);\n            domainMin.y = parseFloat(split[2]);\n            domainMin.z = parseFloat(split[3]);\n            break;\n\n          case \"DOMAIN_MAX\":\n            domainMax.x = parseFloat(split[1]);\n            domainMax.y = parseFloat(split[2]);\n            domainMax.z = parseFloat(split[3]);\n            break;\n\n          default:\n            var r = parseFloat(split[0]);\n            var g = parseFloat(split[1]);\n            var b = parseFloat(split[2]);\n\n            if (r > 1 || r < 0 || g > 1 || g < 0 || b > 1 || b < 0) {\n              throw new Error(\"LUTCubeLoader : Non normalized values not supported.\");\n            }\n\n            data[currIndex + 0] = r * 255;\n            data[currIndex + 1] = g * 255;\n            data[currIndex + 2] = b * 255;\n            data[currIndex + 3] = 255;\n            currIndex += 4;\n        }\n      }\n\n      var texture = new DataTexture();\n      texture.image.data = data;\n      texture.image.width = size;\n      texture.image.height = size * size;\n      texture.type = UnsignedByteType;\n      texture.magFilter = LinearFilter;\n      texture.minFilter = LinearFilter;\n      texture.wrapS = ClampToEdgeWrapping;\n      texture.wrapT = ClampToEdgeWrapping;\n      texture.generateMipmaps = false;\n      texture.needsUpdate = true;\n      var texture3D = new Data3DTexture();\n      texture3D.image.data = data;\n      texture3D.image.width = size;\n      texture3D.image.height = size;\n      texture3D.image.depth = size;\n      texture3D.type = UnsignedByteType;\n      texture3D.magFilter = LinearFilter;\n      texture3D.minFilter = LinearFilter;\n      texture3D.wrapS = ClampToEdgeWrapping;\n      texture3D.wrapT = ClampToEdgeWrapping;\n      texture3D.wrapR = ClampToEdgeWrapping;\n      texture3D.generateMipmaps = false;\n      texture3D.needsUpdate = true;\n      return {\n        title: title,\n        size: size,\n        domainMin: domainMin,\n        domainMax: domainMax,\n        texture: texture,\n        texture3D: texture3D\n      };\n    }\n  }]);\n\n  return LUTCubeLoader;\n}(Loader);\n\nexport { LUTCubeLoader };","map":{"version":3,"sources":["/Users/theodaguier/Repositories/E-Do-Studio/node_modules/three-stdlib/loaders/LUTCubeLoader.js"],"names":["Loader","FileLoader","Vector3","DataTexture","UnsignedByteType","LinearFilter","ClampToEdgeWrapping","Data3DTexture","LUTCubeLoader","url","onLoad","onProgress","onError","loader","manager","setPath","path","setResponseType","load","text","parse","e","console","error","itemError","str","replace","trim","title","size","domainMin","domainMax","lines","split","data","currIndex","i","l","length","line","substring","sizeToken","parseFloat","Uint8Array","x","y","z","r","g","b","Error","texture","image","width","height","type","magFilter","minFilter","wrapS","wrapT","generateMipmaps","needsUpdate","texture3D","depth","wrapR"],"mappings":"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","sourcesContent":["import { Loader, FileLoader, Vector3, DataTexture, UnsignedByteType, LinearFilter, ClampToEdgeWrapping } from \"three\";\nimport { Data3DTexture } from \"../_polyfill/Data3DTexture.js\";\nclass LUTCubeLoader extends Loader {\n  load(url, onLoad, onProgress, onError) {\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"text\");\n    loader.load(\n      url,\n      (text) => {\n        try {\n          onLoad(this.parse(text));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n          this.manager.itemError(url);\n        }\n      },\n      onProgress,\n      onError\n    );\n  }\n  parse(str) {\n    str = str.replace(/^#.*?(\\n|\\r)/gm, \"\").replace(/^\\s*?(\\n|\\r)/gm, \"\").trim();\n    let title = null;\n    let size = null;\n    const domainMin = new Vector3(0, 0, 0);\n    const domainMax = new Vector3(1, 1, 1);\n    const lines = str.split(/[\\n\\r]+/g);\n    let data = null;\n    let currIndex = 0;\n    for (let i = 0, l = lines.length; i < l; i++) {\n      const line = lines[i].trim();\n      const split = line.split(/\\s/g);\n      switch (split[0]) {\n        case \"TITLE\":\n          title = line.substring(7, line.length - 1);\n          break;\n        case \"LUT_3D_SIZE\":\n          const sizeToken = split[1];\n          size = parseFloat(sizeToken);\n          data = new Uint8Array(size * size * size * 4);\n          break;\n        case \"DOMAIN_MIN\":\n          domainMin.x = parseFloat(split[1]);\n          domainMin.y = parseFloat(split[2]);\n          domainMin.z = parseFloat(split[3]);\n          break;\n        case \"DOMAIN_MAX\":\n          domainMax.x = parseFloat(split[1]);\n          domainMax.y = parseFloat(split[2]);\n          domainMax.z = parseFloat(split[3]);\n          break;\n        default:\n          const r = parseFloat(split[0]);\n          const g = parseFloat(split[1]);\n          const b = parseFloat(split[2]);\n          if (r > 1 || r < 0 || g > 1 || g < 0 || b > 1 || b < 0) {\n            throw new Error(\"LUTCubeLoader : Non normalized values not supported.\");\n          }\n          data[currIndex + 0] = r * 255;\n          data[currIndex + 1] = g * 255;\n          data[currIndex + 2] = b * 255;\n          data[currIndex + 3] = 255;\n          currIndex += 4;\n      }\n    }\n    const texture = new DataTexture();\n    texture.image.data = data;\n    texture.image.width = size;\n    texture.image.height = size * size;\n    texture.type = UnsignedByteType;\n    texture.magFilter = LinearFilter;\n    texture.minFilter = LinearFilter;\n    texture.wrapS = ClampToEdgeWrapping;\n    texture.wrapT = ClampToEdgeWrapping;\n    texture.generateMipmaps = false;\n    texture.needsUpdate = true;\n    const texture3D = new Data3DTexture();\n    texture3D.image.data = data;\n    texture3D.image.width = size;\n    texture3D.image.height = size;\n    texture3D.image.depth = size;\n    texture3D.type = UnsignedByteType;\n    texture3D.magFilter = LinearFilter;\n    texture3D.minFilter = LinearFilter;\n    texture3D.wrapS = ClampToEdgeWrapping;\n    texture3D.wrapT = ClampToEdgeWrapping;\n    texture3D.wrapR = ClampToEdgeWrapping;\n    texture3D.generateMipmaps = false;\n    texture3D.needsUpdate = true;\n    return {\n      title,\n      size,\n      domainMin,\n      domainMax,\n      texture,\n      texture3D\n    };\n  }\n}\nexport {\n  LUTCubeLoader\n};\n"]},"metadata":{},"sourceType":"module"}