{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Color, MathUtils } from \"three\";\n\nvar Lut = /*#__PURE__*/function () {\n  function Lut(colormap) {\n    var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 32;\n\n    _classCallCheck(this, Lut);\n\n    this.isLut = true;\n    this.lut = [];\n    this.map = [];\n    this.n = 0;\n    this.minV = 0;\n    this.maxV = 1;\n    this.setColorMap(colormap, count);\n  }\n\n  _createClass(Lut, [{\n    key: \"set\",\n    value: function set(value) {\n      if (value.isLut === true) {\n        this.copy(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setMin\",\n    value: function setMin(min) {\n      this.minV = min;\n      return this;\n    }\n  }, {\n    key: \"setMax\",\n    value: function setMax(max) {\n      this.maxV = max;\n      return this;\n    }\n  }, {\n    key: \"setColorMap\",\n    value: function setColorMap(colormap) {\n      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 32;\n      this.map = ColorMapKeywords[colormap] || ColorMapKeywords.rainbow;\n      this.n = count;\n      var step = 1 / this.n;\n      var minColor = new Color();\n      var maxColor = new Color();\n      this.lut.length = 0;\n      this.lut.push(new Color(this.map[0][1]));\n\n      for (var i = 1; i < count; i++) {\n        var alpha = i * step;\n\n        for (var j = 0; j < this.map.length - 1; j++) {\n          if (alpha > this.map[j][0] && alpha <= this.map[j + 1][0]) {\n            var min = this.map[j][0];\n            var max = this.map[j + 1][0];\n            minColor.setHex(this.map[j][1], \"linear-srgb\");\n            maxColor.setHex(this.map[j + 1][1], \"linear-srgb\");\n            var color = new Color().lerpColors(minColor, maxColor, (alpha - min) / (max - min));\n            this.lut.push(color);\n          }\n        }\n      }\n\n      this.lut.push(new Color(this.map[this.map.length - 1][1]));\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(lut) {\n      this.lut = lut.lut;\n      this.map = lut.map;\n      this.n = lut.n;\n      this.minV = lut.minV;\n      this.maxV = lut.maxV;\n      return this;\n    }\n  }, {\n    key: \"getColor\",\n    value: function getColor(alpha) {\n      alpha = MathUtils.clamp(alpha, this.minV, this.maxV);\n      alpha = (alpha - this.minV) / (this.maxV - this.minV);\n      var colorPosition = Math.round(alpha * this.n);\n      return this.lut[colorPosition];\n    }\n  }, {\n    key: \"addColorMap\",\n    value: function addColorMap(name, arrayOfColors) {\n      ColorMapKeywords[name] = arrayOfColors;\n      return this;\n    }\n  }, {\n    key: \"createCanvas\",\n    value: function createCanvas() {\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = 1;\n      canvas.height = this.n;\n      this.updateCanvas(canvas);\n      return canvas;\n    }\n  }, {\n    key: \"updateCanvas\",\n    value: function updateCanvas(canvas) {\n      var ctx = canvas.getContext(\"2d\", {\n        alpha: false\n      });\n      var imageData = ctx.getImageData(0, 0, 1, this.n);\n      var data = imageData.data;\n      var k = 0;\n      var step = 1 / this.n;\n      var minColor = new Color();\n      var maxColor = new Color();\n      var finalColor = new Color();\n\n      for (var i = 1; i >= 0; i -= step) {\n        for (var j = this.map.length - 1; j >= 0; j--) {\n          if (i < this.map[j][0] && i >= this.map[j - 1][0]) {\n            var min = this.map[j - 1][0];\n            var max = this.map[j][0];\n            minColor.setHex(this.map[j - 1][1], \"linear-srgb\");\n            maxColor.setHex(this.map[j][1], \"linear-srgb\");\n            finalColor.lerpColors(minColor, maxColor, (i - min) / (max - min));\n            data[k * 4] = Math.round(finalColor.r * 255);\n            data[k * 4 + 1] = Math.round(finalColor.g * 255);\n            data[k * 4 + 2] = Math.round(finalColor.b * 255);\n            data[k * 4 + 3] = 255;\n            k += 1;\n          }\n        }\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n      return canvas;\n    }\n  }]);\n\n  return Lut;\n}();\n\nvar ColorMapKeywords = {\n  rainbow: [[0, 255], [0.2, 65535], [0.5, 65280], [0.8, 16776960], [1, 16711680]],\n  cooltowarm: [[0, 3952322], [0.2, 10206463], [0.5, 14474460], [0.8, 16163717], [1, 11797542]],\n  blackbody: [[0, 0], [0.2, 7864320], [0.5, 15086080], [0.8, 16776960], [1, 16777215]],\n  grayscale: [[0, 0], [0.2, 4210752], [0.5, 8355712], [0.8, 12566463], [1, 16777215]]\n};\nexport { ColorMapKeywords, Lut };","map":{"version":3,"sources":["/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/three-stdlib/math/Lut.js"],"names":["Color","MathUtils","Lut","colormap","count","isLut","lut","map","n","minV","maxV","setColorMap","value","copy","min","max","ColorMapKeywords","rainbow","step","minColor","maxColor","length","push","i","alpha","j","setHex","color","lerpColors","clamp","colorPosition","Math","round","name","arrayOfColors","canvas","document","createElement","width","height","updateCanvas","ctx","getContext","imageData","getImageData","data","k","finalColor","r","g","b","putImageData","cooltowarm","blackbody","grayscale"],"mappings":"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","sourcesContent":["import { Color, MathUtils } from \"three\";\nclass Lut {\n  constructor(colormap, count = 32) {\n    this.isLut = true;\n    this.lut = [];\n    this.map = [];\n    this.n = 0;\n    this.minV = 0;\n    this.maxV = 1;\n    this.setColorMap(colormap, count);\n  }\n  set(value) {\n    if (value.isLut === true) {\n      this.copy(value);\n    }\n    return this;\n  }\n  setMin(min) {\n    this.minV = min;\n    return this;\n  }\n  setMax(max) {\n    this.maxV = max;\n    return this;\n  }\n  setColorMap(colormap, count = 32) {\n    this.map = ColorMapKeywords[colormap] || ColorMapKeywords.rainbow;\n    this.n = count;\n    const step = 1 / this.n;\n    const minColor = new Color();\n    const maxColor = new Color();\n    this.lut.length = 0;\n    this.lut.push(new Color(this.map[0][1]));\n    for (let i = 1; i < count; i++) {\n      const alpha = i * step;\n      for (let j = 0; j < this.map.length - 1; j++) {\n        if (alpha > this.map[j][0] && alpha <= this.map[j + 1][0]) {\n          const min = this.map[j][0];\n          const max = this.map[j + 1][0];\n          minColor.setHex(this.map[j][1], \"linear-srgb\");\n          maxColor.setHex(this.map[j + 1][1], \"linear-srgb\");\n          const color = new Color().lerpColors(minColor, maxColor, (alpha - min) / (max - min));\n          this.lut.push(color);\n        }\n      }\n    }\n    this.lut.push(new Color(this.map[this.map.length - 1][1]));\n    return this;\n  }\n  copy(lut) {\n    this.lut = lut.lut;\n    this.map = lut.map;\n    this.n = lut.n;\n    this.minV = lut.minV;\n    this.maxV = lut.maxV;\n    return this;\n  }\n  getColor(alpha) {\n    alpha = MathUtils.clamp(alpha, this.minV, this.maxV);\n    alpha = (alpha - this.minV) / (this.maxV - this.minV);\n    const colorPosition = Math.round(alpha * this.n);\n    return this.lut[colorPosition];\n  }\n  addColorMap(name, arrayOfColors) {\n    ColorMapKeywords[name] = arrayOfColors;\n    return this;\n  }\n  createCanvas() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = this.n;\n    this.updateCanvas(canvas);\n    return canvas;\n  }\n  updateCanvas(canvas) {\n    const ctx = canvas.getContext(\"2d\", { alpha: false });\n    const imageData = ctx.getImageData(0, 0, 1, this.n);\n    const data = imageData.data;\n    let k = 0;\n    const step = 1 / this.n;\n    const minColor = new Color();\n    const maxColor = new Color();\n    const finalColor = new Color();\n    for (let i = 1; i >= 0; i -= step) {\n      for (let j = this.map.length - 1; j >= 0; j--) {\n        if (i < this.map[j][0] && i >= this.map[j - 1][0]) {\n          const min = this.map[j - 1][0];\n          const max = this.map[j][0];\n          minColor.setHex(this.map[j - 1][1], \"linear-srgb\");\n          maxColor.setHex(this.map[j][1], \"linear-srgb\");\n          finalColor.lerpColors(minColor, maxColor, (i - min) / (max - min));\n          data[k * 4] = Math.round(finalColor.r * 255);\n          data[k * 4 + 1] = Math.round(finalColor.g * 255);\n          data[k * 4 + 2] = Math.round(finalColor.b * 255);\n          data[k * 4 + 3] = 255;\n          k += 1;\n        }\n      }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  }\n}\nconst ColorMapKeywords = {\n  rainbow: [\n    [0, 255],\n    [0.2, 65535],\n    [0.5, 65280],\n    [0.8, 16776960],\n    [1, 16711680]\n  ],\n  cooltowarm: [\n    [0, 3952322],\n    [0.2, 10206463],\n    [0.5, 14474460],\n    [0.8, 16163717],\n    [1, 11797542]\n  ],\n  blackbody: [\n    [0, 0],\n    [0.2, 7864320],\n    [0.5, 15086080],\n    [0.8, 16776960],\n    [1, 16777215]\n  ],\n  grayscale: [\n    [0, 0],\n    [0.2, 4210752],\n    [0.5, 8355712],\n    [0.8, 12566463],\n    [1, 16777215]\n  ]\n};\nexport {\n  ColorMapKeywords,\n  Lut\n};\n"]},"metadata":{},"sourceType":"module"}