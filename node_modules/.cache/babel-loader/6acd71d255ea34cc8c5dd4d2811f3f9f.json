{"ast":null,"code":"var __defProp = Object.defineProperty;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n  return value;\n};\n\nimport { EventDispatcher, Vector3, TOUCH, Spherical, Vector2, Quaternion, MOUSE, PerspectiveCamera, OrthographicCamera } from \"three\";\n\nvar STATE = /* @__PURE__ */(STATE2 => {\n  STATE2[STATE2[\"NONE\"] = -1] = \"NONE\";\n  STATE2[STATE2[\"ROTATE\"] = 0] = \"ROTATE\";\n  STATE2[STATE2[\"DOLLY\"] = 1] = \"DOLLY\";\n  STATE2[STATE2[\"PAN\"] = 2] = \"PAN\";\n  STATE2[STATE2[\"TOUCH_ROTATE\"] = 3] = \"TOUCH_ROTATE\";\n  STATE2[STATE2[\"TOUCH_PAN\"] = 4] = \"TOUCH_PAN\";\n  STATE2[STATE2[\"TOUCH_DOLLY_PAN\"] = 5] = \"TOUCH_DOLLY_PAN\";\n  STATE2[STATE2[\"TOUCH_DOLLY_ROTATE\"] = 6] = \"TOUCH_DOLLY_ROTATE\";\n  return STATE2;\n})(STATE || {});\n\nclass CameraControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n\n    __publicField(this, \"object\");\n\n    __publicField(this, \"domElement\");\n    /** Set to false to disable this control */\n\n\n    __publicField(this, \"enabled\", true);\n    /** \"target\" sets the location of focus, where the object orbits around */\n\n\n    __publicField(this, \"target\", new Vector3());\n    /** Set to true to enable trackball behavior */\n\n\n    __publicField(this, \"trackball\", false);\n    /** How far you can dolly in ( PerspectiveCamera only ) */\n\n\n    __publicField(this, \"minDistance\", 0);\n    /** How far you can dolly out ( PerspectiveCamera only ) */\n\n\n    __publicField(this, \"maxDistance\", Infinity); // How far you can zoom in and out ( OrthographicCamera only )\n\n\n    __publicField(this, \"minZoom\", 0);\n\n    __publicField(this, \"maxZoom\", Infinity); // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n\n\n    __publicField(this, \"minPolarAngle\", 0);\n\n    __publicField(this, \"maxPolarAngle\", Math.PI); // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n\n    __publicField(this, \"minAzimuthAngle\", -Infinity); // radians\n\n\n    __publicField(this, \"maxAzimuthAngle\", Infinity); // radians\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n\n\n    __publicField(this, \"enableDamping\", false);\n\n    __publicField(this, \"dampingFactor\", 0.05);\n    /**\n     * This option enables dollying in and out; property named as \"zoom\" for backwards compatibility\n     * Set to false to disable zooming\n     */\n\n\n    __publicField(this, \"enableZoom\", true);\n\n    __publicField(this, \"zoomSpeed\", 1);\n    /** Set to false to disable rotating */\n\n\n    __publicField(this, \"enableRotate\", true);\n\n    __publicField(this, \"rotateSpeed\", 1);\n    /** Set to false to disable panning */\n\n\n    __publicField(this, \"enablePan\", true);\n\n    __publicField(this, \"panSpeed\", 1);\n    /** if true, pan in screen-space */\n\n\n    __publicField(this, \"screenSpacePanning\", false);\n    /** pixels moved per arrow key push */\n\n\n    __publicField(this, \"keyPanSpeed\", 7);\n    /**\n     * Set to true to automatically rotate around the target\n     * If auto-rotate is enabled, you must call controls.update() in your animation loop\n     * auto-rotate is not supported for trackball behavior\n     */\n\n\n    __publicField(this, \"autoRotate\", false);\n\n    __publicField(this, \"autoRotateSpeed\", 2); // 30 seconds per round when fps is 60\n\n    /** Set to false to disable use of the keys */\n\n\n    __publicField(this, \"enableKeys\", true);\n    /** The four arrow keys */\n\n\n    __publicField(this, \"keys\", {\n      LEFT: \"ArrowLeft\",\n      UP: \"ArrowUp\",\n      RIGHT: \"ArrowRight\",\n      BOTTOM: \"ArrowDown\"\n    });\n\n    __publicField(this, \"mouseButtons\");\n    /** Touch fingers */\n\n\n    __publicField(this, \"touches\", {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    }); // for reset\n\n\n    __publicField(this, \"target0\");\n\n    __publicField(this, \"position0\");\n\n    __publicField(this, \"quaternion0\");\n\n    __publicField(this, \"zoom0\"); // current position in spherical coordinates\n\n\n    __publicField(this, \"spherical\", new Spherical());\n\n    __publicField(this, \"sphericalDelta\", new Spherical());\n\n    __publicField(this, \"changeEvent\", {\n      type: \"change\"\n    });\n\n    __publicField(this, \"startEvent\", {\n      type: \"start\"\n    });\n\n    __publicField(this, \"endEvent\", {\n      type: \"end\"\n    });\n\n    __publicField(this, \"state\", -1);\n\n    __publicField(this, \"EPS\", 1e-6);\n\n    __publicField(this, \"scale\", 1);\n\n    __publicField(this, \"panOffset\", new Vector3());\n\n    __publicField(this, \"zoomChanged\", false);\n\n    __publicField(this, \"rotateStart\", new Vector2());\n\n    __publicField(this, \"rotateEnd\", new Vector2());\n\n    __publicField(this, \"rotateDelta\", new Vector2());\n\n    __publicField(this, \"panStart\", new Vector2());\n\n    __publicField(this, \"panEnd\", new Vector2());\n\n    __publicField(this, \"panDelta\", new Vector2());\n\n    __publicField(this, \"dollyStart\", new Vector2());\n\n    __publicField(this, \"dollyEnd\", new Vector2());\n\n    __publicField(this, \"dollyDelta\", new Vector2());\n\n    __publicField(this, \"offset\", new Vector3());\n\n    __publicField(this, \"lastPosition\", new Vector3());\n\n    __publicField(this, \"lastQuaternion\", new Quaternion());\n\n    __publicField(this, \"q\", new Quaternion());\n\n    __publicField(this, \"v\", new Vector3());\n\n    __publicField(this, \"vec\", new Vector3());\n\n    __publicField(this, \"quat\");\n\n    __publicField(this, \"quatInverse\");\n\n    __publicField(this, \"getPolarAngle\", () => this.spherical.phi);\n\n    __publicField(this, \"getAzimuthalAngle\", () => this.spherical.theta);\n\n    __publicField(this, \"saveState\", () => {\n      this.target0.copy(this.target);\n      this.position0.copy(this.object.position);\n      this.quaternion0.copy(this.object.quaternion);\n      this.zoom0 = this.object.zoom;\n    });\n\n    __publicField(this, \"reset\", () => {\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.quaternion.copy(this.quaternion0);\n      this.object.zoom = this.zoom0;\n      this.object.updateProjectionMatrix();\n      this.dispatchEvent(this.changeEvent);\n      this.update();\n      this.state = -1;\n    });\n\n    __publicField(this, \"dispose\", () => {\n      this.domElement.removeEventListener(\"contextmenu\", this.onContextMenu, false);\n      this.domElement.removeEventListener(\"mousedown\", this.onMouseDown, false);\n      this.domElement.removeEventListener(\"wheel\", this.onMouseWheel, false);\n      this.domElement.removeEventListener(\"touchstart\", this.onTouchStart, false);\n      this.domElement.removeEventListener(\"touchend\", this.onTouchEnd, false);\n      this.domElement.removeEventListener(\"touchmove\", this.onTouchMove, false);\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\n      this.domElement.removeEventListener(\"keydown\", this.onKeyDown, false);\n    });\n\n    __publicField(this, \"update\", () => {\n      const position = this.object.position;\n      this.offset.copy(position).sub(this.target);\n\n      if (this.trackball) {\n        if (this.sphericalDelta.theta) {\n          this.vec.set(0, 1, 0).applyQuaternion(this.object.quaternion);\n          const factor = this.enableDamping ? this.dampingFactor : 1;\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.theta * factor);\n          this.object.quaternion.premultiply(this.q);\n          this.offset.applyQuaternion(this.q);\n        }\n\n        if (this.sphericalDelta.phi) {\n          this.vec.set(1, 0, 0).applyQuaternion(this.object.quaternion);\n          const factor = this.enableDamping ? this.dampingFactor : 1;\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.phi * factor);\n          this.object.quaternion.premultiply(this.q);\n          this.offset.applyQuaternion(this.q);\n        }\n\n        this.offset.multiplyScalar(this.scale);\n        this.offset.clampLength(this.minDistance, this.maxDistance);\n      } else {\n        this.offset.applyQuaternion(this.quat);\n\n        if (this.autoRotate && this.state === -1) {\n          this.rotateLeft(this.getAutoRotationAngle());\n        }\n\n        this.spherical.setFromVector3(this.offset);\n\n        if (this.enableDamping) {\n          this.spherical.theta += this.sphericalDelta.theta * this.dampingFactor;\n          this.spherical.phi += this.sphericalDelta.phi * this.dampingFactor;\n        } else {\n          this.spherical.theta += this.sphericalDelta.theta;\n          this.spherical.phi += this.sphericalDelta.phi;\n        }\n\n        this.spherical.theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, this.spherical.theta));\n        this.spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this.spherical.phi));\n        this.spherical.makeSafe();\n        this.spherical.radius *= this.scale;\n        this.spherical.radius = Math.max(this.minDistance, Math.min(this.maxDistance, this.spherical.radius));\n        this.offset.setFromSpherical(this.spherical);\n        this.offset.applyQuaternion(this.quatInverse);\n      }\n\n      if (this.enableDamping === true) {\n        this.target.addScaledVector(this.panOffset, this.dampingFactor);\n      } else {\n        this.target.add(this.panOffset);\n      }\n\n      position.copy(this.target).add(this.offset);\n\n      if (this.trackball === false) {\n        this.object.lookAt(this.target);\n      }\n\n      if (this.enableDamping === true) {\n        this.sphericalDelta.theta *= 1 - this.dampingFactor;\n        this.sphericalDelta.phi *= 1 - this.dampingFactor;\n        this.panOffset.multiplyScalar(1 - this.dampingFactor);\n      } else {\n        this.sphericalDelta.set(0, 0, 0);\n        this.panOffset.set(0, 0, 0);\n      }\n\n      this.scale = 1;\n\n      if (this.zoomChanged || this.lastPosition.distanceToSquared(this.object.position) > this.EPS || 8 * (1 - this.lastQuaternion.dot(this.object.quaternion)) > this.EPS) {\n        this.dispatchEvent(this.changeEvent);\n        this.lastPosition.copy(this.object.position);\n        this.lastQuaternion.copy(this.object.quaternion);\n        this.zoomChanged = false;\n        return true;\n      }\n\n      return false;\n    });\n\n    __publicField(this, \"getAutoRotationAngle\", () => 2 * Math.PI / 60 / 60 * this.autoRotateSpeed);\n\n    __publicField(this, \"getZoomScale\", () => Math.pow(0.95, this.zoomSpeed));\n\n    __publicField(this, \"rotateLeft\", angle => {\n      this.sphericalDelta.theta -= angle;\n    });\n\n    __publicField(this, \"rotateUp\", angle => {\n      this.sphericalDelta.phi -= angle;\n    });\n\n    __publicField(this, \"panLeft\", (distance, objectMatrix) => {\n      this.v.setFromMatrixColumn(objectMatrix, 0);\n      this.v.multiplyScalar(-distance);\n      this.panOffset.add(this.v);\n    });\n\n    __publicField(this, \"panUp\", (distance, objectMatrix) => {\n      if (this.screenSpacePanning === true) {\n        this.v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        this.v.setFromMatrixColumn(objectMatrix, 0);\n        this.v.crossVectors(this.object.up, this.v);\n      }\n\n      this.v.multiplyScalar(distance);\n      this.panOffset.add(this.v);\n    }); // deltaX and deltaY are in pixels; right and down are positive\n\n\n    __publicField(this, \"pan\", (deltaX, deltaY) => {\n      const element = this.domElement;\n\n      if (this.object instanceof PerspectiveCamera) {\n        const position = this.object.position;\n        this.offset.copy(position).sub(this.target);\n        let targetDistance = this.offset.length();\n        targetDistance *= Math.tan(this.object.fov / 2 * Math.PI / 180);\n        this.panLeft(2 * deltaX * targetDistance / element.clientHeight, this.object.matrix);\n        this.panUp(2 * deltaY * targetDistance / element.clientHeight, this.object.matrix);\n      } else if (this.object.isOrthographicCamera) {\n        this.panLeft(deltaX * (this.object.right - this.object.left) / this.object.zoom / element.clientWidth, this.object.matrix);\n        this.panUp(deltaY * (this.object.top - this.object.bottom) / this.object.zoom / element.clientHeight, this.object.matrix);\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - pan disabled.\");\n        this.enablePan = false;\n      }\n    });\n\n    __publicField(this, \"dollyIn\", dollyScale => {\n      if (this.object instanceof PerspectiveCamera) {\n        this.scale /= dollyScale;\n      } else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n        this.object.updateProjectionMatrix();\n        this.zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        this.enableZoom = false;\n      }\n    });\n\n    __publicField(this, \"dollyOut\", dollyScale => {\n      if (this.object instanceof PerspectiveCamera) {\n        this.scale *= dollyScale;\n      } else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n        this.object.updateProjectionMatrix();\n        this.zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        this.enableZoom = false;\n      }\n    }); // event callbacks - update the object state\n\n\n    __publicField(this, \"handleMouseDownRotate\", event => {\n      this.rotateStart.set(event.clientX, event.clientY);\n    }); // TODO: confirm if worthwhile to return the Vector2 instead of void\n\n\n    __publicField(this, \"handleMouseDownDolly\", event => {\n      this.dollyStart.set(event.clientX, event.clientY);\n    });\n\n    __publicField(this, \"handleMouseDownPan\", event => {\n      this.panStart.set(event.clientX, event.clientY);\n    });\n\n    __publicField(this, \"handleMouseMoveRotate\", event => {\n      this.rotateEnd.set(event.clientX, event.clientY);\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\n      const element = this.domElement;\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\n      this.rotateStart.copy(this.rotateEnd);\n      this.update();\n    });\n\n    __publicField(this, \"handleMouseMoveDolly\", event => {\n      this.dollyEnd.set(event.clientX, event.clientY);\n      this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart);\n\n      if (this.dollyDelta.y > 0) {\n        this.dollyIn(this.getZoomScale());\n      } else if (this.dollyDelta.y < 0) {\n        this.dollyOut(this.getZoomScale());\n      }\n\n      this.dollyStart.copy(this.dollyEnd);\n      this.update();\n    });\n\n    __publicField(this, \"handleMouseMovePan\", event => {\n      this.panEnd.set(event.clientX, event.clientY);\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\n      this.pan(this.panDelta.x, this.panDelta.y);\n      this.panStart.copy(this.panEnd);\n      this.update();\n    });\n\n    __publicField(this, \"handleMouseWheel\", event => {\n      if (event.deltaY < 0) {\n        this.dollyOut(this.getZoomScale());\n      } else if (event.deltaY > 0) {\n        this.dollyIn(this.getZoomScale());\n      }\n\n      this.update();\n    });\n\n    __publicField(this, \"handleKeyDown\", event => {\n      let needsUpdate = false;\n\n      switch (event.code) {\n        case this.keys.UP:\n          this.pan(0, this.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case this.keys.BOTTOM:\n          this.pan(0, -this.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case this.keys.LEFT:\n          this.pan(this.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n\n        case this.keys.RIGHT:\n          this.pan(-this.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n\n      if (needsUpdate) {\n        event.preventDefault();\n        this.update();\n      }\n    });\n\n    __publicField(this, \"handleTouchStartRotate\", event => {\n      if (event.touches.length == 1) {\n        this.rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.rotateStart.set(x, y);\n      }\n    });\n\n    __publicField(this, \"handleTouchStartPan\", event => {\n      if (event.touches.length == 1) {\n        this.panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.panStart.set(x, y);\n      }\n    });\n\n    __publicField(this, \"handleTouchStartDolly\", event => {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      this.dollyStart.set(0, distance);\n    });\n\n    __publicField(this, \"handleTouchStartDollyPan\", event => {\n      if (this.enableZoom) this.handleTouchStartDolly(event);\n      if (this.enablePan) this.handleTouchStartPan(event);\n    });\n\n    __publicField(this, \"handleTouchStartDollyRotate\", event => {\n      if (this.enableZoom) this.handleTouchStartDolly(event);\n      if (this.enableRotate) this.handleTouchStartRotate(event);\n    });\n\n    __publicField(this, \"handleTouchMoveRotate\", event => {\n      if (event.touches.length == 1) {\n        this.rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.rotateEnd.set(x, y);\n      }\n\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\n      const element = this.domElement;\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\n      this.rotateStart.copy(this.rotateEnd);\n    });\n\n    __publicField(this, \"handleTouchMovePan\", event => {\n      if (event.touches.length == 1) {\n        this.panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.panEnd.set(x, y);\n      }\n\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\n      this.pan(this.panDelta.x, this.panDelta.y);\n      this.panStart.copy(this.panEnd);\n    });\n\n    __publicField(this, \"handleTouchMoveDolly\", event => {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      this.dollyEnd.set(0, distance);\n      this.dollyDelta.set(0, Math.pow(this.dollyEnd.y / this.dollyStart.y, this.zoomSpeed));\n      this.dollyIn(this.dollyDelta.y);\n      this.dollyStart.copy(this.dollyEnd);\n    });\n\n    __publicField(this, \"handleTouchMoveDollyPan\", event => {\n      if (this.enableZoom) this.handleTouchMoveDolly(event);\n      if (this.enablePan) this.handleTouchMovePan(event);\n    });\n\n    __publicField(this, \"handleTouchMoveDollyRotate\", event => {\n      if (this.enableZoom) this.handleTouchMoveDolly(event);\n      if (this.enableRotate) this.handleTouchMoveRotate(event);\n    }); //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n\n    __publicField(this, \"onMouseDown\", event => {\n      if (this.enabled === false) return;\n      event.preventDefault();\n      this.domElement.focus ? this.domElement.focus() : window.focus();\n      let mouseAction;\n\n      switch (event.button) {\n        case 0:\n          mouseAction = this.mouseButtons.LEFT;\n          break;\n\n        case 1:\n          mouseAction = this.mouseButtons.MIDDLE;\n          break;\n\n        case 2:\n          mouseAction = this.mouseButtons.RIGHT;\n          break;\n\n        default:\n          mouseAction = -1;\n      }\n\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (this.enableZoom === false) return;\n          this.handleMouseDownDolly(event);\n          this.state = 1;\n          break;\n\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (this.enablePan === false) return;\n            this.handleMouseDownPan(event);\n            this.state = 2;\n          } else {\n            if (this.enableRotate === false) return;\n            this.handleMouseDownRotate(event);\n            this.state = 0;\n          }\n\n          break;\n\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (this.enableRotate === false) return;\n            this.handleMouseDownRotate(event);\n            this.state = 0;\n          } else {\n            if (this.enablePan === false) return;\n            this.handleMouseDownPan(event);\n            this.state = 2;\n          }\n\n          break;\n\n        default:\n          this.state = -1;\n      }\n\n      if (this.state !== -1) {\n        document.addEventListener(\"mousemove\", this.onMouseMove, false);\n        document.addEventListener(\"mouseup\", this.onMouseUp, false);\n        this.dispatchEvent(this.startEvent);\n      }\n    });\n\n    __publicField(this, \"onMouseMove\", event => {\n      if (this.enabled === false) return;\n      event.preventDefault();\n\n      switch (this.state) {\n        case 0:\n          if (this.enableRotate === false) return;\n          this.handleMouseMoveRotate(event);\n          break;\n\n        case 1:\n          if (this.enableZoom === false) return;\n          this.handleMouseMoveDolly(event);\n          break;\n\n        case 2:\n          if (this.enablePan === false) return;\n          this.handleMouseMovePan(event);\n          break;\n      }\n    });\n\n    __publicField(this, \"onMouseUp\", () => {\n      if (this.enabled === false) return;\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\n      this.dispatchEvent(this.endEvent);\n      this.state = -1;\n    });\n\n    __publicField(this, \"onMouseWheel\", event => {\n      if (this.enabled === false || this.enableZoom === false || this.state !== -1 && this.state !== 0) {\n        return;\n      }\n\n      event.preventDefault();\n      this.dispatchEvent(this.startEvent);\n      this.handleMouseWheel(event);\n      this.dispatchEvent(this.endEvent);\n    });\n\n    __publicField(this, \"onKeyDown\", event => {\n      if (this.enabled === false || this.enableKeys === false || this.enablePan === false) return;\n      this.handleKeyDown(event);\n    });\n\n    __publicField(this, \"onTouchStart\", event => {\n      if (this.enabled === false) return;\n      event.preventDefault();\n\n      switch (event.touches.length) {\n        case 1:\n          switch (this.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (this.enableRotate === false) return;\n              this.handleTouchStartRotate(event);\n              this.state = 3;\n              break;\n\n            case TOUCH.PAN:\n              if (this.enablePan === false) return;\n              this.handleTouchStartPan(event);\n              this.state = 4;\n              break;\n\n            default:\n              this.state = -1;\n          }\n\n          break;\n\n        case 2:\n          switch (this.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (this.enableZoom === false && this.enablePan === false) return;\n              this.handleTouchStartDollyPan(event);\n              this.state = 5;\n              break;\n\n            case TOUCH.DOLLY_ROTATE:\n              if (this.enableZoom === false && this.enableRotate === false) return;\n              this.handleTouchStartDollyRotate(event);\n              this.state = 6;\n              break;\n\n            default:\n              this.state = -1;\n          }\n\n          break;\n\n        default:\n          this.state = -1;\n      }\n\n      if (this.state !== -1) {\n        this.dispatchEvent(this.startEvent);\n      }\n    });\n\n    __publicField(this, \"onTouchMove\", event => {\n      if (this.enabled === false) return;\n      event.preventDefault();\n\n      switch (this.state) {\n        case 3:\n          if (this.enableRotate === false) return;\n          this.handleTouchMoveRotate(event);\n          this.update();\n          break;\n\n        case 4:\n          if (this.enablePan === false) return;\n          this.handleTouchMovePan(event);\n          this.update();\n          break;\n\n        case 5:\n          if (this.enableZoom === false && this.enablePan === false) return;\n          this.handleTouchMoveDollyPan(event);\n          this.update();\n          break;\n\n        case 6:\n          if (this.enableZoom === false && this.enableRotate === false) return;\n          this.handleTouchMoveDollyRotate(event);\n          this.update();\n          break;\n\n        default:\n          this.state = -1;\n      }\n    });\n\n    __publicField(this, \"onTouchEnd\", () => {\n      if (this.enabled === false) return;\n      this.dispatchEvent(this.endEvent);\n      this.state = -1;\n    });\n\n    __publicField(this, \"onContextMenu\", event => {\n      if (this.enabled === false) return;\n      event.preventDefault();\n    });\n\n    if (domElement === void 0) {\n      console.warn('THREE.CameraControls: The second parameter \"domElement\" is now mandatory.');\n    }\n\n    if (domElement instanceof Document) {\n      console.error('THREE.CameraControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n    }\n\n    this.object = object;\n    this.domElement = domElement;\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    };\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.quaternion0 = this.object.quaternion.clone();\n    this.zoom0 = this.object.zoom;\n    this.quat = new Quaternion().setFromUnitVectors(this.object.up, new Vector3(0, 1, 0));\n    this.quatInverse = this.quat.clone().invert();\n    this.lastPosition = new Vector3();\n    this.lastQuaternion = new Quaternion();\n    this.domElement.addEventListener(\"contextmenu\", this.onContextMenu, false);\n    this.domElement.addEventListener(\"mousedown\", this.onMouseDown, false);\n    this.domElement.addEventListener(\"wheel\", this.onMouseWheel, false);\n    this.domElement.addEventListener(\"touchstart\", this.onTouchStart, false);\n    this.domElement.addEventListener(\"touchend\", this.onTouchEnd, false);\n    this.domElement.addEventListener(\"touchmove\", this.onTouchMove, false);\n    this.domElement.addEventListener(\"keydown\", this.onKeyDown, false);\n\n    if (this.domElement.tabIndex === -1) {\n      this.domElement.tabIndex = 0;\n    }\n\n    this.object.lookAt(this.target);\n    this.update();\n    this.saveState();\n  }\n\n  handleMouseUp() {}\n\n  handleTouchEnd() {}\n\n}\n\nclass OrbitControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n\n    __publicField(this, \"mouseButtons\");\n\n    __publicField(this, \"touches\");\n\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      RIGHT: MOUSE.PAN\n    };\n    this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    };\n  }\n\n}\n\nclass MapControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n\n    __publicField(this, \"mouseButtons\");\n\n    __publicField(this, \"touches\");\n\n    this.mouseButtons = {\n      LEFT: MOUSE.PAN,\n      RIGHT: MOUSE.ROTATE\n    };\n    this.touches = {\n      ONE: TOUCH.PAN,\n      TWO: TOUCH.DOLLY_ROTATE\n    };\n  }\n\n}\n\nclass TrackballControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n\n    __publicField(this, \"trackball\");\n\n    __publicField(this, \"screenSpacePanning\");\n\n    __publicField(this, \"autoRotate\");\n\n    __publicField(this, \"mouseButtons\");\n\n    __publicField(this, \"touches\");\n\n    this.trackball = true;\n    this.screenSpacePanning = true;\n    this.autoRotate = false;\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      RIGHT: MOUSE.PAN\n    };\n    this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    };\n  }\n\n}\n\nexport { CameraControls, MapControlsExp, OrbitControlsExp, STATE, TrackballControlsExp };","map":{"version":3,"sources":["/Users/theodaguier/Repositories/E-Do-Studio/node_modules/three-stdlib/controls/experimental/CameraControls.js"],"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","EventDispatcher","Vector3","TOUCH","Spherical","Vector2","Quaternion","MOUSE","PerspectiveCamera","OrthographicCamera","STATE","STATE2","CameraControls","constructor","object","domElement","Infinity","Math","PI","LEFT","UP","RIGHT","BOTTOM","ONE","ROTATE","TWO","DOLLY_PAN","type","spherical","phi","theta","target0","copy","target","position0","position","quaternion0","quaternion","zoom0","zoom","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","document","onMouseMove","onMouseUp","onKeyDown","offset","sub","trackball","sphericalDelta","vec","set","applyQuaternion","factor","enableDamping","dampingFactor","q","setFromAxisAngle","premultiply","multiplyScalar","scale","clampLength","minDistance","maxDistance","quat","autoRotate","rotateLeft","getAutoRotationAngle","setFromVector3","max","minAzimuthAngle","min","maxAzimuthAngle","minPolarAngle","maxPolarAngle","makeSafe","radius","setFromSpherical","quatInverse","addScaledVector","panOffset","add","lookAt","zoomChanged","lastPosition","distanceToSquared","EPS","lastQuaternion","dot","autoRotateSpeed","pow","zoomSpeed","angle","distance","objectMatrix","v","setFromMatrixColumn","screenSpacePanning","crossVectors","up","deltaX","deltaY","element","targetDistance","length","tan","fov","panLeft","clientHeight","matrix","panUp","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","enablePan","dollyScale","minZoom","maxZoom","enableZoom","event","rotateStart","clientX","clientY","dollyStart","panStart","rotateEnd","rotateDelta","subVectors","rotateSpeed","x","rotateUp","y","dollyEnd","dollyDelta","dollyIn","getZoomScale","dollyOut","panEnd","panDelta","panSpeed","pan","needsUpdate","code","keys","keyPanSpeed","preventDefault","touches","pageX","pageY","dx","dy","sqrt","handleTouchStartDolly","handleTouchStartPan","enableRotate","handleTouchStartRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchMoveRotate","enabled","focus","window","mouseAction","button","mouseButtons","MIDDLE","DOLLY","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","handleMouseDownPan","handleMouseDownRotate","PAN","addEventListener","startEvent","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","endEvent","handleMouseWheel","enableKeys","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","Document","error","clone","setFromUnitVectors","invert","tabIndex","saveState","handleMouseUp","handleTouchEnd","OrbitControlsExp","MapControlsExp","TrackballControlsExp"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { EventDispatcher, Vector3, TOUCH, Spherical, Vector2, Quaternion, MOUSE, PerspectiveCamera, OrthographicCamera } from \"three\";\nvar STATE = /* @__PURE__ */ ((STATE2) => {\n  STATE2[STATE2[\"NONE\"] = -1] = \"NONE\";\n  STATE2[STATE2[\"ROTATE\"] = 0] = \"ROTATE\";\n  STATE2[STATE2[\"DOLLY\"] = 1] = \"DOLLY\";\n  STATE2[STATE2[\"PAN\"] = 2] = \"PAN\";\n  STATE2[STATE2[\"TOUCH_ROTATE\"] = 3] = \"TOUCH_ROTATE\";\n  STATE2[STATE2[\"TOUCH_PAN\"] = 4] = \"TOUCH_PAN\";\n  STATE2[STATE2[\"TOUCH_DOLLY_PAN\"] = 5] = \"TOUCH_DOLLY_PAN\";\n  STATE2[STATE2[\"TOUCH_DOLLY_ROTATE\"] = 6] = \"TOUCH_DOLLY_ROTATE\";\n  return STATE2;\n})(STATE || {});\nclass CameraControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n    __publicField(this, \"object\");\n    __publicField(this, \"domElement\");\n    /** Set to false to disable this control */\n    __publicField(this, \"enabled\", true);\n    /** \"target\" sets the location of focus, where the object orbits around */\n    __publicField(this, \"target\", new Vector3());\n    /** Set to true to enable trackball behavior */\n    __publicField(this, \"trackball\", false);\n    /** How far you can dolly in ( PerspectiveCamera only ) */\n    __publicField(this, \"minDistance\", 0);\n    /** How far you can dolly out ( PerspectiveCamera only ) */\n    __publicField(this, \"maxDistance\", Infinity);\n    // How far you can zoom in and out ( OrthographicCamera only )\n    __publicField(this, \"minZoom\", 0);\n    __publicField(this, \"maxZoom\", Infinity);\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    __publicField(this, \"minPolarAngle\", 0);\n    __publicField(this, \"maxPolarAngle\", Math.PI);\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    __publicField(this, \"minAzimuthAngle\", -Infinity);\n    // radians\n    __publicField(this, \"maxAzimuthAngle\", Infinity);\n    // radians\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    __publicField(this, \"enableDamping\", false);\n    __publicField(this, \"dampingFactor\", 0.05);\n    /**\n     * This option enables dollying in and out; property named as \"zoom\" for backwards compatibility\n     * Set to false to disable zooming\n     */\n    __publicField(this, \"enableZoom\", true);\n    __publicField(this, \"zoomSpeed\", 1);\n    /** Set to false to disable rotating */\n    __publicField(this, \"enableRotate\", true);\n    __publicField(this, \"rotateSpeed\", 1);\n    /** Set to false to disable panning */\n    __publicField(this, \"enablePan\", true);\n    __publicField(this, \"panSpeed\", 1);\n    /** if true, pan in screen-space */\n    __publicField(this, \"screenSpacePanning\", false);\n    /** pixels moved per arrow key push */\n    __publicField(this, \"keyPanSpeed\", 7);\n    /**\n     * Set to true to automatically rotate around the target\n     * If auto-rotate is enabled, you must call controls.update() in your animation loop\n     * auto-rotate is not supported for trackball behavior\n     */\n    __publicField(this, \"autoRotate\", false);\n    __publicField(this, \"autoRotateSpeed\", 2);\n    // 30 seconds per round when fps is 60\n    /** Set to false to disable use of the keys */\n    __publicField(this, \"enableKeys\", true);\n    /** The four arrow keys */\n    __publicField(this, \"keys\", { LEFT: \"ArrowLeft\", UP: \"ArrowUp\", RIGHT: \"ArrowRight\", BOTTOM: \"ArrowDown\" });\n    __publicField(this, \"mouseButtons\");\n    /** Touch fingers */\n    __publicField(this, \"touches\", { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN });\n    // for reset\n    __publicField(this, \"target0\");\n    __publicField(this, \"position0\");\n    __publicField(this, \"quaternion0\");\n    __publicField(this, \"zoom0\");\n    // current position in spherical coordinates\n    __publicField(this, \"spherical\", new Spherical());\n    __publicField(this, \"sphericalDelta\", new Spherical());\n    __publicField(this, \"changeEvent\", { type: \"change\" });\n    __publicField(this, \"startEvent\", { type: \"start\" });\n    __publicField(this, \"endEvent\", { type: \"end\" });\n    __publicField(this, \"state\", -1);\n    __publicField(this, \"EPS\", 1e-6);\n    __publicField(this, \"scale\", 1);\n    __publicField(this, \"panOffset\", new Vector3());\n    __publicField(this, \"zoomChanged\", false);\n    __publicField(this, \"rotateStart\", new Vector2());\n    __publicField(this, \"rotateEnd\", new Vector2());\n    __publicField(this, \"rotateDelta\", new Vector2());\n    __publicField(this, \"panStart\", new Vector2());\n    __publicField(this, \"panEnd\", new Vector2());\n    __publicField(this, \"panDelta\", new Vector2());\n    __publicField(this, \"dollyStart\", new Vector2());\n    __publicField(this, \"dollyEnd\", new Vector2());\n    __publicField(this, \"dollyDelta\", new Vector2());\n    __publicField(this, \"offset\", new Vector3());\n    __publicField(this, \"lastPosition\", new Vector3());\n    __publicField(this, \"lastQuaternion\", new Quaternion());\n    __publicField(this, \"q\", new Quaternion());\n    __publicField(this, \"v\", new Vector3());\n    __publicField(this, \"vec\", new Vector3());\n    __publicField(this, \"quat\");\n    __publicField(this, \"quatInverse\");\n    __publicField(this, \"getPolarAngle\", () => this.spherical.phi);\n    __publicField(this, \"getAzimuthalAngle\", () => this.spherical.theta);\n    __publicField(this, \"saveState\", () => {\n      this.target0.copy(this.target);\n      this.position0.copy(this.object.position);\n      this.quaternion0.copy(this.object.quaternion);\n      this.zoom0 = this.object.zoom;\n    });\n    __publicField(this, \"reset\", () => {\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.quaternion.copy(this.quaternion0);\n      this.object.zoom = this.zoom0;\n      this.object.updateProjectionMatrix();\n      this.dispatchEvent(this.changeEvent);\n      this.update();\n      this.state = -1;\n    });\n    __publicField(this, \"dispose\", () => {\n      this.domElement.removeEventListener(\"contextmenu\", this.onContextMenu, false);\n      this.domElement.removeEventListener(\"mousedown\", this.onMouseDown, false);\n      this.domElement.removeEventListener(\"wheel\", this.onMouseWheel, false);\n      this.domElement.removeEventListener(\"touchstart\", this.onTouchStart, false);\n      this.domElement.removeEventListener(\"touchend\", this.onTouchEnd, false);\n      this.domElement.removeEventListener(\"touchmove\", this.onTouchMove, false);\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\n      this.domElement.removeEventListener(\"keydown\", this.onKeyDown, false);\n    });\n    __publicField(this, \"update\", () => {\n      const position = this.object.position;\n      this.offset.copy(position).sub(this.target);\n      if (this.trackball) {\n        if (this.sphericalDelta.theta) {\n          this.vec.set(0, 1, 0).applyQuaternion(this.object.quaternion);\n          const factor = this.enableDamping ? this.dampingFactor : 1;\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.theta * factor);\n          this.object.quaternion.premultiply(this.q);\n          this.offset.applyQuaternion(this.q);\n        }\n        if (this.sphericalDelta.phi) {\n          this.vec.set(1, 0, 0).applyQuaternion(this.object.quaternion);\n          const factor = this.enableDamping ? this.dampingFactor : 1;\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.phi * factor);\n          this.object.quaternion.premultiply(this.q);\n          this.offset.applyQuaternion(this.q);\n        }\n        this.offset.multiplyScalar(this.scale);\n        this.offset.clampLength(this.minDistance, this.maxDistance);\n      } else {\n        this.offset.applyQuaternion(this.quat);\n        if (this.autoRotate && this.state === -1) {\n          this.rotateLeft(this.getAutoRotationAngle());\n        }\n        this.spherical.setFromVector3(this.offset);\n        if (this.enableDamping) {\n          this.spherical.theta += this.sphericalDelta.theta * this.dampingFactor;\n          this.spherical.phi += this.sphericalDelta.phi * this.dampingFactor;\n        } else {\n          this.spherical.theta += this.sphericalDelta.theta;\n          this.spherical.phi += this.sphericalDelta.phi;\n        }\n        this.spherical.theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, this.spherical.theta));\n        this.spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this.spherical.phi));\n        this.spherical.makeSafe();\n        this.spherical.radius *= this.scale;\n        this.spherical.radius = Math.max(this.minDistance, Math.min(this.maxDistance, this.spherical.radius));\n        this.offset.setFromSpherical(this.spherical);\n        this.offset.applyQuaternion(this.quatInverse);\n      }\n      if (this.enableDamping === true) {\n        this.target.addScaledVector(this.panOffset, this.dampingFactor);\n      } else {\n        this.target.add(this.panOffset);\n      }\n      position.copy(this.target).add(this.offset);\n      if (this.trackball === false) {\n        this.object.lookAt(this.target);\n      }\n      if (this.enableDamping === true) {\n        this.sphericalDelta.theta *= 1 - this.dampingFactor;\n        this.sphericalDelta.phi *= 1 - this.dampingFactor;\n        this.panOffset.multiplyScalar(1 - this.dampingFactor);\n      } else {\n        this.sphericalDelta.set(0, 0, 0);\n        this.panOffset.set(0, 0, 0);\n      }\n      this.scale = 1;\n      if (this.zoomChanged || this.lastPosition.distanceToSquared(this.object.position) > this.EPS || 8 * (1 - this.lastQuaternion.dot(this.object.quaternion)) > this.EPS) {\n        this.dispatchEvent(this.changeEvent);\n        this.lastPosition.copy(this.object.position);\n        this.lastQuaternion.copy(this.object.quaternion);\n        this.zoomChanged = false;\n        return true;\n      }\n      return false;\n    });\n    __publicField(this, \"getAutoRotationAngle\", () => 2 * Math.PI / 60 / 60 * this.autoRotateSpeed);\n    __publicField(this, \"getZoomScale\", () => Math.pow(0.95, this.zoomSpeed));\n    __publicField(this, \"rotateLeft\", (angle) => {\n      this.sphericalDelta.theta -= angle;\n    });\n    __publicField(this, \"rotateUp\", (angle) => {\n      this.sphericalDelta.phi -= angle;\n    });\n    __publicField(this, \"panLeft\", (distance, objectMatrix) => {\n      this.v.setFromMatrixColumn(objectMatrix, 0);\n      this.v.multiplyScalar(-distance);\n      this.panOffset.add(this.v);\n    });\n    __publicField(this, \"panUp\", (distance, objectMatrix) => {\n      if (this.screenSpacePanning === true) {\n        this.v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        this.v.setFromMatrixColumn(objectMatrix, 0);\n        this.v.crossVectors(this.object.up, this.v);\n      }\n      this.v.multiplyScalar(distance);\n      this.panOffset.add(this.v);\n    });\n    // deltaX and deltaY are in pixels; right and down are positive\n    __publicField(this, \"pan\", (deltaX, deltaY) => {\n      const element = this.domElement;\n      if (this.object instanceof PerspectiveCamera) {\n        const position = this.object.position;\n        this.offset.copy(position).sub(this.target);\n        let targetDistance = this.offset.length();\n        targetDistance *= Math.tan(this.object.fov / 2 * Math.PI / 180);\n        this.panLeft(2 * deltaX * targetDistance / element.clientHeight, this.object.matrix);\n        this.panUp(2 * deltaY * targetDistance / element.clientHeight, this.object.matrix);\n      } else if (this.object.isOrthographicCamera) {\n        this.panLeft(\n          deltaX * (this.object.right - this.object.left) / this.object.zoom / element.clientWidth,\n          this.object.matrix\n        );\n        this.panUp(\n          deltaY * (this.object.top - this.object.bottom) / this.object.zoom / element.clientHeight,\n          this.object.matrix\n        );\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - pan disabled.\");\n        this.enablePan = false;\n      }\n    });\n    __publicField(this, \"dollyIn\", (dollyScale) => {\n      if (this.object instanceof PerspectiveCamera) {\n        this.scale /= dollyScale;\n      } else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n        this.object.updateProjectionMatrix();\n        this.zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        this.enableZoom = false;\n      }\n    });\n    __publicField(this, \"dollyOut\", (dollyScale) => {\n      if (this.object instanceof PerspectiveCamera) {\n        this.scale *= dollyScale;\n      } else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n        this.object.updateProjectionMatrix();\n        this.zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        this.enableZoom = false;\n      }\n    });\n    // event callbacks - update the object state\n    __publicField(this, \"handleMouseDownRotate\", (event) => {\n      this.rotateStart.set(event.clientX, event.clientY);\n    });\n    // TODO: confirm if worthwhile to return the Vector2 instead of void\n    __publicField(this, \"handleMouseDownDolly\", (event) => {\n      this.dollyStart.set(event.clientX, event.clientY);\n    });\n    __publicField(this, \"handleMouseDownPan\", (event) => {\n      this.panStart.set(event.clientX, event.clientY);\n    });\n    __publicField(this, \"handleMouseMoveRotate\", (event) => {\n      this.rotateEnd.set(event.clientX, event.clientY);\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\n      const element = this.domElement;\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\n      this.rotateStart.copy(this.rotateEnd);\n      this.update();\n    });\n    __publicField(this, \"handleMouseMoveDolly\", (event) => {\n      this.dollyEnd.set(event.clientX, event.clientY);\n      this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart);\n      if (this.dollyDelta.y > 0) {\n        this.dollyIn(this.getZoomScale());\n      } else if (this.dollyDelta.y < 0) {\n        this.dollyOut(this.getZoomScale());\n      }\n      this.dollyStart.copy(this.dollyEnd);\n      this.update();\n    });\n    __publicField(this, \"handleMouseMovePan\", (event) => {\n      this.panEnd.set(event.clientX, event.clientY);\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\n      this.pan(this.panDelta.x, this.panDelta.y);\n      this.panStart.copy(this.panEnd);\n      this.update();\n    });\n    __publicField(this, \"handleMouseWheel\", (event) => {\n      if (event.deltaY < 0) {\n        this.dollyOut(this.getZoomScale());\n      } else if (event.deltaY > 0) {\n        this.dollyIn(this.getZoomScale());\n      }\n      this.update();\n    });\n    __publicField(this, \"handleKeyDown\", (event) => {\n      let needsUpdate = false;\n      switch (event.code) {\n        case this.keys.UP:\n          this.pan(0, this.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case this.keys.BOTTOM:\n          this.pan(0, -this.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case this.keys.LEFT:\n          this.pan(this.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n        case this.keys.RIGHT:\n          this.pan(-this.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n      if (needsUpdate) {\n        event.preventDefault();\n        this.update();\n      }\n    });\n    __publicField(this, \"handleTouchStartRotate\", (event) => {\n      if (event.touches.length == 1) {\n        this.rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.rotateStart.set(x, y);\n      }\n    });\n    __publicField(this, \"handleTouchStartPan\", (event) => {\n      if (event.touches.length == 1) {\n        this.panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.panStart.set(x, y);\n      }\n    });\n    __publicField(this, \"handleTouchStartDolly\", (event) => {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      this.dollyStart.set(0, distance);\n    });\n    __publicField(this, \"handleTouchStartDollyPan\", (event) => {\n      if (this.enableZoom)\n        this.handleTouchStartDolly(event);\n      if (this.enablePan)\n        this.handleTouchStartPan(event);\n    });\n    __publicField(this, \"handleTouchStartDollyRotate\", (event) => {\n      if (this.enableZoom)\n        this.handleTouchStartDolly(event);\n      if (this.enableRotate)\n        this.handleTouchStartRotate(event);\n    });\n    __publicField(this, \"handleTouchMoveRotate\", (event) => {\n      if (event.touches.length == 1) {\n        this.rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.rotateEnd.set(x, y);\n      }\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\n      const element = this.domElement;\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\n      this.rotateStart.copy(this.rotateEnd);\n    });\n    __publicField(this, \"handleTouchMovePan\", (event) => {\n      if (event.touches.length == 1) {\n        this.panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        this.panEnd.set(x, y);\n      }\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\n      this.pan(this.panDelta.x, this.panDelta.y);\n      this.panStart.copy(this.panEnd);\n    });\n    __publicField(this, \"handleTouchMoveDolly\", (event) => {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      this.dollyEnd.set(0, distance);\n      this.dollyDelta.set(0, Math.pow(this.dollyEnd.y / this.dollyStart.y, this.zoomSpeed));\n      this.dollyIn(this.dollyDelta.y);\n      this.dollyStart.copy(this.dollyEnd);\n    });\n    __publicField(this, \"handleTouchMoveDollyPan\", (event) => {\n      if (this.enableZoom)\n        this.handleTouchMoveDolly(event);\n      if (this.enablePan)\n        this.handleTouchMovePan(event);\n    });\n    __publicField(this, \"handleTouchMoveDollyRotate\", (event) => {\n      if (this.enableZoom)\n        this.handleTouchMoveDolly(event);\n      if (this.enableRotate)\n        this.handleTouchMoveRotate(event);\n    });\n    //\n    // event handlers - FSM: listen for events and reset state\n    //\n    __publicField(this, \"onMouseDown\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      this.domElement.focus ? this.domElement.focus() : window.focus();\n      let mouseAction;\n      switch (event.button) {\n        case 0:\n          mouseAction = this.mouseButtons.LEFT;\n          break;\n        case 1:\n          mouseAction = this.mouseButtons.MIDDLE;\n          break;\n        case 2:\n          mouseAction = this.mouseButtons.RIGHT;\n          break;\n        default:\n          mouseAction = -1;\n      }\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (this.enableZoom === false)\n            return;\n          this.handleMouseDownDolly(event);\n          this.state = 1;\n          break;\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (this.enablePan === false)\n              return;\n            this.handleMouseDownPan(event);\n            this.state = 2;\n          } else {\n            if (this.enableRotate === false)\n              return;\n            this.handleMouseDownRotate(event);\n            this.state = 0;\n          }\n          break;\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (this.enableRotate === false)\n              return;\n            this.handleMouseDownRotate(event);\n            this.state = 0;\n          } else {\n            if (this.enablePan === false)\n              return;\n            this.handleMouseDownPan(event);\n            this.state = 2;\n          }\n          break;\n        default:\n          this.state = -1;\n      }\n      if (this.state !== -1) {\n        document.addEventListener(\"mousemove\", this.onMouseMove, false);\n        document.addEventListener(\"mouseup\", this.onMouseUp, false);\n        this.dispatchEvent(this.startEvent);\n      }\n    });\n    __publicField(this, \"onMouseMove\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      switch (this.state) {\n        case 0:\n          if (this.enableRotate === false)\n            return;\n          this.handleMouseMoveRotate(event);\n          break;\n        case 1:\n          if (this.enableZoom === false)\n            return;\n          this.handleMouseMoveDolly(event);\n          break;\n        case 2:\n          if (this.enablePan === false)\n            return;\n          this.handleMouseMovePan(event);\n          break;\n      }\n    });\n    __publicField(this, \"onMouseUp\", () => {\n      if (this.enabled === false)\n        return;\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\n      this.dispatchEvent(this.endEvent);\n      this.state = -1;\n    });\n    __publicField(this, \"onMouseWheel\", (event) => {\n      if (this.enabled === false || this.enableZoom === false || this.state !== -1 && this.state !== 0) {\n        return;\n      }\n      event.preventDefault();\n      this.dispatchEvent(this.startEvent);\n      this.handleMouseWheel(event);\n      this.dispatchEvent(this.endEvent);\n    });\n    __publicField(this, \"onKeyDown\", (event) => {\n      if (this.enabled === false || this.enableKeys === false || this.enablePan === false)\n        return;\n      this.handleKeyDown(event);\n    });\n    __publicField(this, \"onTouchStart\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      switch (event.touches.length) {\n        case 1:\n          switch (this.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (this.enableRotate === false)\n                return;\n              this.handleTouchStartRotate(event);\n              this.state = 3;\n              break;\n            case TOUCH.PAN:\n              if (this.enablePan === false)\n                return;\n              this.handleTouchStartPan(event);\n              this.state = 4;\n              break;\n            default:\n              this.state = -1;\n          }\n          break;\n        case 2:\n          switch (this.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (this.enableZoom === false && this.enablePan === false)\n                return;\n              this.handleTouchStartDollyPan(event);\n              this.state = 5;\n              break;\n            case TOUCH.DOLLY_ROTATE:\n              if (this.enableZoom === false && this.enableRotate === false)\n                return;\n              this.handleTouchStartDollyRotate(event);\n              this.state = 6;\n              break;\n            default:\n              this.state = -1;\n          }\n          break;\n        default:\n          this.state = -1;\n      }\n      if (this.state !== -1) {\n        this.dispatchEvent(this.startEvent);\n      }\n    });\n    __publicField(this, \"onTouchMove\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      switch (this.state) {\n        case 3:\n          if (this.enableRotate === false)\n            return;\n          this.handleTouchMoveRotate(event);\n          this.update();\n          break;\n        case 4:\n          if (this.enablePan === false)\n            return;\n          this.handleTouchMovePan(event);\n          this.update();\n          break;\n        case 5:\n          if (this.enableZoom === false && this.enablePan === false)\n            return;\n          this.handleTouchMoveDollyPan(event);\n          this.update();\n          break;\n        case 6:\n          if (this.enableZoom === false && this.enableRotate === false)\n            return;\n          this.handleTouchMoveDollyRotate(event);\n          this.update();\n          break;\n        default:\n          this.state = -1;\n      }\n    });\n    __publicField(this, \"onTouchEnd\", () => {\n      if (this.enabled === false)\n        return;\n      this.dispatchEvent(this.endEvent);\n      this.state = -1;\n    });\n    __publicField(this, \"onContextMenu\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n    });\n    if (domElement === void 0) {\n      console.warn('THREE.CameraControls: The second parameter \"domElement\" is now mandatory.');\n    }\n    if (domElement instanceof Document) {\n      console.error(\n        'THREE.CameraControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n      );\n    }\n    this.object = object;\n    this.domElement = domElement;\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    };\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.quaternion0 = this.object.quaternion.clone();\n    this.zoom0 = this.object.zoom;\n    this.quat = new Quaternion().setFromUnitVectors(this.object.up, new Vector3(0, 1, 0));\n    this.quatInverse = this.quat.clone().invert();\n    this.lastPosition = new Vector3();\n    this.lastQuaternion = new Quaternion();\n    this.domElement.addEventListener(\"contextmenu\", this.onContextMenu, false);\n    this.domElement.addEventListener(\"mousedown\", this.onMouseDown, false);\n    this.domElement.addEventListener(\"wheel\", this.onMouseWheel, false);\n    this.domElement.addEventListener(\"touchstart\", this.onTouchStart, false);\n    this.domElement.addEventListener(\"touchend\", this.onTouchEnd, false);\n    this.domElement.addEventListener(\"touchmove\", this.onTouchMove, false);\n    this.domElement.addEventListener(\"keydown\", this.onKeyDown, false);\n    if (this.domElement.tabIndex === -1) {\n      this.domElement.tabIndex = 0;\n    }\n    this.object.lookAt(this.target);\n    this.update();\n    this.saveState();\n  }\n  handleMouseUp() {\n  }\n  handleTouchEnd() {\n  }\n}\nclass OrbitControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n    __publicField(this, \"mouseButtons\");\n    __publicField(this, \"touches\");\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      RIGHT: MOUSE.PAN\n    };\n    this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    };\n  }\n}\nclass MapControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n    __publicField(this, \"mouseButtons\");\n    __publicField(this, \"touches\");\n    this.mouseButtons = {\n      LEFT: MOUSE.PAN,\n      RIGHT: MOUSE.ROTATE\n    };\n    this.touches = {\n      ONE: TOUCH.PAN,\n      TWO: TOUCH.DOLLY_ROTATE\n    };\n  }\n}\nclass TrackballControlsExp extends CameraControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n    __publicField(this, \"trackball\");\n    __publicField(this, \"screenSpacePanning\");\n    __publicField(this, \"autoRotate\");\n    __publicField(this, \"mouseButtons\");\n    __publicField(this, \"touches\");\n    this.trackball = true;\n    this.screenSpacePanning = true;\n    this.autoRotate = false;\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      RIGHT: MOUSE.PAN\n    };\n    this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    };\n  }\n}\nexport {\n  CameraControls,\n  MapControlsExp,\n  OrbitControlsExp,\n  STATE,\n  TrackballControlsExp\n};\n"]},"metadata":{},"sourceType":"module"}