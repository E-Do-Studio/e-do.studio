{"ast":null,"code":"import { DataTextureLoader, HalfFloatType, CubeTexture, RGBAFormat, LinearFilter, DataUtils } from \"three\";\nlet UPNG;\n\nfunction init() {\n  if (UPNG) return UPNG;\n  UPNG = {};\n\n  UPNG.toRGBA8 = function (out) {\n    var w = out.width,\n        h = out.height;\n    if (out.tabs.acTL == null) return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n    var frms = [];\n    if (out.frames[0].data == null) out.frames[0].data = out.data;\n    var len = w * h * 4,\n        img = new Uint8Array(len),\n        empty = new Uint8Array(len),\n        prev = new Uint8Array(len);\n\n    for (var i = 0; i < out.frames.length; i++) {\n      var frm = out.frames[i];\n      var fx = frm.rect.x,\n          fy = frm.rect.y,\n          fw = frm.rect.width,\n          fh = frm.rect.height;\n      var fdata = UPNG.toRGBA8.decodeImage(frm.data, fw, fh, out);\n      if (i != 0) for (var j = 0; j < len; j++) prev[j] = img[j];\n      if (frm.blend == 0) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);else if (frm.blend == 1) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n      frms.push(img.buffer.slice(0));\n      if (frm.dispose == 1) UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);else if (frm.dispose == 2) for (var j = 0; j < len; j++) img[j] = prev[j];\n    }\n\n    return frms;\n  };\n\n  UPNG.toRGBA8.decodeImage = function (data, w, h, out) {\n    var area = w * h,\n        bpp = UPNG.decode._getBPP(out);\n\n    var bpl = Math.ceil(w * bpp / 8);\n    var bf = new Uint8Array(area * 4),\n        bf32 = new Uint32Array(bf.buffer);\n    var ctype = out.ctype,\n        depth = out.depth;\n    var rs = UPNG._bin.readUshort;\n\n    if (ctype == 6) {\n      var qarea = area << 2;\n\n      if (depth == 8) {\n        for (var i = 0; i < qarea; i += 4) {\n          bf[i] = data[i];\n          bf[i + 1] = data[i + 1];\n          bf[i + 2] = data[i + 2];\n          bf[i + 3] = data[i + 3];\n        }\n      }\n\n      if (depth == 16) {\n        for (var i = 0; i < qarea; i++) {\n          bf[i] = data[i << 1];\n        }\n      }\n    } else if (ctype == 2) {\n      var ts = out.tabs[\"tRNS\"];\n\n      if (ts == null) {\n        if (depth == 8) {\n          for (var i = 0; i < area; i++) {\n            var ti = i * 3;\n            bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n          }\n        }\n\n        if (depth == 16) {\n          for (var i = 0; i < area; i++) {\n            var ti = i * 6;\n            bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n          }\n        }\n      } else {\n        var tr = ts[0],\n            tg = ts[1],\n            tb = ts[2];\n\n        if (depth == 8) {\n          for (var i = 0; i < area; i++) {\n            var qi = i << 2,\n                ti = i * 3;\n            bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n            if (data[ti] == tr && data[ti + 1] == tg && data[ti + 2] == tb) bf[qi + 3] = 0;\n          }\n        }\n\n        if (depth == 16) {\n          for (var i = 0; i < area; i++) {\n            var qi = i << 2,\n                ti = i * 6;\n            bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n            if (rs(data, ti) == tr && rs(data, ti + 2) == tg && rs(data, ti + 4) == tb) bf[qi + 3] = 0;\n          }\n        }\n      }\n    } else if (ctype == 3) {\n      var p = out.tabs[\"PLTE\"],\n          ap = out.tabs[\"tRNS\"],\n          tl = ap ? ap.length : 0;\n\n      if (depth == 1) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n              t0 = y * w;\n\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n                j = data[s0 + (i >> 3)] >> 7 - ((i & 7) << 0) & 1,\n                cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n\n      if (depth == 2) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n              t0 = y * w;\n\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n                j = data[s0 + (i >> 2)] >> 6 - ((i & 3) << 1) & 3,\n                cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n\n      if (depth == 4) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n              t0 = y * w;\n\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n                j = data[s0 + (i >> 1)] >> 4 - ((i & 1) << 2) & 15,\n                cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n\n      if (depth == 8) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n              j = data[i],\n              cj = 3 * j;\n          bf[qi] = p[cj];\n          bf[qi + 1] = p[cj + 1];\n          bf[qi + 2] = p[cj + 2];\n          bf[qi + 3] = j < tl ? ap[j] : 255;\n        }\n      }\n    } else if (ctype == 4) {\n      if (depth == 8) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n              di = i << 1,\n              gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 1];\n        }\n      }\n\n      if (depth == 16) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n              di = i << 2,\n              gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 2];\n        }\n      }\n    } else if (ctype == 0) {\n      var tr = out.tabs[\"tRNS\"] ? out.tabs[\"tRNS\"] : -1;\n\n      for (var y = 0; y < h; y++) {\n        var off = y * bpl,\n            to = y * w;\n\n        if (depth == 1) {\n          for (var x = 0; x < w; x++) {\n            var gr = 255 * (data[off + (x >>> 3)] >>> 7 - (x & 7) & 1),\n                al = gr == tr * 255 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 2) {\n          for (var x = 0; x < w; x++) {\n            var gr = 85 * (data[off + (x >>> 2)] >>> 6 - ((x & 3) << 1) & 3),\n                al = gr == tr * 85 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 4) {\n          for (var x = 0; x < w; x++) {\n            var gr = 17 * (data[off + (x >>> 1)] >>> 4 - ((x & 1) << 2) & 15),\n                al = gr == tr * 17 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 8) {\n          for (var x = 0; x < w; x++) {\n            var gr = data[off + x],\n                al = gr == tr ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 16) {\n          for (var x = 0; x < w; x++) {\n            var gr = data[off + (x << 1)],\n                al = rs(data, off + (x << 1)) == tr ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        }\n      }\n    }\n\n    return bf;\n  };\n\n  UPNG.decode = function (buff) {\n    var data = new Uint8Array(buff),\n        offset = 8,\n        bin = UPNG._bin,\n        rUs = bin.readUshort,\n        rUi = bin.readUint;\n    var out = {\n      tabs: {},\n      frames: []\n    };\n    var dd = new Uint8Array(data.length),\n        doff = 0;\n    var fd,\n        foff = 0;\n    var text, keyw, bfr;\n    var mgck = [137, 80, 78, 71, 13, 10, 26, 10];\n\n    for (var i = 0; i < 8; i++) if (data[i] != mgck[i]) throw new Error(\"The input is not a PNG file!\");\n\n    while (offset < data.length) {\n      var len = bin.readUint(data, offset);\n      offset += 4;\n      var type = bin.readASCII(data, offset, 4);\n      offset += 4;\n\n      if (type == \"IHDR\") {\n        UPNG.decode._IHDR(data, offset, out);\n      } else if (type == \"CgBI\") {\n        out.tabs[type] = data.slice(offset, offset + 4);\n      } else if (type == \"IDAT\") {\n        for (var i = 0; i < len; i++) dd[doff + i] = data[offset + i];\n\n        doff += len;\n      } else if (type == \"acTL\") {\n        out.tabs[type] = {\n          num_frames: rUi(data, offset),\n          num_plays: rUi(data, offset + 4)\n        };\n        fd = new Uint8Array(data.length);\n      } else if (type == \"fcTL\") {\n        if (foff != 0) {\n          var fr = out.frames[out.frames.length - 1];\n          fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n          foff = 0;\n        }\n\n        var rct = {\n          x: rUi(data, offset + 12),\n          y: rUi(data, offset + 16),\n          width: rUi(data, offset + 4),\n          height: rUi(data, offset + 8)\n        };\n        var del = rUs(data, offset + 22);\n        del = rUs(data, offset + 20) / (del == 0 ? 100 : del);\n        var frm = {\n          rect: rct,\n          delay: Math.round(del * 1e3),\n          dispose: data[offset + 24],\n          blend: data[offset + 25]\n        };\n        out.frames.push(frm);\n      } else if (type == \"fdAT\") {\n        for (var i = 0; i < len - 4; i++) fd[foff + i] = data[offset + i + 4];\n\n        foff += len - 4;\n      } else if (type == \"pHYs\") {\n        out.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset + 4), data[offset + 8]];\n      } else if (type == \"cHRM\") {\n        out.tabs[type] = [];\n\n        for (var i = 0; i < 8; i++) out.tabs[type].push(bin.readUint(data, offset + i * 4));\n      } else if (type == \"tEXt\" || type == \"zTXt\") {\n        if (out.tabs[type] == null) out.tabs[type] = {};\n        var nz = bin.nextZero(data, offset);\n        keyw = bin.readASCII(data, offset, nz - offset);\n        var tl = offset + len - nz - 1;\n\n        if (type == \"tEXt\") {\n          text = bin.readASCII(data, nz + 1, tl);\n        } else {\n          bfr = UPNG.decode._inflate(data.slice(nz + 2, nz + 2 + tl));\n          text = bin.readUTF8(bfr, 0, bfr.length);\n        }\n\n        out.tabs[type][keyw] = text;\n      } else if (type == \"iTXt\") {\n        if (out.tabs[type] == null) out.tabs[type] = {};\n        var nz = 0,\n            off = offset;\n        nz = bin.nextZero(data, off);\n        keyw = bin.readASCII(data, off, nz - off);\n        off = nz + 1;\n        var cflag = data[off];\n        off += 2;\n        nz = bin.nextZero(data, off);\n        bin.readASCII(data, off, nz - off);\n        off = nz + 1;\n        nz = bin.nextZero(data, off);\n        bin.readUTF8(data, off, nz - off);\n        off = nz + 1;\n        var tl = len - (off - offset);\n\n        if (cflag == 0) {\n          text = bin.readUTF8(data, off, tl);\n        } else {\n          bfr = UPNG.decode._inflate(data.slice(off, off + tl));\n          text = bin.readUTF8(bfr, 0, bfr.length);\n        }\n\n        out.tabs[type][keyw] = text;\n      } else if (type == \"PLTE\") {\n        out.tabs[type] = bin.readBytes(data, offset, len);\n      } else if (type == \"hIST\") {\n        var pl = out.tabs[\"PLTE\"].length / 3;\n        out.tabs[type] = [];\n\n        for (var i = 0; i < pl; i++) out.tabs[type].push(rUs(data, offset + i * 2));\n      } else if (type == \"tRNS\") {\n        if (out.ctype == 3) out.tabs[type] = bin.readBytes(data, offset, len);else if (out.ctype == 0) out.tabs[type] = rUs(data, offset);else if (out.ctype == 2) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];\n      } else if (type == \"gAMA\") {\n        out.tabs[type] = bin.readUint(data, offset) / 1e5;\n      } else if (type == \"sRGB\") {\n        out.tabs[type] = data[offset];\n      } else if (type == \"bKGD\") {\n        if (out.ctype == 0 || out.ctype == 4) {\n          out.tabs[type] = [rUs(data, offset)];\n        } else if (out.ctype == 2 || out.ctype == 6) {\n          out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];\n        } else if (out.ctype == 3) {\n          out.tabs[type] = data[offset];\n        }\n      } else if (type == \"IEND\") {\n        break;\n      }\n\n      offset += len;\n      bin.readUint(data, offset);\n      offset += 4;\n    }\n\n    if (foff != 0) {\n      var fr = out.frames[out.frames.length - 1];\n      fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n    }\n\n    out.data = UPNG.decode._decompress(out, dd, out.width, out.height);\n    delete out.compress;\n    delete out.interlace;\n    delete out.filter;\n    return out;\n  };\n\n  UPNG.decode._decompress = function (out, dd, w, h) {\n    var bpp = UPNG.decode._getBPP(out),\n        bpl = Math.ceil(w * bpp / 8),\n        buff = new Uint8Array((bpl + 1 + out.interlace) * h);\n\n    if (out.tabs[\"CgBI\"]) dd = UPNG.inflateRaw(dd, buff);else dd = UPNG.decode._inflate(dd, buff);\n    if (out.interlace == 0) dd = UPNG.decode._filterZero(dd, out, 0, w, h);else if (out.interlace == 1) dd = UPNG.decode._readInterlace(dd, out);\n    return dd;\n  };\n\n  UPNG.decode._inflate = function (data, buff) {\n    var out = UPNG[\"inflateRaw\"](new Uint8Array(data.buffer, 2, data.length - 6), buff);\n    return out;\n  };\n\n  UPNG.inflateRaw = function () {\n    var H = {};\n    H.H = {};\n\n    H.H.N = function (N, W) {\n      var R = Uint8Array,\n          i = 0,\n          m = 0,\n          J = 0,\n          h = 0,\n          Q = 0,\n          X = 0,\n          u = 0,\n          w = 0,\n          d = 0,\n          v,\n          C;\n      if (N[0] == 3 && N[1] == 0) return W ? W : new R(0);\n      var V = H.H,\n          n = V.b,\n          A = V.e,\n          l = V.R,\n          M = V.n,\n          I = V.A,\n          e = V.Z,\n          b = V.m,\n          Z = W == null;\n      if (Z) W = new R(N.length >>> 2 << 5);\n\n      while (i == 0) {\n        i = n(N, d, 1);\n        m = n(N, d + 1, 2);\n        d += 3;\n\n        if (m == 0) {\n          if ((d & 7) != 0) d += 8 - (d & 7);\n          var D = (d >>> 3) + 4,\n              q = N[D - 4] | N[D - 3] << 8;\n          if (Z) W = H.H.W(W, w + q);\n          W.set(new R(N.buffer, N.byteOffset + D, q), w);\n          d = D + q << 3;\n          w += q;\n          continue;\n        }\n\n        if (Z) W = H.H.W(W, w + (1 << 17));\n\n        if (m == 1) {\n          v = b.J;\n          C = b.h;\n          X = (1 << 9) - 1;\n          u = (1 << 5) - 1;\n        }\n\n        if (m == 2) {\n          J = A(N, d, 5) + 257;\n          h = A(N, d + 5, 5) + 1;\n          Q = A(N, d + 10, 4) + 4;\n          d += 14;\n          var j = 1;\n\n          for (var c = 0; c < 38; c += 2) {\n            b.Q[c] = 0;\n            b.Q[c + 1] = 0;\n          }\n\n          for (var c = 0; c < Q; c++) {\n            var K = A(N, d + c * 3, 3);\n            b.Q[(b.X[c] << 1) + 1] = K;\n            if (K > j) j = K;\n          }\n\n          d += 3 * Q;\n          M(b.Q, j);\n          I(b.Q, j, b.u);\n          v = b.w;\n          C = b.d;\n          d = l(b.u, (1 << j) - 1, J + h, N, d, b.v);\n          var r = V.V(b.v, 0, J, b.C);\n          X = (1 << r) - 1;\n          var S = V.V(b.v, J, h, b.D);\n          u = (1 << S) - 1;\n          M(b.C, r);\n          I(b.C, r, v);\n          M(b.D, S);\n          I(b.D, S, C);\n        }\n\n        while (true) {\n          var T = v[e(N, d) & X];\n          d += T & 15;\n          var p = T >>> 4;\n\n          if (p >>> 8 == 0) {\n            W[w++] = p;\n          } else if (p == 256) {\n            break;\n          } else {\n            var z = w + p - 254;\n\n            if (p > 264) {\n              var _ = b.q[p - 257];\n              z = w + (_ >>> 3) + A(N, d, _ & 7);\n              d += _ & 7;\n            }\n\n            var $ = C[e(N, d) & u];\n            d += $ & 15;\n            var s = $ >>> 4,\n                Y = b.c[s],\n                a = (Y >>> 4) + n(N, d, Y & 15);\n            d += Y & 15;\n\n            while (w < z) {\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n            }\n\n            w = z;\n          }\n        }\n      }\n\n      return W.length == w ? W : W.slice(0, w);\n    };\n\n    H.H.W = function (N, W) {\n      var R = N.length;\n      if (W <= R) return N;\n      var V = new Uint8Array(R << 1);\n      V.set(N, 0);\n      return V;\n    };\n\n    H.H.R = function (N, W, R, V, n, A) {\n      var l = H.H.e,\n          M = H.H.Z,\n          I = 0;\n\n      while (I < R) {\n        var e = N[M(V, n) & W];\n        n += e & 15;\n        var b = e >>> 4;\n\n        if (b <= 15) {\n          A[I] = b;\n          I++;\n        } else {\n          var Z = 0,\n              m = 0;\n\n          if (b == 16) {\n            m = 3 + l(V, n, 2);\n            n += 2;\n            Z = A[I - 1];\n          } else if (b == 17) {\n            m = 3 + l(V, n, 3);\n            n += 3;\n          } else if (b == 18) {\n            m = 11 + l(V, n, 7);\n            n += 7;\n          }\n\n          var J = I + m;\n\n          while (I < J) {\n            A[I] = Z;\n            I++;\n          }\n        }\n      }\n\n      return n;\n    };\n\n    H.H.V = function (N, W, R, V) {\n      var n = 0,\n          A = 0,\n          l = V.length >>> 1;\n\n      while (A < R) {\n        var M = N[A + W];\n        V[A << 1] = 0;\n        V[(A << 1) + 1] = M;\n        if (M > n) n = M;\n        A++;\n      }\n\n      while (A < l) {\n        V[A << 1] = 0;\n        V[(A << 1) + 1] = 0;\n        A++;\n      }\n\n      return n;\n    };\n\n    H.H.n = function (N, W) {\n      var R = H.H.m,\n          V = N.length,\n          n,\n          A,\n          l,\n          M,\n          I,\n          e = R.j;\n\n      for (var M = 0; M <= W; M++) e[M] = 0;\n\n      for (M = 1; M < V; M += 2) e[N[M]]++;\n\n      var b = R.K;\n      n = 0;\n      e[0] = 0;\n\n      for (A = 1; A <= W; A++) {\n        n = n + e[A - 1] << 1;\n        b[A] = n;\n      }\n\n      for (l = 0; l < V; l += 2) {\n        I = N[l + 1];\n\n        if (I != 0) {\n          N[l] = b[I];\n          b[I]++;\n        }\n      }\n    };\n\n    H.H.A = function (N, W, R) {\n      var V = N.length,\n          n = H.H.m,\n          A = n.r;\n\n      for (var l = 0; l < V; l += 2) {\n        if (N[l + 1] != 0) {\n          var M = l >> 1,\n              I = N[l + 1],\n              e = M << 4 | I,\n              b = W - I,\n              Z = N[l] << b,\n              m = Z + (1 << b);\n\n          while (Z != m) {\n            var J = A[Z] >>> 15 - W;\n            R[J] = e;\n            Z++;\n          }\n        }\n      }\n    };\n\n    H.H.l = function (N, W) {\n      var R = H.H.m.r,\n          V = 15 - W;\n\n      for (var n = 0; n < N.length; n += 2) {\n        var A = N[n] << W - N[n + 1];\n        N[n] = R[A] >>> V;\n      }\n    };\n\n    H.H.M = function (N, W, R) {\n      R = R << (W & 7);\n      var V = W >>> 3;\n      N[V] |= R;\n      N[V + 1] |= R >>> 8;\n    };\n\n    H.H.I = function (N, W, R) {\n      R = R << (W & 7);\n      var V = W >>> 3;\n      N[V] |= R;\n      N[V + 1] |= R >>> 8;\n      N[V + 2] |= R >>> 16;\n    };\n\n    H.H.e = function (N, W, R) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8) >>> (W & 7) & (1 << R) - 1;\n    };\n\n    H.H.b = function (N, W, R) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7) & (1 << R) - 1;\n    };\n\n    H.H.Z = function (N, W) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7);\n    };\n\n    H.H.i = function (N, W) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16 | N[(W >>> 3) + 3] << 24) >>> (W & 7);\n    };\n\n    H.H.m = function () {\n      var N = Uint16Array,\n          W = Uint32Array;\n      return {\n        K: new N(16),\n        j: new N(16),\n        X: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n        S: [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999],\n        T: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0],\n        q: new N(32),\n        p: [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535],\n        z: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0],\n        c: new W(32),\n        J: new N(512),\n        _: [],\n        h: new N(32),\n        $: [],\n        w: new N(32768),\n        C: [],\n        v: [],\n        d: new N(32768),\n        D: [],\n        u: new N(512),\n        Q: [],\n        r: new N(1 << 15),\n        s: new W(286),\n        Y: new W(30),\n        a: new W(19),\n        t: new W(15e3),\n        k: new N(1 << 16),\n        g: new N(1 << 15)\n      };\n    }();\n\n    (function () {\n      var N = H.H.m,\n          W = 1 << 15;\n\n      for (var R = 0; R < W; R++) {\n        var V = R;\n        V = (V & 2863311530) >>> 1 | (V & 1431655765) << 1;\n        V = (V & 3435973836) >>> 2 | (V & 858993459) << 2;\n        V = (V & 4042322160) >>> 4 | (V & 252645135) << 4;\n        V = (V & 4278255360) >>> 8 | (V & 16711935) << 8;\n        N.r[R] = (V >>> 16 | V << 16) >>> 17;\n      }\n\n      function n(A, l, M) {\n        while (l-- != 0) A.push(0, M);\n      }\n\n      for (var R = 0; R < 32; R++) {\n        N.q[R] = N.S[R] << 3 | N.T[R];\n        N.c[R] = N.p[R] << 4 | N.z[R];\n      }\n\n      n(N._, 144, 8);\n      n(N._, 255 - 143, 9);\n      n(N._, 279 - 255, 7);\n      n(N._, 287 - 279, 8);\n      H.H.n(N._, 9);\n      H.H.A(N._, 9, N.J);\n      H.H.l(N._, 9);\n      n(N.$, 32, 5);\n      H.H.n(N.$, 5);\n      H.H.A(N.$, 5, N.h);\n      H.H.l(N.$, 5);\n      n(N.Q, 19, 0);\n      n(N.C, 286, 0);\n      n(N.D, 30, 0);\n      n(N.v, 320, 0);\n    })();\n\n    return H.H.N;\n  }();\n\n  UPNG.decode._readInterlace = function (data, out) {\n    var w = out.width,\n        h = out.height;\n\n    var bpp = UPNG.decode._getBPP(out),\n        cbpp = bpp >> 3,\n        bpl = Math.ceil(w * bpp / 8);\n\n    var img = new Uint8Array(h * bpl);\n    var di = 0;\n    var starting_row = [0, 0, 4, 0, 2, 0, 1];\n    var starting_col = [0, 4, 0, 2, 0, 1, 0];\n    var row_increment = [8, 8, 8, 4, 4, 2, 2];\n    var col_increment = [8, 8, 4, 4, 2, 2, 1];\n    var pass = 0;\n\n    while (pass < 7) {\n      var ri = row_increment[pass],\n          ci = col_increment[pass];\n      var sw = 0,\n          sh = 0;\n      var cr = starting_row[pass];\n\n      while (cr < h) {\n        cr += ri;\n        sh++;\n      }\n\n      var cc = starting_col[pass];\n\n      while (cc < w) {\n        cc += ci;\n        sw++;\n      }\n\n      var bpll = Math.ceil(sw * bpp / 8);\n\n      UPNG.decode._filterZero(data, out, di, sw, sh);\n\n      var y = 0,\n          row = starting_row[pass];\n      var val;\n\n      while (row < h) {\n        var col = starting_col[pass];\n        var cdi = di + y * bpll << 3;\n\n        while (col < w) {\n          if (bpp == 1) {\n            val = data[cdi >> 3];\n            val = val >> 7 - (cdi & 7) & 1;\n            img[row * bpl + (col >> 3)] |= val << 7 - ((col & 7) << 0);\n          }\n\n          if (bpp == 2) {\n            val = data[cdi >> 3];\n            val = val >> 6 - (cdi & 7) & 3;\n            img[row * bpl + (col >> 2)] |= val << 6 - ((col & 3) << 1);\n          }\n\n          if (bpp == 4) {\n            val = data[cdi >> 3];\n            val = val >> 4 - (cdi & 7) & 15;\n            img[row * bpl + (col >> 1)] |= val << 4 - ((col & 1) << 2);\n          }\n\n          if (bpp >= 8) {\n            var ii = row * bpl + col * cbpp;\n\n            for (var j = 0; j < cbpp; j++) img[ii + j] = data[(cdi >> 3) + j];\n          }\n\n          cdi += bpp;\n          col += ci;\n        }\n\n        y++;\n        row += ri;\n      }\n\n      if (sw * sh != 0) di += sh * (1 + bpll);\n      pass = pass + 1;\n    }\n\n    return img;\n  };\n\n  UPNG.decode._getBPP = function (out) {\n    var noc = [1, null, 3, 1, 2, null, 4][out.ctype];\n    return noc * out.depth;\n  };\n\n  UPNG.decode._filterZero = function (data, out, off, w, h) {\n    var bpp = UPNG.decode._getBPP(out),\n        bpl = Math.ceil(w * bpp / 8),\n        paeth = UPNG.decode._paeth;\n\n    bpp = Math.ceil(bpp / 8);\n    var i,\n        di,\n        type = data[off],\n        x = 0;\n    if (type > 1) data[off] = [0, 0, 1][type - 2];\n    if (type == 3) for (x = bpp; x < bpl; x++) data[x + 1] = data[x + 1] + (data[x + 1 - bpp] >>> 1) & 255;\n\n    for (var y = 0; y < h; y++) {\n      i = off + y * bpl;\n      di = i + y + 1;\n      type = data[di - 1];\n      x = 0;\n\n      if (type == 0) {\n        for (; x < bpl; x++) data[i + x] = data[di + x];\n      } else if (type == 1) {\n        for (; x < bpp; x++) data[i + x] = data[di + x];\n\n        for (; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpp];\n      } else if (type == 2) {\n        for (; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpl];\n      } else if (type == 3) {\n        for (; x < bpp; x++) data[i + x] = data[di + x] + (data[i + x - bpl] >>> 1);\n\n        for (; x < bpl; x++) data[i + x] = data[di + x] + (data[i + x - bpl] + data[i + x - bpp] >>> 1);\n      } else {\n        for (; x < bpp; x++) data[i + x] = data[di + x] + paeth(0, data[i + x - bpl], 0);\n\n        for (; x < bpl; x++) {\n          data[i + x] = data[di + x] + paeth(data[i + x - bpp], data[i + x - bpl], data[i + x - bpp - bpl]);\n        }\n      }\n    }\n\n    return data;\n  };\n\n  UPNG.decode._paeth = function (a, b, c) {\n    var p = a + b - c,\n        pa = p - a,\n        pb = p - b,\n        pc = p - c;\n    if (pa * pa <= pb * pb && pa * pa <= pc * pc) return a;else if (pb * pb <= pc * pc) return b;\n    return c;\n  };\n\n  UPNG.decode._IHDR = function (data, offset, out) {\n    var bin = UPNG._bin;\n    out.width = bin.readUint(data, offset);\n    offset += 4;\n    out.height = bin.readUint(data, offset);\n    offset += 4;\n    out.depth = data[offset];\n    offset++;\n    out.ctype = data[offset];\n    offset++;\n    out.compress = data[offset];\n    offset++;\n    out.filter = data[offset];\n    offset++;\n    out.interlace = data[offset];\n    offset++;\n  };\n\n  UPNG._bin = {\n    nextZero: function (data, p) {\n      while (data[p] != 0) p++;\n\n      return p;\n    },\n    readUshort: function (buff, p) {\n      return buff[p] << 8 | buff[p + 1];\n    },\n    writeUshort: function (buff, p, n) {\n      buff[p] = n >> 8 & 255;\n      buff[p + 1] = n & 255;\n    },\n    readUint: function (buff, p) {\n      return buff[p] * (256 * 256 * 256) + (buff[p + 1] << 16 | buff[p + 2] << 8 | buff[p + 3]);\n    },\n    writeUint: function (buff, p, n) {\n      buff[p] = n >> 24 & 255;\n      buff[p + 1] = n >> 16 & 255;\n      buff[p + 2] = n >> 8 & 255;\n      buff[p + 3] = n & 255;\n    },\n    readASCII: function (buff, p, l) {\n      var s = \"\";\n\n      for (var i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\n\n      return s;\n    },\n    writeASCII: function (data, p, s) {\n      for (var i = 0; i < s.length; i++) data[p + i] = s.charCodeAt(i);\n    },\n    readBytes: function (buff, p, l) {\n      var arr = [];\n\n      for (var i = 0; i < l; i++) arr.push(buff[p + i]);\n\n      return arr;\n    },\n    pad: function (n) {\n      return n.length < 2 ? \"0\" + n : n;\n    },\n    readUTF8: function (buff, p, l) {\n      var s = \"\",\n          ns;\n\n      for (var i = 0; i < l; i++) s += \"%\" + UPNG._bin.pad(buff[p + i].toString(16));\n\n      try {\n        ns = decodeURIComponent(s);\n      } catch (e) {\n        return UPNG._bin.readASCII(buff, p, l);\n      }\n\n      return ns;\n    }\n  };\n\n  UPNG._copyTile = function (sb, sw, sh, tb, tw, th, xoff, yoff, mode) {\n    var w = Math.min(sw, tw),\n        h = Math.min(sh, th);\n    var si = 0,\n        ti = 0;\n\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        if (xoff >= 0 && yoff >= 0) {\n          si = y * sw + x << 2;\n          ti = (yoff + y) * tw + xoff + x << 2;\n        } else {\n          si = (-yoff + y) * sw - xoff + x << 2;\n          ti = y * tw + x << 2;\n        }\n\n        if (mode == 0) {\n          tb[ti] = sb[si];\n          tb[ti + 1] = sb[si + 1];\n          tb[ti + 2] = sb[si + 2];\n          tb[ti + 3] = sb[si + 3];\n        } else if (mode == 1) {\n          var fa = sb[si + 3] * (1 / 255),\n              fr = sb[si] * fa,\n              fg = sb[si + 1] * fa,\n              fb = sb[si + 2] * fa;\n          var ba = tb[ti + 3] * (1 / 255),\n              br = tb[ti] * ba,\n              bg = tb[ti + 1] * ba,\n              bb = tb[ti + 2] * ba;\n          var ifa = 1 - fa,\n              oa = fa + ba * ifa,\n              ioa = oa == 0 ? 0 : 1 / oa;\n          tb[ti + 3] = 255 * oa;\n          tb[ti + 0] = (fr + br * ifa) * ioa;\n          tb[ti + 1] = (fg + bg * ifa) * ioa;\n          tb[ti + 2] = (fb + bb * ifa) * ioa;\n        } else if (mode == 2) {\n          var fa = sb[si + 3],\n              fr = sb[si],\n              fg = sb[si + 1],\n              fb = sb[si + 2];\n          var ba = tb[ti + 3],\n              br = tb[ti],\n              bg = tb[ti + 1],\n              bb = tb[ti + 2];\n\n          if (fa == ba && fr == br && fg == bg && fb == bb) {\n            tb[ti] = 0;\n            tb[ti + 1] = 0;\n            tb[ti + 2] = 0;\n            tb[ti + 3] = 0;\n          } else {\n            tb[ti] = fr;\n            tb[ti + 1] = fg;\n            tb[ti + 2] = fb;\n            tb[ti + 3] = fa;\n          }\n        } else if (mode == 3) {\n          var fa = sb[si + 3],\n              fr = sb[si],\n              fg = sb[si + 1],\n              fb = sb[si + 2];\n          var ba = tb[ti + 3],\n              br = tb[ti],\n              bg = tb[ti + 1],\n              bb = tb[ti + 2];\n          if (fa == ba && fr == br && fg == bg && fb == bb) continue;\n          if (fa < 220 && ba > 20) return false;\n        }\n      }\n    }\n\n    return true;\n  };\n}\n\nclass RGBMLoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager);\n    this.type = HalfFloatType;\n    this.maxRange = 7;\n  }\n\n  setDataType(value) {\n    this.type = value;\n    return this;\n  }\n\n  setMaxRange(value) {\n    this.maxRange = value;\n    return this;\n  }\n\n  loadCubemap(urls, onLoad, onProgress, onError) {\n    const texture = new CubeTexture();\n    let loaded = 0;\n    const scope = this;\n\n    function loadTexture(i) {\n      scope.load(urls[i], function (image) {\n        texture.images[i] = image;\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }\n      }, void 0, onError);\n    }\n\n    for (let i = 0; i < urls.length; ++i) {\n      loadTexture(i);\n    }\n\n    texture.type = this.type;\n    texture.format = RGBAFormat;\n    texture.minFilter = LinearFilter;\n    texture.generateMipmaps = false;\n    return texture;\n  }\n\n  parse(buffer) {\n    init();\n    const img = UPNG.decode(buffer);\n    const rgba = UPNG.toRGBA8(img)[0];\n    const data = new Uint8Array(rgba);\n    const size = img.width * img.height * 4;\n    const output = this.type === HalfFloatType ? new Uint16Array(size) : new Float32Array(size);\n\n    for (let i = 0; i < data.length; i += 4) {\n      const r = data[i + 0] / 255;\n      const g = data[i + 1] / 255;\n      const b = data[i + 2] / 255;\n      const a = data[i + 3] / 255;\n\n      if (this.type === HalfFloatType) {\n        output[i + 0] = DataUtils.toHalfFloat(Math.min(r * a * this.maxRange, 65504));\n        output[i + 1] = DataUtils.toHalfFloat(Math.min(g * a * this.maxRange, 65504));\n        output[i + 2] = DataUtils.toHalfFloat(Math.min(b * a * this.maxRange, 65504));\n        output[i + 3] = DataUtils.toHalfFloat(1);\n      } else {\n        output[i + 0] = r * a * this.maxRange;\n        output[i + 1] = g * a * this.maxRange;\n        output[i + 2] = b * a * this.maxRange;\n        output[i + 3] = 1;\n      }\n    }\n\n    return {\n      width: img.width,\n      height: img.height,\n      data: output,\n      format: RGBAFormat,\n      type: this.type,\n      flipY: true\n    };\n  }\n\n}\n\nexport { RGBMLoader };","map":{"version":3,"sources":["/Users/theodaguier/Developer/old/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/three-stdlib/loaders/RGBMLoader.js"],"names":["DataTextureLoader","HalfFloatType","CubeTexture","RGBAFormat","LinearFilter","DataUtils","UPNG","init","toRGBA8","out","w","width","h","height","tabs","acTL","decodeImage","data","buffer","frms","frames","len","img","Uint8Array","empty","prev","i","length","frm","fx","rect","x","fy","y","fw","fh","fdata","j","blend","_copyTile","push","slice","dispose","area","bpp","decode","_getBPP","bpl","Math","ceil","bf","bf32","Uint32Array","ctype","depth","rs","_bin","readUshort","qarea","ts","ti","tr","tg","tb","qi","p","ap","tl","s0","t0","cj","di","gr","off","to","al","buff","offset","bin","rUs","rUi","readUint","dd","doff","fd","foff","text","keyw","bfr","mgck","Error","type","readASCII","_IHDR","num_frames","num_plays","fr","_decompress","rct","del","delay","round","nz","nextZero","_inflate","readUTF8","cflag","readBytes","pl","compress","interlace","filter","inflateRaw","_filterZero","_readInterlace","H","N","W","R","m","J","Q","X","u","d","v","C","V","n","b","A","e","l","M","I","Z","D","q","set","byteOffset","c","K","r","S","T","z","_","$","s","Y","a","Uint16Array","t","k","g","cbpp","starting_row","starting_col","row_increment","col_increment","pass","ri","ci","sw","sh","cr","cc","bpll","row","val","col","cdi","ii","noc","paeth","_paeth","pa","pb","pc","writeUshort","writeUint","String","fromCharCode","writeASCII","charCodeAt","arr","pad","ns","toString","decodeURIComponent","sb","tw","th","xoff","yoff","mode","min","si","fa","fg","fb","ba","br","bg","bb","ifa","oa","ioa","RGBMLoader","constructor","manager","maxRange","setDataType","value","setMaxRange","loadCubemap","urls","onLoad","onProgress","onError","texture","loaded","scope","loadTexture","load","image","images","needsUpdate","format","minFilter","generateMipmaps","parse","rgba","size","output","Float32Array","toHalfFloat","flipY"],"mappings":"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","sourcesContent":["import { DataTextureLoader, HalfFloatType, CubeTexture, RGBAFormat, LinearFilter, DataUtils } from \"three\";\nlet UPNG;\nfunction init() {\n  if (UPNG)\n    return UPNG;\n  UPNG = {};\n  UPNG.toRGBA8 = function(out) {\n    var w = out.width, h = out.height;\n    if (out.tabs.acTL == null)\n      return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n    var frms = [];\n    if (out.frames[0].data == null)\n      out.frames[0].data = out.data;\n    var len = w * h * 4, img = new Uint8Array(len), empty = new Uint8Array(len), prev = new Uint8Array(len);\n    for (var i = 0; i < out.frames.length; i++) {\n      var frm = out.frames[i];\n      var fx = frm.rect.x, fy = frm.rect.y, fw = frm.rect.width, fh = frm.rect.height;\n      var fdata = UPNG.toRGBA8.decodeImage(frm.data, fw, fh, out);\n      if (i != 0)\n        for (var j = 0; j < len; j++)\n          prev[j] = img[j];\n      if (frm.blend == 0)\n        UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);\n      else if (frm.blend == 1)\n        UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n      frms.push(img.buffer.slice(0));\n      if (frm.dispose == 1)\n        UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);\n      else if (frm.dispose == 2)\n        for (var j = 0; j < len; j++)\n          img[j] = prev[j];\n    }\n    return frms;\n  };\n  UPNG.toRGBA8.decodeImage = function(data, w, h, out) {\n    var area = w * h, bpp = UPNG.decode._getBPP(out);\n    var bpl = Math.ceil(w * bpp / 8);\n    var bf = new Uint8Array(area * 4), bf32 = new Uint32Array(bf.buffer);\n    var ctype = out.ctype, depth = out.depth;\n    var rs = UPNG._bin.readUshort;\n    if (ctype == 6) {\n      var qarea = area << 2;\n      if (depth == 8) {\n        for (var i = 0; i < qarea; i += 4) {\n          bf[i] = data[i];\n          bf[i + 1] = data[i + 1];\n          bf[i + 2] = data[i + 2];\n          bf[i + 3] = data[i + 3];\n        }\n      }\n      if (depth == 16) {\n        for (var i = 0; i < qarea; i++) {\n          bf[i] = data[i << 1];\n        }\n      }\n    } else if (ctype == 2) {\n      var ts = out.tabs[\"tRNS\"];\n      if (ts == null) {\n        if (depth == 8) {\n          for (var i = 0; i < area; i++) {\n            var ti = i * 3;\n            bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n          }\n        }\n        if (depth == 16) {\n          for (var i = 0; i < area; i++) {\n            var ti = i * 6;\n            bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n          }\n        }\n      } else {\n        var tr = ts[0], tg = ts[1], tb = ts[2];\n        if (depth == 8) {\n          for (var i = 0; i < area; i++) {\n            var qi = i << 2, ti = i * 3;\n            bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n            if (data[ti] == tr && data[ti + 1] == tg && data[ti + 2] == tb)\n              bf[qi + 3] = 0;\n          }\n        }\n        if (depth == 16) {\n          for (var i = 0; i < area; i++) {\n            var qi = i << 2, ti = i * 6;\n            bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n            if (rs(data, ti) == tr && rs(data, ti + 2) == tg && rs(data, ti + 4) == tb)\n              bf[qi + 3] = 0;\n          }\n        }\n      }\n    } else if (ctype == 3) {\n      var p = out.tabs[\"PLTE\"], ap = out.tabs[\"tRNS\"], tl = ap ? ap.length : 0;\n      if (depth == 1) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl, t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2, j = data[s0 + (i >> 3)] >> 7 - ((i & 7) << 0) & 1, cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n      if (depth == 2) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl, t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2, j = data[s0 + (i >> 2)] >> 6 - ((i & 3) << 1) & 3, cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n      if (depth == 4) {\n        for (var y = 0; y < h; y++) {\n          var s0 = y * bpl, t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2, j = data[s0 + (i >> 1)] >> 4 - ((i & 1) << 2) & 15, cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n      }\n      if (depth == 8) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2, j = data[i], cj = 3 * j;\n          bf[qi] = p[cj];\n          bf[qi + 1] = p[cj + 1];\n          bf[qi + 2] = p[cj + 2];\n          bf[qi + 3] = j < tl ? ap[j] : 255;\n        }\n      }\n    } else if (ctype == 4) {\n      if (depth == 8) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2, di = i << 1, gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 1];\n        }\n      }\n      if (depth == 16) {\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2, di = i << 2, gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 2];\n        }\n      }\n    } else if (ctype == 0) {\n      var tr = out.tabs[\"tRNS\"] ? out.tabs[\"tRNS\"] : -1;\n      for (var y = 0; y < h; y++) {\n        var off = y * bpl, to = y * w;\n        if (depth == 1) {\n          for (var x = 0; x < w; x++) {\n            var gr = 255 * (data[off + (x >>> 3)] >>> 7 - (x & 7) & 1), al = gr == tr * 255 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 2) {\n          for (var x = 0; x < w; x++) {\n            var gr = 85 * (data[off + (x >>> 2)] >>> 6 - ((x & 3) << 1) & 3), al = gr == tr * 85 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 4) {\n          for (var x = 0; x < w; x++) {\n            var gr = 17 * (data[off + (x >>> 1)] >>> 4 - ((x & 1) << 2) & 15), al = gr == tr * 17 ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 8) {\n          for (var x = 0; x < w; x++) {\n            var gr = data[off + x], al = gr == tr ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        } else if (depth == 16) {\n          for (var x = 0; x < w; x++) {\n            var gr = data[off + (x << 1)], al = rs(data, off + (x << 1)) == tr ? 0 : 255;\n            bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n          }\n        }\n      }\n    }\n    return bf;\n  };\n  UPNG.decode = function(buff) {\n    var data = new Uint8Array(buff), offset = 8, bin = UPNG._bin, rUs = bin.readUshort, rUi = bin.readUint;\n    var out = { tabs: {}, frames: [] };\n    var dd = new Uint8Array(data.length), doff = 0;\n    var fd, foff = 0;\n    var text, keyw, bfr;\n    var mgck = [137, 80, 78, 71, 13, 10, 26, 10];\n    for (var i = 0; i < 8; i++)\n      if (data[i] != mgck[i])\n        throw new Error(\"The input is not a PNG file!\");\n    while (offset < data.length) {\n      var len = bin.readUint(data, offset);\n      offset += 4;\n      var type = bin.readASCII(data, offset, 4);\n      offset += 4;\n      if (type == \"IHDR\") {\n        UPNG.decode._IHDR(data, offset, out);\n      } else if (type == \"CgBI\") {\n        out.tabs[type] = data.slice(offset, offset + 4);\n      } else if (type == \"IDAT\") {\n        for (var i = 0; i < len; i++)\n          dd[doff + i] = data[offset + i];\n        doff += len;\n      } else if (type == \"acTL\") {\n        out.tabs[type] = { num_frames: rUi(data, offset), num_plays: rUi(data, offset + 4) };\n        fd = new Uint8Array(data.length);\n      } else if (type == \"fcTL\") {\n        if (foff != 0) {\n          var fr = out.frames[out.frames.length - 1];\n          fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n          foff = 0;\n        }\n        var rct = {\n          x: rUi(data, offset + 12),\n          y: rUi(data, offset + 16),\n          width: rUi(data, offset + 4),\n          height: rUi(data, offset + 8)\n        };\n        var del = rUs(data, offset + 22);\n        del = rUs(data, offset + 20) / (del == 0 ? 100 : del);\n        var frm = { rect: rct, delay: Math.round(del * 1e3), dispose: data[offset + 24], blend: data[offset + 25] };\n        out.frames.push(frm);\n      } else if (type == \"fdAT\") {\n        for (var i = 0; i < len - 4; i++)\n          fd[foff + i] = data[offset + i + 4];\n        foff += len - 4;\n      } else if (type == \"pHYs\") {\n        out.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset + 4), data[offset + 8]];\n      } else if (type == \"cHRM\") {\n        out.tabs[type] = [];\n        for (var i = 0; i < 8; i++)\n          out.tabs[type].push(bin.readUint(data, offset + i * 4));\n      } else if (type == \"tEXt\" || type == \"zTXt\") {\n        if (out.tabs[type] == null)\n          out.tabs[type] = {};\n        var nz = bin.nextZero(data, offset);\n        keyw = bin.readASCII(data, offset, nz - offset);\n        var tl = offset + len - nz - 1;\n        if (type == \"tEXt\") {\n          text = bin.readASCII(data, nz + 1, tl);\n        } else {\n          bfr = UPNG.decode._inflate(data.slice(nz + 2, nz + 2 + tl));\n          text = bin.readUTF8(bfr, 0, bfr.length);\n        }\n        out.tabs[type][keyw] = text;\n      } else if (type == \"iTXt\") {\n        if (out.tabs[type] == null)\n          out.tabs[type] = {};\n        var nz = 0, off = offset;\n        nz = bin.nextZero(data, off);\n        keyw = bin.readASCII(data, off, nz - off);\n        off = nz + 1;\n        var cflag = data[off];\n        off += 2;\n        nz = bin.nextZero(data, off);\n        bin.readASCII(data, off, nz - off);\n        off = nz + 1;\n        nz = bin.nextZero(data, off);\n        bin.readUTF8(data, off, nz - off);\n        off = nz + 1;\n        var tl = len - (off - offset);\n        if (cflag == 0) {\n          text = bin.readUTF8(data, off, tl);\n        } else {\n          bfr = UPNG.decode._inflate(data.slice(off, off + tl));\n          text = bin.readUTF8(bfr, 0, bfr.length);\n        }\n        out.tabs[type][keyw] = text;\n      } else if (type == \"PLTE\") {\n        out.tabs[type] = bin.readBytes(data, offset, len);\n      } else if (type == \"hIST\") {\n        var pl = out.tabs[\"PLTE\"].length / 3;\n        out.tabs[type] = [];\n        for (var i = 0; i < pl; i++)\n          out.tabs[type].push(rUs(data, offset + i * 2));\n      } else if (type == \"tRNS\") {\n        if (out.ctype == 3)\n          out.tabs[type] = bin.readBytes(data, offset, len);\n        else if (out.ctype == 0)\n          out.tabs[type] = rUs(data, offset);\n        else if (out.ctype == 2)\n          out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];\n      } else if (type == \"gAMA\") {\n        out.tabs[type] = bin.readUint(data, offset) / 1e5;\n      } else if (type == \"sRGB\") {\n        out.tabs[type] = data[offset];\n      } else if (type == \"bKGD\") {\n        if (out.ctype == 0 || out.ctype == 4) {\n          out.tabs[type] = [rUs(data, offset)];\n        } else if (out.ctype == 2 || out.ctype == 6) {\n          out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];\n        } else if (out.ctype == 3) {\n          out.tabs[type] = data[offset];\n        }\n      } else if (type == \"IEND\") {\n        break;\n      }\n      offset += len;\n      bin.readUint(data, offset);\n      offset += 4;\n    }\n    if (foff != 0) {\n      var fr = out.frames[out.frames.length - 1];\n      fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n    }\n    out.data = UPNG.decode._decompress(out, dd, out.width, out.height);\n    delete out.compress;\n    delete out.interlace;\n    delete out.filter;\n    return out;\n  };\n  UPNG.decode._decompress = function(out, dd, w, h) {\n    var bpp = UPNG.decode._getBPP(out), bpl = Math.ceil(w * bpp / 8), buff = new Uint8Array((bpl + 1 + out.interlace) * h);\n    if (out.tabs[\"CgBI\"])\n      dd = UPNG.inflateRaw(dd, buff);\n    else\n      dd = UPNG.decode._inflate(dd, buff);\n    if (out.interlace == 0)\n      dd = UPNG.decode._filterZero(dd, out, 0, w, h);\n    else if (out.interlace == 1)\n      dd = UPNG.decode._readInterlace(dd, out);\n    return dd;\n  };\n  UPNG.decode._inflate = function(data, buff) {\n    var out = UPNG[\"inflateRaw\"](new Uint8Array(data.buffer, 2, data.length - 6), buff);\n    return out;\n  };\n  UPNG.inflateRaw = function() {\n    var H = {};\n    H.H = {};\n    H.H.N = function(N, W) {\n      var R = Uint8Array, i = 0, m = 0, J = 0, h = 0, Q = 0, X = 0, u = 0, w = 0, d = 0, v, C;\n      if (N[0] == 3 && N[1] == 0)\n        return W ? W : new R(0);\n      var V = H.H, n = V.b, A = V.e, l = V.R, M = V.n, I = V.A, e = V.Z, b = V.m, Z = W == null;\n      if (Z)\n        W = new R(N.length >>> 2 << 5);\n      while (i == 0) {\n        i = n(N, d, 1);\n        m = n(N, d + 1, 2);\n        d += 3;\n        if (m == 0) {\n          if ((d & 7) != 0)\n            d += 8 - (d & 7);\n          var D = (d >>> 3) + 4, q = N[D - 4] | N[D - 3] << 8;\n          if (Z)\n            W = H.H.W(W, w + q);\n          W.set(new R(N.buffer, N.byteOffset + D, q), w);\n          d = D + q << 3;\n          w += q;\n          continue;\n        }\n        if (Z)\n          W = H.H.W(W, w + (1 << 17));\n        if (m == 1) {\n          v = b.J;\n          C = b.h;\n          X = (1 << 9) - 1;\n          u = (1 << 5) - 1;\n        }\n        if (m == 2) {\n          J = A(N, d, 5) + 257;\n          h = A(N, d + 5, 5) + 1;\n          Q = A(N, d + 10, 4) + 4;\n          d += 14;\n          var j = 1;\n          for (var c = 0; c < 38; c += 2) {\n            b.Q[c] = 0;\n            b.Q[c + 1] = 0;\n          }\n          for (var c = 0; c < Q; c++) {\n            var K = A(N, d + c * 3, 3);\n            b.Q[(b.X[c] << 1) + 1] = K;\n            if (K > j)\n              j = K;\n          }\n          d += 3 * Q;\n          M(b.Q, j);\n          I(b.Q, j, b.u);\n          v = b.w;\n          C = b.d;\n          d = l(b.u, (1 << j) - 1, J + h, N, d, b.v);\n          var r = V.V(b.v, 0, J, b.C);\n          X = (1 << r) - 1;\n          var S = V.V(b.v, J, h, b.D);\n          u = (1 << S) - 1;\n          M(b.C, r);\n          I(b.C, r, v);\n          M(b.D, S);\n          I(b.D, S, C);\n        }\n        while (true) {\n          var T = v[e(N, d) & X];\n          d += T & 15;\n          var p = T >>> 4;\n          if (p >>> 8 == 0) {\n            W[w++] = p;\n          } else if (p == 256) {\n            break;\n          } else {\n            var z = w + p - 254;\n            if (p > 264) {\n              var _ = b.q[p - 257];\n              z = w + (_ >>> 3) + A(N, d, _ & 7);\n              d += _ & 7;\n            }\n            var $ = C[e(N, d) & u];\n            d += $ & 15;\n            var s = $ >>> 4, Y = b.c[s], a = (Y >>> 4) + n(N, d, Y & 15);\n            d += Y & 15;\n            while (w < z) {\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n              W[w] = W[w++ - a];\n            }\n            w = z;\n          }\n        }\n      }\n      return W.length == w ? W : W.slice(0, w);\n    };\n    H.H.W = function(N, W) {\n      var R = N.length;\n      if (W <= R)\n        return N;\n      var V = new Uint8Array(R << 1);\n      V.set(N, 0);\n      return V;\n    };\n    H.H.R = function(N, W, R, V, n, A) {\n      var l = H.H.e, M = H.H.Z, I = 0;\n      while (I < R) {\n        var e = N[M(V, n) & W];\n        n += e & 15;\n        var b = e >>> 4;\n        if (b <= 15) {\n          A[I] = b;\n          I++;\n        } else {\n          var Z = 0, m = 0;\n          if (b == 16) {\n            m = 3 + l(V, n, 2);\n            n += 2;\n            Z = A[I - 1];\n          } else if (b == 17) {\n            m = 3 + l(V, n, 3);\n            n += 3;\n          } else if (b == 18) {\n            m = 11 + l(V, n, 7);\n            n += 7;\n          }\n          var J = I + m;\n          while (I < J) {\n            A[I] = Z;\n            I++;\n          }\n        }\n      }\n      return n;\n    };\n    H.H.V = function(N, W, R, V) {\n      var n = 0, A = 0, l = V.length >>> 1;\n      while (A < R) {\n        var M = N[A + W];\n        V[A << 1] = 0;\n        V[(A << 1) + 1] = M;\n        if (M > n)\n          n = M;\n        A++;\n      }\n      while (A < l) {\n        V[A << 1] = 0;\n        V[(A << 1) + 1] = 0;\n        A++;\n      }\n      return n;\n    };\n    H.H.n = function(N, W) {\n      var R = H.H.m, V = N.length, n, A, l, M, I, e = R.j;\n      for (var M = 0; M <= W; M++)\n        e[M] = 0;\n      for (M = 1; M < V; M += 2)\n        e[N[M]]++;\n      var b = R.K;\n      n = 0;\n      e[0] = 0;\n      for (A = 1; A <= W; A++) {\n        n = n + e[A - 1] << 1;\n        b[A] = n;\n      }\n      for (l = 0; l < V; l += 2) {\n        I = N[l + 1];\n        if (I != 0) {\n          N[l] = b[I];\n          b[I]++;\n        }\n      }\n    };\n    H.H.A = function(N, W, R) {\n      var V = N.length, n = H.H.m, A = n.r;\n      for (var l = 0; l < V; l += 2) {\n        if (N[l + 1] != 0) {\n          var M = l >> 1, I = N[l + 1], e = M << 4 | I, b = W - I, Z = N[l] << b, m = Z + (1 << b);\n          while (Z != m) {\n            var J = A[Z] >>> 15 - W;\n            R[J] = e;\n            Z++;\n          }\n        }\n      }\n    };\n    H.H.l = function(N, W) {\n      var R = H.H.m.r, V = 15 - W;\n      for (var n = 0; n < N.length; n += 2) {\n        var A = N[n] << W - N[n + 1];\n        N[n] = R[A] >>> V;\n      }\n    };\n    H.H.M = function(N, W, R) {\n      R = R << (W & 7);\n      var V = W >>> 3;\n      N[V] |= R;\n      N[V + 1] |= R >>> 8;\n    };\n    H.H.I = function(N, W, R) {\n      R = R << (W & 7);\n      var V = W >>> 3;\n      N[V] |= R;\n      N[V + 1] |= R >>> 8;\n      N[V + 2] |= R >>> 16;\n    };\n    H.H.e = function(N, W, R) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8) >>> (W & 7) & (1 << R) - 1;\n    };\n    H.H.b = function(N, W, R) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7) & (1 << R) - 1;\n    };\n    H.H.Z = function(N, W) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7);\n    };\n    H.H.i = function(N, W) {\n      return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16 | N[(W >>> 3) + 3] << 24) >>> (W & 7);\n    };\n    H.H.m = function() {\n      var N = Uint16Array, W = Uint32Array;\n      return {\n        K: new N(16),\n        j: new N(16),\n        X: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n        S: [\n          3,\n          4,\n          5,\n          6,\n          7,\n          8,\n          9,\n          10,\n          11,\n          13,\n          15,\n          17,\n          19,\n          23,\n          27,\n          31,\n          35,\n          43,\n          51,\n          59,\n          67,\n          83,\n          99,\n          115,\n          131,\n          163,\n          195,\n          227,\n          258,\n          999,\n          999,\n          999\n        ],\n        T: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0],\n        q: new N(32),\n        p: [\n          1,\n          2,\n          3,\n          4,\n          5,\n          7,\n          9,\n          13,\n          17,\n          25,\n          33,\n          49,\n          65,\n          97,\n          129,\n          193,\n          257,\n          385,\n          513,\n          769,\n          1025,\n          1537,\n          2049,\n          3073,\n          4097,\n          6145,\n          8193,\n          12289,\n          16385,\n          24577,\n          65535,\n          65535\n        ],\n        z: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0],\n        c: new W(32),\n        J: new N(512),\n        _: [],\n        h: new N(32),\n        $: [],\n        w: new N(32768),\n        C: [],\n        v: [],\n        d: new N(32768),\n        D: [],\n        u: new N(512),\n        Q: [],\n        r: new N(1 << 15),\n        s: new W(286),\n        Y: new W(30),\n        a: new W(19),\n        t: new W(15e3),\n        k: new N(1 << 16),\n        g: new N(1 << 15)\n      };\n    }();\n    (function() {\n      var N = H.H.m, W = 1 << 15;\n      for (var R = 0; R < W; R++) {\n        var V = R;\n        V = (V & 2863311530) >>> 1 | (V & 1431655765) << 1;\n        V = (V & 3435973836) >>> 2 | (V & 858993459) << 2;\n        V = (V & 4042322160) >>> 4 | (V & 252645135) << 4;\n        V = (V & 4278255360) >>> 8 | (V & 16711935) << 8;\n        N.r[R] = (V >>> 16 | V << 16) >>> 17;\n      }\n      function n(A, l, M) {\n        while (l-- != 0)\n          A.push(0, M);\n      }\n      for (var R = 0; R < 32; R++) {\n        N.q[R] = N.S[R] << 3 | N.T[R];\n        N.c[R] = N.p[R] << 4 | N.z[R];\n      }\n      n(N._, 144, 8);\n      n(N._, 255 - 143, 9);\n      n(N._, 279 - 255, 7);\n      n(N._, 287 - 279, 8);\n      H.H.n(N._, 9);\n      H.H.A(N._, 9, N.J);\n      H.H.l(N._, 9);\n      n(N.$, 32, 5);\n      H.H.n(N.$, 5);\n      H.H.A(N.$, 5, N.h);\n      H.H.l(N.$, 5);\n      n(N.Q, 19, 0);\n      n(N.C, 286, 0);\n      n(N.D, 30, 0);\n      n(N.v, 320, 0);\n    })();\n    return H.H.N;\n  }();\n  UPNG.decode._readInterlace = function(data, out) {\n    var w = out.width, h = out.height;\n    var bpp = UPNG.decode._getBPP(out), cbpp = bpp >> 3, bpl = Math.ceil(w * bpp / 8);\n    var img = new Uint8Array(h * bpl);\n    var di = 0;\n    var starting_row = [0, 0, 4, 0, 2, 0, 1];\n    var starting_col = [0, 4, 0, 2, 0, 1, 0];\n    var row_increment = [8, 8, 8, 4, 4, 2, 2];\n    var col_increment = [8, 8, 4, 4, 2, 2, 1];\n    var pass = 0;\n    while (pass < 7) {\n      var ri = row_increment[pass], ci = col_increment[pass];\n      var sw = 0, sh = 0;\n      var cr = starting_row[pass];\n      while (cr < h) {\n        cr += ri;\n        sh++;\n      }\n      var cc = starting_col[pass];\n      while (cc < w) {\n        cc += ci;\n        sw++;\n      }\n      var bpll = Math.ceil(sw * bpp / 8);\n      UPNG.decode._filterZero(data, out, di, sw, sh);\n      var y = 0, row = starting_row[pass];\n      var val;\n      while (row < h) {\n        var col = starting_col[pass];\n        var cdi = di + y * bpll << 3;\n        while (col < w) {\n          if (bpp == 1) {\n            val = data[cdi >> 3];\n            val = val >> 7 - (cdi & 7) & 1;\n            img[row * bpl + (col >> 3)] |= val << 7 - ((col & 7) << 0);\n          }\n          if (bpp == 2) {\n            val = data[cdi >> 3];\n            val = val >> 6 - (cdi & 7) & 3;\n            img[row * bpl + (col >> 2)] |= val << 6 - ((col & 3) << 1);\n          }\n          if (bpp == 4) {\n            val = data[cdi >> 3];\n            val = val >> 4 - (cdi & 7) & 15;\n            img[row * bpl + (col >> 1)] |= val << 4 - ((col & 1) << 2);\n          }\n          if (bpp >= 8) {\n            var ii = row * bpl + col * cbpp;\n            for (var j = 0; j < cbpp; j++)\n              img[ii + j] = data[(cdi >> 3) + j];\n          }\n          cdi += bpp;\n          col += ci;\n        }\n        y++;\n        row += ri;\n      }\n      if (sw * sh != 0)\n        di += sh * (1 + bpll);\n      pass = pass + 1;\n    }\n    return img;\n  };\n  UPNG.decode._getBPP = function(out) {\n    var noc = [1, null, 3, 1, 2, null, 4][out.ctype];\n    return noc * out.depth;\n  };\n  UPNG.decode._filterZero = function(data, out, off, w, h) {\n    var bpp = UPNG.decode._getBPP(out), bpl = Math.ceil(w * bpp / 8), paeth = UPNG.decode._paeth;\n    bpp = Math.ceil(bpp / 8);\n    var i, di, type = data[off], x = 0;\n    if (type > 1)\n      data[off] = [0, 0, 1][type - 2];\n    if (type == 3)\n      for (x = bpp; x < bpl; x++)\n        data[x + 1] = data[x + 1] + (data[x + 1 - bpp] >>> 1) & 255;\n    for (var y = 0; y < h; y++) {\n      i = off + y * bpl;\n      di = i + y + 1;\n      type = data[di - 1];\n      x = 0;\n      if (type == 0) {\n        for (; x < bpl; x++)\n          data[i + x] = data[di + x];\n      } else if (type == 1) {\n        for (; x < bpp; x++)\n          data[i + x] = data[di + x];\n        for (; x < bpl; x++)\n          data[i + x] = data[di + x] + data[i + x - bpp];\n      } else if (type == 2) {\n        for (; x < bpl; x++)\n          data[i + x] = data[di + x] + data[i + x - bpl];\n      } else if (type == 3) {\n        for (; x < bpp; x++)\n          data[i + x] = data[di + x] + (data[i + x - bpl] >>> 1);\n        for (; x < bpl; x++)\n          data[i + x] = data[di + x] + (data[i + x - bpl] + data[i + x - bpp] >>> 1);\n      } else {\n        for (; x < bpp; x++)\n          data[i + x] = data[di + x] + paeth(0, data[i + x - bpl], 0);\n        for (; x < bpl; x++) {\n          data[i + x] = data[di + x] + paeth(data[i + x - bpp], data[i + x - bpl], data[i + x - bpp - bpl]);\n        }\n      }\n    }\n    return data;\n  };\n  UPNG.decode._paeth = function(a, b, c) {\n    var p = a + b - c, pa = p - a, pb = p - b, pc = p - c;\n    if (pa * pa <= pb * pb && pa * pa <= pc * pc)\n      return a;\n    else if (pb * pb <= pc * pc)\n      return b;\n    return c;\n  };\n  UPNG.decode._IHDR = function(data, offset, out) {\n    var bin = UPNG._bin;\n    out.width = bin.readUint(data, offset);\n    offset += 4;\n    out.height = bin.readUint(data, offset);\n    offset += 4;\n    out.depth = data[offset];\n    offset++;\n    out.ctype = data[offset];\n    offset++;\n    out.compress = data[offset];\n    offset++;\n    out.filter = data[offset];\n    offset++;\n    out.interlace = data[offset];\n    offset++;\n  };\n  UPNG._bin = {\n    nextZero: function(data, p) {\n      while (data[p] != 0)\n        p++;\n      return p;\n    },\n    readUshort: function(buff, p) {\n      return buff[p] << 8 | buff[p + 1];\n    },\n    writeUshort: function(buff, p, n) {\n      buff[p] = n >> 8 & 255;\n      buff[p + 1] = n & 255;\n    },\n    readUint: function(buff, p) {\n      return buff[p] * (256 * 256 * 256) + (buff[p + 1] << 16 | buff[p + 2] << 8 | buff[p + 3]);\n    },\n    writeUint: function(buff, p, n) {\n      buff[p] = n >> 24 & 255;\n      buff[p + 1] = n >> 16 & 255;\n      buff[p + 2] = n >> 8 & 255;\n      buff[p + 3] = n & 255;\n    },\n    readASCII: function(buff, p, l) {\n      var s = \"\";\n      for (var i = 0; i < l; i++)\n        s += String.fromCharCode(buff[p + i]);\n      return s;\n    },\n    writeASCII: function(data, p, s) {\n      for (var i = 0; i < s.length; i++)\n        data[p + i] = s.charCodeAt(i);\n    },\n    readBytes: function(buff, p, l) {\n      var arr = [];\n      for (var i = 0; i < l; i++)\n        arr.push(buff[p + i]);\n      return arr;\n    },\n    pad: function(n) {\n      return n.length < 2 ? \"0\" + n : n;\n    },\n    readUTF8: function(buff, p, l) {\n      var s = \"\", ns;\n      for (var i = 0; i < l; i++)\n        s += \"%\" + UPNG._bin.pad(buff[p + i].toString(16));\n      try {\n        ns = decodeURIComponent(s);\n      } catch (e) {\n        return UPNG._bin.readASCII(buff, p, l);\n      }\n      return ns;\n    }\n  };\n  UPNG._copyTile = function(sb, sw, sh, tb, tw, th, xoff, yoff, mode) {\n    var w = Math.min(sw, tw), h = Math.min(sh, th);\n    var si = 0, ti = 0;\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        if (xoff >= 0 && yoff >= 0) {\n          si = y * sw + x << 2;\n          ti = (yoff + y) * tw + xoff + x << 2;\n        } else {\n          si = (-yoff + y) * sw - xoff + x << 2;\n          ti = y * tw + x << 2;\n        }\n        if (mode == 0) {\n          tb[ti] = sb[si];\n          tb[ti + 1] = sb[si + 1];\n          tb[ti + 2] = sb[si + 2];\n          tb[ti + 3] = sb[si + 3];\n        } else if (mode == 1) {\n          var fa = sb[si + 3] * (1 / 255), fr = sb[si] * fa, fg = sb[si + 1] * fa, fb = sb[si + 2] * fa;\n          var ba = tb[ti + 3] * (1 / 255), br = tb[ti] * ba, bg = tb[ti + 1] * ba, bb = tb[ti + 2] * ba;\n          var ifa = 1 - fa, oa = fa + ba * ifa, ioa = oa == 0 ? 0 : 1 / oa;\n          tb[ti + 3] = 255 * oa;\n          tb[ti + 0] = (fr + br * ifa) * ioa;\n          tb[ti + 1] = (fg + bg * ifa) * ioa;\n          tb[ti + 2] = (fb + bb * ifa) * ioa;\n        } else if (mode == 2) {\n          var fa = sb[si + 3], fr = sb[si], fg = sb[si + 1], fb = sb[si + 2];\n          var ba = tb[ti + 3], br = tb[ti], bg = tb[ti + 1], bb = tb[ti + 2];\n          if (fa == ba && fr == br && fg == bg && fb == bb) {\n            tb[ti] = 0;\n            tb[ti + 1] = 0;\n            tb[ti + 2] = 0;\n            tb[ti + 3] = 0;\n          } else {\n            tb[ti] = fr;\n            tb[ti + 1] = fg;\n            tb[ti + 2] = fb;\n            tb[ti + 3] = fa;\n          }\n        } else if (mode == 3) {\n          var fa = sb[si + 3], fr = sb[si], fg = sb[si + 1], fb = sb[si + 2];\n          var ba = tb[ti + 3], br = tb[ti], bg = tb[ti + 1], bb = tb[ti + 2];\n          if (fa == ba && fr == br && fg == bg && fb == bb)\n            continue;\n          if (fa < 220 && ba > 20)\n            return false;\n        }\n      }\n    }\n    return true;\n  };\n}\nclass RGBMLoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager);\n    this.type = HalfFloatType;\n    this.maxRange = 7;\n  }\n  setDataType(value) {\n    this.type = value;\n    return this;\n  }\n  setMaxRange(value) {\n    this.maxRange = value;\n    return this;\n  }\n  loadCubemap(urls, onLoad, onProgress, onError) {\n    const texture = new CubeTexture();\n    let loaded = 0;\n    const scope = this;\n    function loadTexture(i) {\n      scope.load(\n        urls[i],\n        function(image) {\n          texture.images[i] = image;\n          loaded++;\n          if (loaded === 6) {\n            texture.needsUpdate = true;\n            if (onLoad)\n              onLoad(texture);\n          }\n        },\n        void 0,\n        onError\n      );\n    }\n    for (let i = 0; i < urls.length; ++i) {\n      loadTexture(i);\n    }\n    texture.type = this.type;\n    texture.format = RGBAFormat;\n    texture.minFilter = LinearFilter;\n    texture.generateMipmaps = false;\n    return texture;\n  }\n  parse(buffer) {\n    init();\n    const img = UPNG.decode(buffer);\n    const rgba = UPNG.toRGBA8(img)[0];\n    const data = new Uint8Array(rgba);\n    const size = img.width * img.height * 4;\n    const output = this.type === HalfFloatType ? new Uint16Array(size) : new Float32Array(size);\n    for (let i = 0; i < data.length; i += 4) {\n      const r = data[i + 0] / 255;\n      const g = data[i + 1] / 255;\n      const b = data[i + 2] / 255;\n      const a = data[i + 3] / 255;\n      if (this.type === HalfFloatType) {\n        output[i + 0] = DataUtils.toHalfFloat(Math.min(r * a * this.maxRange, 65504));\n        output[i + 1] = DataUtils.toHalfFloat(Math.min(g * a * this.maxRange, 65504));\n        output[i + 2] = DataUtils.toHalfFloat(Math.min(b * a * this.maxRange, 65504));\n        output[i + 3] = DataUtils.toHalfFloat(1);\n      } else {\n        output[i + 0] = r * a * this.maxRange;\n        output[i + 1] = g * a * this.maxRange;\n        output[i + 2] = b * a * this.maxRange;\n        output[i + 3] = 1;\n      }\n    }\n    return {\n      width: img.width,\n      height: img.height,\n      data: output,\n      format: RGBAFormat,\n      type: this.type,\n      flipY: true\n    };\n  }\n}\nexport {\n  RGBMLoader\n};\n"]},"metadata":{},"sourceType":"module"}