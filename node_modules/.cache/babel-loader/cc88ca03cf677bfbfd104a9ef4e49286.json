{"ast":null,"code":"import _regeneratorRuntime from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nvar __defProp = Object.defineProperty;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __publicField = function __publicField(obj, key, value) {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n  return value;\n};\n\nvar _VRButton = /*#__PURE__*/function () {\n  function _VRButton() {\n    _classCallCheck(this, _VRButton);\n  }\n\n  _createClass(_VRButton, null, [{\n    key: \"createButton\",\n    value: function createButton(renderer) {\n      var sessionInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var button = document.createElement(\"button\");\n\n      function showEnterVR() {\n        var currentSession = null;\n\n        function onSessionStarted(_x) {\n          return _onSessionStarted.apply(this, arguments);\n        }\n\n        function _onSessionStarted() {\n          _onSessionStarted = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(session) {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    session.addEventListener(\"end\", onSessionEnded);\n                    _context.next = 3;\n                    return renderer.xr.setSession(session);\n\n                  case 3:\n                    button.textContent = \"EXIT VR\";\n                    currentSession = session;\n\n                  case 5:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n          return _onSessionStarted.apply(this, arguments);\n        }\n\n        function onSessionEnded() {\n          currentSession.removeEventListener(\"end\", onSessionEnded);\n          button.textContent = \"ENTER VR\";\n          currentSession = null;\n        }\n\n        button.style.display = \"\";\n        button.style.cursor = \"pointer\";\n        button.style.left = \"calc(50% - 50px)\";\n        button.style.width = \"100px\";\n        button.textContent = \"ENTER VR\";\n\n        button.onmouseenter = function () {\n          button.style.opacity = \"1.0\";\n        };\n\n        button.onmouseleave = function () {\n          button.style.opacity = \"0.5\";\n        };\n\n        button.onclick = function () {\n          var _a;\n\n          if (currentSession === null) {\n            var optionalFeatures = [sessionInit.optionalFeatures, \"local-floor\", \"bounded-floor\", \"hand-tracking\"].flat().filter(Boolean);\n            (_a = navigator.xr) == null ? void 0 : _a.requestSession(\"immersive-vr\", _objectSpread(_objectSpread({}, sessionInit), {}, {\n              optionalFeatures: optionalFeatures\n            })).then(onSessionStarted);\n          } else {\n            currentSession.end();\n          }\n        };\n      }\n\n      function disableButton() {\n        button.style.display = \"\";\n        button.style.cursor = \"auto\";\n        button.style.left = \"calc(50% - 75px)\";\n        button.style.width = \"150px\";\n        button.onmouseenter = null;\n        button.onmouseleave = null;\n        button.onclick = null;\n      }\n\n      function showWebXRNotFound() {\n        disableButton();\n        button.textContent = \"VR NOT SUPPORTED\";\n      }\n\n      function stylizeElement(element) {\n        element.style.position = \"absolute\";\n        element.style.bottom = \"20px\";\n        element.style.padding = \"12px 6px\";\n        element.style.border = \"1px solid #fff\";\n        element.style.borderRadius = \"4px\";\n        element.style.background = \"rgba(0,0,0,0.1)\";\n        element.style.color = \"#fff\";\n        element.style.font = \"normal 13px sans-serif\";\n        element.style.textAlign = \"center\";\n        element.style.opacity = \"0.5\";\n        element.style.outline = \"none\";\n        element.style.zIndex = \"999\";\n      }\n\n      if (\"xr\" in navigator) {\n        stylizeElement(button);\n        button.id = \"VRButton\";\n        button.style.display = \"none\";\n        navigator.xr.isSessionSupported(\"immersive-vr\").then(function (supported) {\n          supported ? showEnterVR() : showWebXRNotFound();\n\n          if (supported && _VRButton.xrSessionIsGranted) {\n            button.click();\n          }\n        });\n        return button;\n      } else {\n        var message = document.createElement(\"a\");\n\n        if (window.isSecureContext === false) {\n          message.href = document.location.href.replace(/^http:/, \"https:\");\n          message.innerHTML = \"WEBXR NEEDS HTTPS\";\n        } else {\n          message.href = \"https://immersiveweb.dev/\";\n          message.innerHTML = \"WEBXR NOT AVAILABLE\";\n        }\n\n        message.style.left = \"calc(50% - 90px)\";\n        message.style.width = \"180px\";\n        message.style.textDecoration = \"none\";\n        stylizeElement(message);\n        return message;\n      }\n    }\n  }, {\n    key: \"registerSessionGrantedListener\",\n    value: function registerSessionGrantedListener() {\n      if (\"xr\" in navigator) {\n        ;\n        navigator.xr.addEventListener(\"sessiongranted\", function () {\n          _VRButton.xrSessionIsGranted = true;\n        });\n      }\n    }\n  }]);\n\n  return _VRButton;\n}();\n\nvar VRButton = _VRButton;\n\n__publicField(VRButton, \"xrSessionIsGranted\", false);\n\nexport { VRButton };","map":{"version":3,"sources":["/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/three-stdlib/webxr/VRButton.js"],"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","_VRButton","renderer","sessionInit","button","document","createElement","showEnterVR","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","xr","setSession","textContent","removeEventListener","style","display","cursor","left","width","onmouseenter","opacity","onmouseleave","onclick","_a","optionalFeatures","flat","filter","Boolean","navigator","requestSession","then","end","disableButton","showWebXRNotFound","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","outline","zIndex","id","isSessionSupported","supported","xrSessionIsGranted","click","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration","VRButton"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _VRButton = class {\n  static createButton(renderer, sessionInit = {}) {\n    const button = document.createElement(\"button\");\n    function showEnterVR() {\n      let currentSession = null;\n      async function onSessionStarted(session) {\n        session.addEventListener(\"end\", onSessionEnded);\n        await renderer.xr.setSession(session);\n        button.textContent = \"EXIT VR\";\n        currentSession = session;\n      }\n      function onSessionEnded() {\n        currentSession.removeEventListener(\"end\", onSessionEnded);\n        button.textContent = \"ENTER VR\";\n        currentSession = null;\n      }\n      button.style.display = \"\";\n      button.style.cursor = \"pointer\";\n      button.style.left = \"calc(50% - 50px)\";\n      button.style.width = \"100px\";\n      button.textContent = \"ENTER VR\";\n      button.onmouseenter = () => {\n        button.style.opacity = \"1.0\";\n      };\n      button.onmouseleave = () => {\n        button.style.opacity = \"0.5\";\n      };\n      button.onclick = () => {\n        var _a;\n        if (currentSession === null) {\n          const optionalFeatures = [sessionInit.optionalFeatures, \"local-floor\", \"bounded-floor\", \"hand-tracking\"].flat().filter(Boolean);\n          (_a = navigator.xr) == null ? void 0 : _a.requestSession(\"immersive-vr\", { ...sessionInit, optionalFeatures }).then(onSessionStarted);\n        } else {\n          currentSession.end();\n        }\n      };\n    }\n    function disableButton() {\n      button.style.display = \"\";\n      button.style.cursor = \"auto\";\n      button.style.left = \"calc(50% - 75px)\";\n      button.style.width = \"150px\";\n      button.onmouseenter = null;\n      button.onmouseleave = null;\n      button.onclick = null;\n    }\n    function showWebXRNotFound() {\n      disableButton();\n      button.textContent = \"VR NOT SUPPORTED\";\n    }\n    function stylizeElement(element) {\n      element.style.position = \"absolute\";\n      element.style.bottom = \"20px\";\n      element.style.padding = \"12px 6px\";\n      element.style.border = \"1px solid #fff\";\n      element.style.borderRadius = \"4px\";\n      element.style.background = \"rgba(0,0,0,0.1)\";\n      element.style.color = \"#fff\";\n      element.style.font = \"normal 13px sans-serif\";\n      element.style.textAlign = \"center\";\n      element.style.opacity = \"0.5\";\n      element.style.outline = \"none\";\n      element.style.zIndex = \"999\";\n    }\n    if (\"xr\" in navigator) {\n      stylizeElement(button);\n      button.id = \"VRButton\";\n      button.style.display = \"none\";\n      navigator.xr.isSessionSupported(\"immersive-vr\").then((supported) => {\n        supported ? showEnterVR() : showWebXRNotFound();\n        if (supported && _VRButton.xrSessionIsGranted) {\n          button.click();\n        }\n      });\n      return button;\n    } else {\n      const message = document.createElement(\"a\");\n      if (window.isSecureContext === false) {\n        message.href = document.location.href.replace(/^http:/, \"https:\");\n        message.innerHTML = \"WEBXR NEEDS HTTPS\";\n      } else {\n        message.href = \"https://immersiveweb.dev/\";\n        message.innerHTML = \"WEBXR NOT AVAILABLE\";\n      }\n      message.style.left = \"calc(50% - 90px)\";\n      message.style.width = \"180px\";\n      message.style.textDecoration = \"none\";\n      stylizeElement(message);\n      return message;\n    }\n  }\n  static registerSessionGrantedListener() {\n    if (\"xr\" in navigator) {\n      ;\n      navigator.xr.addEventListener(\"sessiongranted\", () => {\n        _VRButton.xrSessionIsGranted = true;\n      });\n    }\n  }\n};\nlet VRButton = _VRButton;\n__publicField(VRButton, \"xrSessionIsGranted\", false);\nexport {\n  VRButton\n};\n"]},"metadata":{},"sourceType":"module"}