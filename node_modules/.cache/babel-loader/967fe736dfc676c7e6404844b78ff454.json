{"ast":null,"code":"import { Vector3, Color, Vector2, Vector4, Box3, Matrix4, Frustum, Matrix3, DoubleSide } from \"three\";\n\nclass RenderableObject {\n  constructor() {\n    this.id = 0;\n    this.object = null;\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n\n}\n\nclass RenderableFace {\n  constructor() {\n    this.id = 0;\n    this.v1 = new RenderableVertex();\n    this.v2 = new RenderableVertex();\n    this.v3 = new RenderableVertex();\n    this.normalModel = new Vector3();\n    this.vertexNormalsModel = [new Vector3(), new Vector3(), new Vector3()];\n    this.vertexNormalsLength = 0;\n    this.color = new Color();\n    this.material = null;\n    this.uvs = [new Vector2(), new Vector2(), new Vector2()];\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n\n}\n\nclass RenderableVertex {\n  constructor() {\n    this.position = new Vector3();\n    this.positionWorld = new Vector3();\n    this.positionScreen = new Vector4();\n    this.visible = true;\n  }\n\n  copy(vertex) {\n    this.positionWorld.copy(vertex.positionWorld);\n    this.positionScreen.copy(vertex.positionScreen);\n  }\n\n}\n\nclass RenderableLine {\n  constructor() {\n    this.id = 0;\n    this.v1 = new RenderableVertex();\n    this.v2 = new RenderableVertex();\n    this.vertexColors = [new Color(), new Color()];\n    this.material = null;\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n\n}\n\nclass RenderableSprite {\n  constructor() {\n    this.id = 0;\n    this.object = null;\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.rotation = 0;\n    this.scale = new Vector2();\n    this.material = null;\n    this.renderOrder = 0;\n  }\n\n}\n\nclass Projector {\n  constructor() {\n    let _object,\n        _objectCount,\n        _objectPoolLength = 0,\n        _vertex,\n        _vertexCount,\n        _vertexPoolLength = 0,\n        _face,\n        _faceCount,\n        _facePoolLength = 0,\n        _line,\n        _lineCount,\n        _linePoolLength = 0,\n        _sprite,\n        _spriteCount,\n        _spritePoolLength = 0,\n        _modelMatrix;\n\n    const _renderData = {\n      objects: [],\n      lights: [],\n      elements: []\n    },\n          _vector3 = new Vector3(),\n          _vector4 = new Vector4(),\n          _clipBox = new Box3(new Vector3(-1, -1, -1), new Vector3(1, 1, 1)),\n          _boundingBox = new Box3(),\n          _points3 = new Array(3),\n          _viewMatrix = new Matrix4(),\n          _viewProjectionMatrix = new Matrix4(),\n          _modelViewProjectionMatrix = new Matrix4(),\n          _frustum = new Frustum(),\n          _objectPool = [],\n          _vertexPool = [],\n          _facePool = [],\n          _linePool = [],\n          _spritePool = [];\n\n    function RenderList() {\n      const normals = [];\n      const colors = [];\n      const uvs = [];\n      let object = null;\n      const normalMatrix = new Matrix3();\n\n      function setObject(value) {\n        object = value;\n        normalMatrix.getNormalMatrix(object.matrixWorld);\n        normals.length = 0;\n        colors.length = 0;\n        uvs.length = 0;\n      }\n\n      function projectVertex(vertex) {\n        const position = vertex.position;\n        const positionWorld = vertex.positionWorld;\n        const positionScreen = vertex.positionScreen;\n        positionWorld.copy(position).applyMatrix4(_modelMatrix);\n        positionScreen.copy(positionWorld).applyMatrix4(_viewProjectionMatrix);\n        const invW = 1 / positionScreen.w;\n        positionScreen.x *= invW;\n        positionScreen.y *= invW;\n        positionScreen.z *= invW;\n        vertex.visible = positionScreen.x >= -1 && positionScreen.x <= 1 && positionScreen.y >= -1 && positionScreen.y <= 1 && positionScreen.z >= -1 && positionScreen.z <= 1;\n      }\n\n      function pushVertex(x, y, z) {\n        _vertex = getNextVertexInPool();\n\n        _vertex.position.set(x, y, z);\n\n        projectVertex(_vertex);\n      }\n\n      function pushNormal(x, y, z) {\n        normals.push(x, y, z);\n      }\n\n      function pushColor(r, g, b) {\n        colors.push(r, g, b);\n      }\n\n      function pushUv(x, y) {\n        uvs.push(x, y);\n      }\n\n      function checkTriangleVisibility(v1, v2, v3) {\n        if (v1.visible === true || v2.visible === true || v3.visible === true) return true;\n        _points3[0] = v1.positionScreen;\n        _points3[1] = v2.positionScreen;\n        _points3[2] = v3.positionScreen;\n        return _clipBox.intersectsBox(_boundingBox.setFromPoints(_points3));\n      }\n\n      function checkBackfaceCulling(v1, v2, v3) {\n        return (v3.positionScreen.x - v1.positionScreen.x) * (v2.positionScreen.y - v1.positionScreen.y) - (v3.positionScreen.y - v1.positionScreen.y) * (v2.positionScreen.x - v1.positionScreen.x) < 0;\n      }\n\n      function pushLine(a, b) {\n        const v1 = _vertexPool[a];\n        const v2 = _vertexPool[b];\n        v1.positionScreen.copy(v1.position).applyMatrix4(_modelViewProjectionMatrix);\n        v2.positionScreen.copy(v2.position).applyMatrix4(_modelViewProjectionMatrix);\n\n        if (clipLine(v1.positionScreen, v2.positionScreen) === true) {\n          v1.positionScreen.multiplyScalar(1 / v1.positionScreen.w);\n          v2.positionScreen.multiplyScalar(1 / v2.positionScreen.w);\n          _line = getNextLineInPool();\n          _line.id = object.id;\n\n          _line.v1.copy(v1);\n\n          _line.v2.copy(v2);\n\n          _line.z = Math.max(v1.positionScreen.z, v2.positionScreen.z);\n          _line.renderOrder = object.renderOrder;\n          _line.material = object.material;\n\n          if (object.material.vertexColors) {\n            _line.vertexColors[0].fromArray(colors, a * 3);\n\n            _line.vertexColors[1].fromArray(colors, b * 3);\n          }\n\n          _renderData.elements.push(_line);\n        }\n      }\n\n      function pushTriangle(a, b, c, material) {\n        const v1 = _vertexPool[a];\n        const v2 = _vertexPool[b];\n        const v3 = _vertexPool[c];\n        if (checkTriangleVisibility(v1, v2, v3) === false) return;\n\n        if (material.side === DoubleSide || checkBackfaceCulling(v1, v2, v3) === true) {\n          _face = getNextFaceInPool();\n          _face.id = object.id;\n\n          _face.v1.copy(v1);\n\n          _face.v2.copy(v2);\n\n          _face.v3.copy(v3);\n\n          _face.z = (v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z) / 3;\n          _face.renderOrder = object.renderOrder;\n\n          _vector3.subVectors(v3.position, v2.position);\n\n          _vector4.subVectors(v1.position, v2.position);\n\n          _vector3.cross(_vector4);\n\n          _face.normalModel.copy(_vector3);\n\n          _face.normalModel.applyMatrix3(normalMatrix).normalize();\n\n          for (let i = 0; i < 3; i++) {\n            const normal = _face.vertexNormalsModel[i];\n            normal.fromArray(normals, arguments[i] * 3);\n            normal.applyMatrix3(normalMatrix).normalize();\n            const uv = _face.uvs[i];\n            uv.fromArray(uvs, arguments[i] * 2);\n          }\n\n          _face.vertexNormalsLength = 3;\n          _face.material = material;\n\n          if (material.vertexColors) {\n            _face.color.fromArray(colors, a * 3);\n          }\n\n          _renderData.elements.push(_face);\n        }\n      }\n\n      return {\n        setObject,\n        projectVertex,\n        checkTriangleVisibility,\n        checkBackfaceCulling,\n        pushVertex,\n        pushNormal,\n        pushColor,\n        pushUv,\n        pushLine,\n        pushTriangle\n      };\n    }\n\n    const renderList = new RenderList();\n\n    function projectObject(object) {\n      if (object.visible === false) return;\n\n      if (object.isLight) {\n        _renderData.lights.push(object);\n      } else if (object.isMesh || object.isLine || object.isPoints) {\n        if (object.material.visible === false) return;\n        if (object.frustumCulled === true && _frustum.intersectsObject(object) === false) return;\n        addObject(object);\n      } else if (object.isSprite) {\n        if (object.material.visible === false) return;\n        if (object.frustumCulled === true && _frustum.intersectsSprite(object) === false) return;\n        addObject(object);\n      }\n\n      const children = object.children;\n\n      for (let i = 0, l = children.length; i < l; i++) {\n        projectObject(children[i]);\n      }\n    }\n\n    function addObject(object) {\n      _object = getNextObjectInPool();\n      _object.id = object.id;\n      _object.object = object;\n\n      _vector3.setFromMatrixPosition(object.matrixWorld);\n\n      _vector3.applyMatrix4(_viewProjectionMatrix);\n\n      _object.z = _vector3.z;\n      _object.renderOrder = object.renderOrder;\n\n      _renderData.objects.push(_object);\n    }\n\n    this.projectScene = function (scene, camera, sortObjects, sortElements) {\n      _faceCount = 0;\n      _lineCount = 0;\n      _spriteCount = 0;\n      _renderData.elements.length = 0;\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n\n      _viewMatrix.copy(camera.matrixWorldInverse);\n\n      _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\n\n      _frustum.setFromProjectionMatrix(_viewProjectionMatrix);\n\n      _objectCount = 0;\n      _renderData.objects.length = 0;\n      _renderData.lights.length = 0;\n      projectObject(scene);\n\n      if (sortObjects === true) {\n        _renderData.objects.sort(painterSort);\n      }\n\n      const objects = _renderData.objects;\n\n      for (let o = 0, ol = objects.length; o < ol; o++) {\n        const object = objects[o].object;\n        const geometry = object.geometry;\n        renderList.setObject(object);\n        _modelMatrix = object.matrixWorld;\n        _vertexCount = 0;\n\n        if (object.isMesh) {\n          let material = object.material;\n          const isMultiMaterial = Array.isArray(material);\n          const attributes = geometry.attributes;\n          const groups = geometry.groups;\n          if (attributes.position === void 0) continue;\n          const positions = attributes.position.array;\n\n          for (let i = 0, l = positions.length; i < l; i += 3) {\n            let x = positions[i];\n            let y = positions[i + 1];\n            let z = positions[i + 2];\n            const morphTargets = geometry.morphAttributes.position;\n\n            if (morphTargets !== void 0) {\n              const morphTargetsRelative = geometry.morphTargetsRelative;\n              const morphInfluences = object.morphTargetInfluences;\n\n              for (let t = 0, tl = morphTargets.length; t < tl; t++) {\n                const influence = morphInfluences[t];\n                if (influence === 0) continue;\n                const target = morphTargets[t];\n\n                if (morphTargetsRelative) {\n                  x += target.getX(i / 3) * influence;\n                  y += target.getY(i / 3) * influence;\n                  z += target.getZ(i / 3) * influence;\n                } else {\n                  x += (target.getX(i / 3) - positions[i]) * influence;\n                  y += (target.getY(i / 3) - positions[i + 1]) * influence;\n                  z += (target.getZ(i / 3) - positions[i + 2]) * influence;\n                }\n              }\n            }\n\n            renderList.pushVertex(x, y, z);\n          }\n\n          if (attributes.normal !== void 0) {\n            const normals = attributes.normal.array;\n\n            for (let i = 0, l = normals.length; i < l; i += 3) {\n              renderList.pushNormal(normals[i], normals[i + 1], normals[i + 2]);\n            }\n          }\n\n          if (attributes.color !== void 0) {\n            const colors = attributes.color.array;\n\n            for (let i = 0, l = colors.length; i < l; i += 3) {\n              renderList.pushColor(colors[i], colors[i + 1], colors[i + 2]);\n            }\n          }\n\n          if (attributes.uv !== void 0) {\n            const uvs = attributes.uv.array;\n\n            for (let i = 0, l = uvs.length; i < l; i += 2) {\n              renderList.pushUv(uvs[i], uvs[i + 1]);\n            }\n          }\n\n          if (geometry.index !== null) {\n            const indices = geometry.index.array;\n\n            if (groups.length > 0) {\n              for (let g = 0; g < groups.length; g++) {\n                const group = groups[g];\n                material = isMultiMaterial === true ? object.material[group.materialIndex] : object.material;\n                if (material === void 0) continue;\n\n                for (let i = group.start, l = group.start + group.count; i < l; i += 3) {\n                  renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2], material);\n                }\n              }\n            } else {\n              for (let i = 0, l = indices.length; i < l; i += 3) {\n                renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2], material);\n              }\n            }\n          } else {\n            if (groups.length > 0) {\n              for (let g = 0; g < groups.length; g++) {\n                const group = groups[g];\n                material = isMultiMaterial === true ? object.material[group.materialIndex] : object.material;\n                if (material === void 0) continue;\n\n                for (let i = group.start, l = group.start + group.count; i < l; i += 3) {\n                  renderList.pushTriangle(i, i + 1, i + 2, material);\n                }\n              }\n            } else {\n              for (let i = 0, l = positions.length / 3; i < l; i += 3) {\n                renderList.pushTriangle(i, i + 1, i + 2, material);\n              }\n            }\n          }\n        } else if (object.isLine) {\n          _modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix, _modelMatrix);\n\n          const attributes = geometry.attributes;\n\n          if (attributes.position !== void 0) {\n            const positions = attributes.position.array;\n\n            for (let i = 0, l = positions.length; i < l; i += 3) {\n              renderList.pushVertex(positions[i], positions[i + 1], positions[i + 2]);\n            }\n\n            if (attributes.color !== void 0) {\n              const colors = attributes.color.array;\n\n              for (let i = 0, l = colors.length; i < l; i += 3) {\n                renderList.pushColor(colors[i], colors[i + 1], colors[i + 2]);\n              }\n            }\n\n            if (geometry.index !== null) {\n              const indices = geometry.index.array;\n\n              for (let i = 0, l = indices.length; i < l; i += 2) {\n                renderList.pushLine(indices[i], indices[i + 1]);\n              }\n            } else {\n              const step = object.isLineSegments ? 2 : 1;\n\n              for (let i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n                renderList.pushLine(i, i + 1);\n              }\n            }\n          }\n        } else if (object.isPoints) {\n          _modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix, _modelMatrix);\n\n          const attributes = geometry.attributes;\n\n          if (attributes.position !== void 0) {\n            const positions = attributes.position.array;\n\n            for (let i = 0, l = positions.length; i < l; i += 3) {\n              _vector4.set(positions[i], positions[i + 1], positions[i + 2], 1);\n\n              _vector4.applyMatrix4(_modelViewProjectionMatrix);\n\n              pushPoint(_vector4, object, camera);\n            }\n          }\n        } else if (object.isSprite) {\n          object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n\n          _vector4.set(_modelMatrix.elements[12], _modelMatrix.elements[13], _modelMatrix.elements[14], 1);\n\n          _vector4.applyMatrix4(_viewProjectionMatrix);\n\n          pushPoint(_vector4, object, camera);\n        }\n      }\n\n      if (sortElements === true) {\n        _renderData.elements.sort(painterSort);\n      }\n\n      return _renderData;\n    };\n\n    function pushPoint(_vector42, object, camera) {\n      const invW = 1 / _vector42.w;\n      _vector42.z *= invW;\n\n      if (_vector42.z >= -1 && _vector42.z <= 1) {\n        _sprite = getNextSpriteInPool();\n        _sprite.id = object.id;\n        _sprite.x = _vector42.x * invW;\n        _sprite.y = _vector42.y * invW;\n        _sprite.z = _vector42.z;\n        _sprite.renderOrder = object.renderOrder;\n        _sprite.object = object;\n        _sprite.rotation = object.rotation;\n        _sprite.scale.x = object.scale.x * Math.abs(_sprite.x - (_vector42.x + camera.projectionMatrix.elements[0]) / (_vector42.w + camera.projectionMatrix.elements[12]));\n        _sprite.scale.y = object.scale.y * Math.abs(_sprite.y - (_vector42.y + camera.projectionMatrix.elements[5]) / (_vector42.w + camera.projectionMatrix.elements[13]));\n        _sprite.material = object.material;\n\n        _renderData.elements.push(_sprite);\n      }\n    }\n\n    function getNextObjectInPool() {\n      if (_objectCount === _objectPoolLength) {\n        const object = new RenderableObject();\n\n        _objectPool.push(object);\n\n        _objectPoolLength++;\n        _objectCount++;\n        return object;\n      }\n\n      return _objectPool[_objectCount++];\n    }\n\n    function getNextVertexInPool() {\n      if (_vertexCount === _vertexPoolLength) {\n        const vertex = new RenderableVertex();\n\n        _vertexPool.push(vertex);\n\n        _vertexPoolLength++;\n        _vertexCount++;\n        return vertex;\n      }\n\n      return _vertexPool[_vertexCount++];\n    }\n\n    function getNextFaceInPool() {\n      if (_faceCount === _facePoolLength) {\n        const face = new RenderableFace();\n\n        _facePool.push(face);\n\n        _facePoolLength++;\n        _faceCount++;\n        return face;\n      }\n\n      return _facePool[_faceCount++];\n    }\n\n    function getNextLineInPool() {\n      if (_lineCount === _linePoolLength) {\n        const line = new RenderableLine();\n\n        _linePool.push(line);\n\n        _linePoolLength++;\n        _lineCount++;\n        return line;\n      }\n\n      return _linePool[_lineCount++];\n    }\n\n    function getNextSpriteInPool() {\n      if (_spriteCount === _spritePoolLength) {\n        const sprite = new RenderableSprite();\n\n        _spritePool.push(sprite);\n\n        _spritePoolLength++;\n        _spriteCount++;\n        return sprite;\n      }\n\n      return _spritePool[_spriteCount++];\n    }\n\n    function painterSort(a, b) {\n      if (a.renderOrder !== b.renderOrder) {\n        return a.renderOrder - b.renderOrder;\n      } else if (a.z !== b.z) {\n        return b.z - a.z;\n      } else if (a.id !== b.id) {\n        return a.id - b.id;\n      } else {\n        return 0;\n      }\n    }\n\n    function clipLine(s1, s2) {\n      let alpha1 = 0,\n          alpha2 = 1;\n      const bc1near = s1.z + s1.w,\n            bc2near = s2.z + s2.w,\n            bc1far = -s1.z + s1.w,\n            bc2far = -s2.z + s2.w;\n\n      if (bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0) {\n        return true;\n      } else if (bc1near < 0 && bc2near < 0 || bc1far < 0 && bc2far < 0) {\n        return false;\n      } else {\n        if (bc1near < 0) {\n          alpha1 = Math.max(alpha1, bc1near / (bc1near - bc2near));\n        } else if (bc2near < 0) {\n          alpha2 = Math.min(alpha2, bc1near / (bc1near - bc2near));\n        }\n\n        if (bc1far < 0) {\n          alpha1 = Math.max(alpha1, bc1far / (bc1far - bc2far));\n        } else if (bc2far < 0) {\n          alpha2 = Math.min(alpha2, bc1far / (bc1far - bc2far));\n        }\n\n        if (alpha2 < alpha1) {\n          return false;\n        } else {\n          s1.lerp(s2, alpha1);\n          s2.lerp(s1, 1 - alpha2);\n          return true;\n        }\n      }\n    }\n  }\n\n}\n\nexport { Projector, RenderableFace, RenderableLine, RenderableObject, RenderableSprite, RenderableVertex };","map":{"version":3,"sources":["/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/three-stdlib/renderers/Projector.js"],"names":["Vector3","Color","Vector2","Vector4","Box3","Matrix4","Frustum","Matrix3","DoubleSide","RenderableObject","constructor","id","object","z","renderOrder","RenderableFace","v1","RenderableVertex","v2","v3","normalModel","vertexNormalsModel","vertexNormalsLength","color","material","uvs","position","positionWorld","positionScreen","visible","copy","vertex","RenderableLine","vertexColors","RenderableSprite","x","y","rotation","scale","Projector","_object","_objectCount","_objectPoolLength","_vertex","_vertexCount","_vertexPoolLength","_face","_faceCount","_facePoolLength","_line","_lineCount","_linePoolLength","_sprite","_spriteCount","_spritePoolLength","_modelMatrix","_renderData","objects","lights","elements","_vector3","_vector4","_clipBox","_boundingBox","_points3","Array","_viewMatrix","_viewProjectionMatrix","_modelViewProjectionMatrix","_frustum","_objectPool","_vertexPool","_facePool","_linePool","_spritePool","RenderList","normals","colors","normalMatrix","setObject","value","getNormalMatrix","matrixWorld","length","projectVertex","applyMatrix4","invW","w","pushVertex","getNextVertexInPool","set","pushNormal","push","pushColor","r","g","b","pushUv","checkTriangleVisibility","intersectsBox","setFromPoints","checkBackfaceCulling","pushLine","a","clipLine","multiplyScalar","getNextLineInPool","Math","max","fromArray","pushTriangle","c","side","getNextFaceInPool","subVectors","cross","applyMatrix3","normalize","i","normal","arguments","uv","renderList","projectObject","isLight","isMesh","isLine","isPoints","frustumCulled","intersectsObject","addObject","isSprite","intersectsSprite","children","l","getNextObjectInPool","setFromMatrixPosition","projectScene","scene","camera","sortObjects","sortElements","matrixWorldAutoUpdate","updateMatrixWorld","parent","matrixWorldInverse","multiplyMatrices","projectionMatrix","setFromProjectionMatrix","sort","painterSort","o","ol","geometry","isMultiMaterial","isArray","attributes","groups","positions","array","morphTargets","morphAttributes","morphTargetsRelative","morphInfluences","morphTargetInfluences","t","tl","influence","target","getX","getY","getZ","index","indices","group","materialIndex","start","count","step","isLineSegments","pushPoint","modelViewMatrix","_vector42","getNextSpriteInPool","abs","face","line","sprite","s1","s2","alpha1","alpha2","bc1near","bc2near","bc1far","bc2far","min","lerp"],"mappings":"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","sourcesContent":["import { Vector3, Color, Vector2, Vector4, Box3, Matrix4, Frustum, Matrix3, DoubleSide } from \"three\";\nclass RenderableObject {\n  constructor() {\n    this.id = 0;\n    this.object = null;\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n}\nclass RenderableFace {\n  constructor() {\n    this.id = 0;\n    this.v1 = new RenderableVertex();\n    this.v2 = new RenderableVertex();\n    this.v3 = new RenderableVertex();\n    this.normalModel = new Vector3();\n    this.vertexNormalsModel = [new Vector3(), new Vector3(), new Vector3()];\n    this.vertexNormalsLength = 0;\n    this.color = new Color();\n    this.material = null;\n    this.uvs = [new Vector2(), new Vector2(), new Vector2()];\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n}\nclass RenderableVertex {\n  constructor() {\n    this.position = new Vector3();\n    this.positionWorld = new Vector3();\n    this.positionScreen = new Vector4();\n    this.visible = true;\n  }\n  copy(vertex) {\n    this.positionWorld.copy(vertex.positionWorld);\n    this.positionScreen.copy(vertex.positionScreen);\n  }\n}\nclass RenderableLine {\n  constructor() {\n    this.id = 0;\n    this.v1 = new RenderableVertex();\n    this.v2 = new RenderableVertex();\n    this.vertexColors = [new Color(), new Color()];\n    this.material = null;\n    this.z = 0;\n    this.renderOrder = 0;\n  }\n}\nclass RenderableSprite {\n  constructor() {\n    this.id = 0;\n    this.object = null;\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.rotation = 0;\n    this.scale = new Vector2();\n    this.material = null;\n    this.renderOrder = 0;\n  }\n}\nclass Projector {\n  constructor() {\n    let _object, _objectCount, _objectPoolLength = 0, _vertex, _vertexCount, _vertexPoolLength = 0, _face, _faceCount, _facePoolLength = 0, _line, _lineCount, _linePoolLength = 0, _sprite, _spriteCount, _spritePoolLength = 0, _modelMatrix;\n    const _renderData = { objects: [], lights: [], elements: [] }, _vector3 = new Vector3(), _vector4 = new Vector4(), _clipBox = new Box3(new Vector3(-1, -1, -1), new Vector3(1, 1, 1)), _boundingBox = new Box3(), _points3 = new Array(3), _viewMatrix = new Matrix4(), _viewProjectionMatrix = new Matrix4(), _modelViewProjectionMatrix = new Matrix4(), _frustum = new Frustum(), _objectPool = [], _vertexPool = [], _facePool = [], _linePool = [], _spritePool = [];\n    function RenderList() {\n      const normals = [];\n      const colors = [];\n      const uvs = [];\n      let object = null;\n      const normalMatrix = new Matrix3();\n      function setObject(value) {\n        object = value;\n        normalMatrix.getNormalMatrix(object.matrixWorld);\n        normals.length = 0;\n        colors.length = 0;\n        uvs.length = 0;\n      }\n      function projectVertex(vertex) {\n        const position = vertex.position;\n        const positionWorld = vertex.positionWorld;\n        const positionScreen = vertex.positionScreen;\n        positionWorld.copy(position).applyMatrix4(_modelMatrix);\n        positionScreen.copy(positionWorld).applyMatrix4(_viewProjectionMatrix);\n        const invW = 1 / positionScreen.w;\n        positionScreen.x *= invW;\n        positionScreen.y *= invW;\n        positionScreen.z *= invW;\n        vertex.visible = positionScreen.x >= -1 && positionScreen.x <= 1 && positionScreen.y >= -1 && positionScreen.y <= 1 && positionScreen.z >= -1 && positionScreen.z <= 1;\n      }\n      function pushVertex(x, y, z) {\n        _vertex = getNextVertexInPool();\n        _vertex.position.set(x, y, z);\n        projectVertex(_vertex);\n      }\n      function pushNormal(x, y, z) {\n        normals.push(x, y, z);\n      }\n      function pushColor(r, g, b) {\n        colors.push(r, g, b);\n      }\n      function pushUv(x, y) {\n        uvs.push(x, y);\n      }\n      function checkTriangleVisibility(v1, v2, v3) {\n        if (v1.visible === true || v2.visible === true || v3.visible === true)\n          return true;\n        _points3[0] = v1.positionScreen;\n        _points3[1] = v2.positionScreen;\n        _points3[2] = v3.positionScreen;\n        return _clipBox.intersectsBox(_boundingBox.setFromPoints(_points3));\n      }\n      function checkBackfaceCulling(v1, v2, v3) {\n        return (v3.positionScreen.x - v1.positionScreen.x) * (v2.positionScreen.y - v1.positionScreen.y) - (v3.positionScreen.y - v1.positionScreen.y) * (v2.positionScreen.x - v1.positionScreen.x) < 0;\n      }\n      function pushLine(a, b) {\n        const v1 = _vertexPool[a];\n        const v2 = _vertexPool[b];\n        v1.positionScreen.copy(v1.position).applyMatrix4(_modelViewProjectionMatrix);\n        v2.positionScreen.copy(v2.position).applyMatrix4(_modelViewProjectionMatrix);\n        if (clipLine(v1.positionScreen, v2.positionScreen) === true) {\n          v1.positionScreen.multiplyScalar(1 / v1.positionScreen.w);\n          v2.positionScreen.multiplyScalar(1 / v2.positionScreen.w);\n          _line = getNextLineInPool();\n          _line.id = object.id;\n          _line.v1.copy(v1);\n          _line.v2.copy(v2);\n          _line.z = Math.max(v1.positionScreen.z, v2.positionScreen.z);\n          _line.renderOrder = object.renderOrder;\n          _line.material = object.material;\n          if (object.material.vertexColors) {\n            _line.vertexColors[0].fromArray(colors, a * 3);\n            _line.vertexColors[1].fromArray(colors, b * 3);\n          }\n          _renderData.elements.push(_line);\n        }\n      }\n      function pushTriangle(a, b, c, material) {\n        const v1 = _vertexPool[a];\n        const v2 = _vertexPool[b];\n        const v3 = _vertexPool[c];\n        if (checkTriangleVisibility(v1, v2, v3) === false)\n          return;\n        if (material.side === DoubleSide || checkBackfaceCulling(v1, v2, v3) === true) {\n          _face = getNextFaceInPool();\n          _face.id = object.id;\n          _face.v1.copy(v1);\n          _face.v2.copy(v2);\n          _face.v3.copy(v3);\n          _face.z = (v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z) / 3;\n          _face.renderOrder = object.renderOrder;\n          _vector3.subVectors(v3.position, v2.position);\n          _vector4.subVectors(v1.position, v2.position);\n          _vector3.cross(_vector4);\n          _face.normalModel.copy(_vector3);\n          _face.normalModel.applyMatrix3(normalMatrix).normalize();\n          for (let i = 0; i < 3; i++) {\n            const normal = _face.vertexNormalsModel[i];\n            normal.fromArray(normals, arguments[i] * 3);\n            normal.applyMatrix3(normalMatrix).normalize();\n            const uv = _face.uvs[i];\n            uv.fromArray(uvs, arguments[i] * 2);\n          }\n          _face.vertexNormalsLength = 3;\n          _face.material = material;\n          if (material.vertexColors) {\n            _face.color.fromArray(colors, a * 3);\n          }\n          _renderData.elements.push(_face);\n        }\n      }\n      return {\n        setObject,\n        projectVertex,\n        checkTriangleVisibility,\n        checkBackfaceCulling,\n        pushVertex,\n        pushNormal,\n        pushColor,\n        pushUv,\n        pushLine,\n        pushTriangle\n      };\n    }\n    const renderList = new RenderList();\n    function projectObject(object) {\n      if (object.visible === false)\n        return;\n      if (object.isLight) {\n        _renderData.lights.push(object);\n      } else if (object.isMesh || object.isLine || object.isPoints) {\n        if (object.material.visible === false)\n          return;\n        if (object.frustumCulled === true && _frustum.intersectsObject(object) === false)\n          return;\n        addObject(object);\n      } else if (object.isSprite) {\n        if (object.material.visible === false)\n          return;\n        if (object.frustumCulled === true && _frustum.intersectsSprite(object) === false)\n          return;\n        addObject(object);\n      }\n      const children = object.children;\n      for (let i = 0, l = children.length; i < l; i++) {\n        projectObject(children[i]);\n      }\n    }\n    function addObject(object) {\n      _object = getNextObjectInPool();\n      _object.id = object.id;\n      _object.object = object;\n      _vector3.setFromMatrixPosition(object.matrixWorld);\n      _vector3.applyMatrix4(_viewProjectionMatrix);\n      _object.z = _vector3.z;\n      _object.renderOrder = object.renderOrder;\n      _renderData.objects.push(_object);\n    }\n    this.projectScene = function(scene, camera, sortObjects, sortElements) {\n      _faceCount = 0;\n      _lineCount = 0;\n      _spriteCount = 0;\n      _renderData.elements.length = 0;\n      if (scene.matrixWorldAutoUpdate === true)\n        scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true)\n        camera.updateMatrixWorld();\n      _viewMatrix.copy(camera.matrixWorldInverse);\n      _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\n      _frustum.setFromProjectionMatrix(_viewProjectionMatrix);\n      _objectCount = 0;\n      _renderData.objects.length = 0;\n      _renderData.lights.length = 0;\n      projectObject(scene);\n      if (sortObjects === true) {\n        _renderData.objects.sort(painterSort);\n      }\n      const objects = _renderData.objects;\n      for (let o = 0, ol = objects.length; o < ol; o++) {\n        const object = objects[o].object;\n        const geometry = object.geometry;\n        renderList.setObject(object);\n        _modelMatrix = object.matrixWorld;\n        _vertexCount = 0;\n        if (object.isMesh) {\n          let material = object.material;\n          const isMultiMaterial = Array.isArray(material);\n          const attributes = geometry.attributes;\n          const groups = geometry.groups;\n          if (attributes.position === void 0)\n            continue;\n          const positions = attributes.position.array;\n          for (let i = 0, l = positions.length; i < l; i += 3) {\n            let x = positions[i];\n            let y = positions[i + 1];\n            let z = positions[i + 2];\n            const morphTargets = geometry.morphAttributes.position;\n            if (morphTargets !== void 0) {\n              const morphTargetsRelative = geometry.morphTargetsRelative;\n              const morphInfluences = object.morphTargetInfluences;\n              for (let t = 0, tl = morphTargets.length; t < tl; t++) {\n                const influence = morphInfluences[t];\n                if (influence === 0)\n                  continue;\n                const target = morphTargets[t];\n                if (morphTargetsRelative) {\n                  x += target.getX(i / 3) * influence;\n                  y += target.getY(i / 3) * influence;\n                  z += target.getZ(i / 3) * influence;\n                } else {\n                  x += (target.getX(i / 3) - positions[i]) * influence;\n                  y += (target.getY(i / 3) - positions[i + 1]) * influence;\n                  z += (target.getZ(i / 3) - positions[i + 2]) * influence;\n                }\n              }\n            }\n            renderList.pushVertex(x, y, z);\n          }\n          if (attributes.normal !== void 0) {\n            const normals = attributes.normal.array;\n            for (let i = 0, l = normals.length; i < l; i += 3) {\n              renderList.pushNormal(normals[i], normals[i + 1], normals[i + 2]);\n            }\n          }\n          if (attributes.color !== void 0) {\n            const colors = attributes.color.array;\n            for (let i = 0, l = colors.length; i < l; i += 3) {\n              renderList.pushColor(colors[i], colors[i + 1], colors[i + 2]);\n            }\n          }\n          if (attributes.uv !== void 0) {\n            const uvs = attributes.uv.array;\n            for (let i = 0, l = uvs.length; i < l; i += 2) {\n              renderList.pushUv(uvs[i], uvs[i + 1]);\n            }\n          }\n          if (geometry.index !== null) {\n            const indices = geometry.index.array;\n            if (groups.length > 0) {\n              for (let g = 0; g < groups.length; g++) {\n                const group = groups[g];\n                material = isMultiMaterial === true ? object.material[group.materialIndex] : object.material;\n                if (material === void 0)\n                  continue;\n                for (let i = group.start, l = group.start + group.count; i < l; i += 3) {\n                  renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2], material);\n                }\n              }\n            } else {\n              for (let i = 0, l = indices.length; i < l; i += 3) {\n                renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2], material);\n              }\n            }\n          } else {\n            if (groups.length > 0) {\n              for (let g = 0; g < groups.length; g++) {\n                const group = groups[g];\n                material = isMultiMaterial === true ? object.material[group.materialIndex] : object.material;\n                if (material === void 0)\n                  continue;\n                for (let i = group.start, l = group.start + group.count; i < l; i += 3) {\n                  renderList.pushTriangle(i, i + 1, i + 2, material);\n                }\n              }\n            } else {\n              for (let i = 0, l = positions.length / 3; i < l; i += 3) {\n                renderList.pushTriangle(i, i + 1, i + 2, material);\n              }\n            }\n          }\n        } else if (object.isLine) {\n          _modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix, _modelMatrix);\n          const attributes = geometry.attributes;\n          if (attributes.position !== void 0) {\n            const positions = attributes.position.array;\n            for (let i = 0, l = positions.length; i < l; i += 3) {\n              renderList.pushVertex(positions[i], positions[i + 1], positions[i + 2]);\n            }\n            if (attributes.color !== void 0) {\n              const colors = attributes.color.array;\n              for (let i = 0, l = colors.length; i < l; i += 3) {\n                renderList.pushColor(colors[i], colors[i + 1], colors[i + 2]);\n              }\n            }\n            if (geometry.index !== null) {\n              const indices = geometry.index.array;\n              for (let i = 0, l = indices.length; i < l; i += 2) {\n                renderList.pushLine(indices[i], indices[i + 1]);\n              }\n            } else {\n              const step = object.isLineSegments ? 2 : 1;\n              for (let i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n                renderList.pushLine(i, i + 1);\n              }\n            }\n          }\n        } else if (object.isPoints) {\n          _modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix, _modelMatrix);\n          const attributes = geometry.attributes;\n          if (attributes.position !== void 0) {\n            const positions = attributes.position.array;\n            for (let i = 0, l = positions.length; i < l; i += 3) {\n              _vector4.set(positions[i], positions[i + 1], positions[i + 2], 1);\n              _vector4.applyMatrix4(_modelViewProjectionMatrix);\n              pushPoint(_vector4, object, camera);\n            }\n          }\n        } else if (object.isSprite) {\n          object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n          _vector4.set(_modelMatrix.elements[12], _modelMatrix.elements[13], _modelMatrix.elements[14], 1);\n          _vector4.applyMatrix4(_viewProjectionMatrix);\n          pushPoint(_vector4, object, camera);\n        }\n      }\n      if (sortElements === true) {\n        _renderData.elements.sort(painterSort);\n      }\n      return _renderData;\n    };\n    function pushPoint(_vector42, object, camera) {\n      const invW = 1 / _vector42.w;\n      _vector42.z *= invW;\n      if (_vector42.z >= -1 && _vector42.z <= 1) {\n        _sprite = getNextSpriteInPool();\n        _sprite.id = object.id;\n        _sprite.x = _vector42.x * invW;\n        _sprite.y = _vector42.y * invW;\n        _sprite.z = _vector42.z;\n        _sprite.renderOrder = object.renderOrder;\n        _sprite.object = object;\n        _sprite.rotation = object.rotation;\n        _sprite.scale.x = object.scale.x * Math.abs(\n          _sprite.x - (_vector42.x + camera.projectionMatrix.elements[0]) / (_vector42.w + camera.projectionMatrix.elements[12])\n        );\n        _sprite.scale.y = object.scale.y * Math.abs(\n          _sprite.y - (_vector42.y + camera.projectionMatrix.elements[5]) / (_vector42.w + camera.projectionMatrix.elements[13])\n        );\n        _sprite.material = object.material;\n        _renderData.elements.push(_sprite);\n      }\n    }\n    function getNextObjectInPool() {\n      if (_objectCount === _objectPoolLength) {\n        const object = new RenderableObject();\n        _objectPool.push(object);\n        _objectPoolLength++;\n        _objectCount++;\n        return object;\n      }\n      return _objectPool[_objectCount++];\n    }\n    function getNextVertexInPool() {\n      if (_vertexCount === _vertexPoolLength) {\n        const vertex = new RenderableVertex();\n        _vertexPool.push(vertex);\n        _vertexPoolLength++;\n        _vertexCount++;\n        return vertex;\n      }\n      return _vertexPool[_vertexCount++];\n    }\n    function getNextFaceInPool() {\n      if (_faceCount === _facePoolLength) {\n        const face = new RenderableFace();\n        _facePool.push(face);\n        _facePoolLength++;\n        _faceCount++;\n        return face;\n      }\n      return _facePool[_faceCount++];\n    }\n    function getNextLineInPool() {\n      if (_lineCount === _linePoolLength) {\n        const line = new RenderableLine();\n        _linePool.push(line);\n        _linePoolLength++;\n        _lineCount++;\n        return line;\n      }\n      return _linePool[_lineCount++];\n    }\n    function getNextSpriteInPool() {\n      if (_spriteCount === _spritePoolLength) {\n        const sprite = new RenderableSprite();\n        _spritePool.push(sprite);\n        _spritePoolLength++;\n        _spriteCount++;\n        return sprite;\n      }\n      return _spritePool[_spriteCount++];\n    }\n    function painterSort(a, b) {\n      if (a.renderOrder !== b.renderOrder) {\n        return a.renderOrder - b.renderOrder;\n      } else if (a.z !== b.z) {\n        return b.z - a.z;\n      } else if (a.id !== b.id) {\n        return a.id - b.id;\n      } else {\n        return 0;\n      }\n    }\n    function clipLine(s1, s2) {\n      let alpha1 = 0, alpha2 = 1;\n      const bc1near = s1.z + s1.w, bc2near = s2.z + s2.w, bc1far = -s1.z + s1.w, bc2far = -s2.z + s2.w;\n      if (bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0) {\n        return true;\n      } else if (bc1near < 0 && bc2near < 0 || bc1far < 0 && bc2far < 0) {\n        return false;\n      } else {\n        if (bc1near < 0) {\n          alpha1 = Math.max(alpha1, bc1near / (bc1near - bc2near));\n        } else if (bc2near < 0) {\n          alpha2 = Math.min(alpha2, bc1near / (bc1near - bc2near));\n        }\n        if (bc1far < 0) {\n          alpha1 = Math.max(alpha1, bc1far / (bc1far - bc2far));\n        } else if (bc2far < 0) {\n          alpha2 = Math.min(alpha2, bc1far / (bc1far - bc2far));\n        }\n        if (alpha2 < alpha1) {\n          return false;\n        } else {\n          s1.lerp(s2, alpha1);\n          s2.lerp(s1, 1 - alpha2);\n          return true;\n        }\n      }\n    }\n  }\n}\nexport {\n  Projector,\n  RenderableFace,\n  RenderableLine,\n  RenderableObject,\n  RenderableSprite,\n  RenderableVertex\n};\n"]},"metadata":{},"sourceType":"module"}