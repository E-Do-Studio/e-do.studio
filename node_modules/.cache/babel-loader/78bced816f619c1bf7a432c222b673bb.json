{"ast":null,"code":"import _classCallCheck from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar __defProp = Object.defineProperty;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __publicField = function __publicField(obj, key, value) {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n  return value;\n};\n\nimport { EventDispatcher, MOUSE, Vector3, Vector2, Quaternion } from \"three\";\n\nvar TrackballControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(TrackballControls, _EventDispatcher);\n\n  var _super = _createSuper(TrackballControls);\n\n  function TrackballControls(object, domElement) {\n    var _this;\n\n    _classCallCheck(this, TrackballControls);\n\n    _this = _super.call(this);\n\n    __publicField(_assertThisInitialized(_this), \"enabled\", true);\n\n    __publicField(_assertThisInitialized(_this), \"screen\", {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    });\n\n    __publicField(_assertThisInitialized(_this), \"rotateSpeed\", 1);\n\n    __publicField(_assertThisInitialized(_this), \"zoomSpeed\", 1.2);\n\n    __publicField(_assertThisInitialized(_this), \"panSpeed\", 0.3);\n\n    __publicField(_assertThisInitialized(_this), \"noRotate\", false);\n\n    __publicField(_assertThisInitialized(_this), \"noZoom\", false);\n\n    __publicField(_assertThisInitialized(_this), \"noPan\", false);\n\n    __publicField(_assertThisInitialized(_this), \"staticMoving\", false);\n\n    __publicField(_assertThisInitialized(_this), \"dynamicDampingFactor\", 0.2);\n\n    __publicField(_assertThisInitialized(_this), \"minDistance\", 0);\n\n    __publicField(_assertThisInitialized(_this), \"maxDistance\", Infinity);\n\n    __publicField(_assertThisInitialized(_this), \"keys\", [\"KeyA\", \"KeyS\", \"KeyD\"\n    /*D*/\n    ]);\n\n    __publicField(_assertThisInitialized(_this), \"mouseButtons\", {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    });\n\n    __publicField(_assertThisInitialized(_this), \"object\");\n\n    __publicField(_assertThisInitialized(_this), \"domElement\");\n\n    __publicField(_assertThisInitialized(_this), \"cursorZoom\", false);\n\n    __publicField(_assertThisInitialized(_this), \"target\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"mousePosition\", new Vector2()); // internals\n\n\n    __publicField(_assertThisInitialized(_this), \"STATE\", {\n      NONE: -1,\n      ROTATE: 0,\n      ZOOM: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_ZOOM_PAN: 4\n    });\n\n    __publicField(_assertThisInitialized(_this), \"EPS\", 1e-6);\n\n    __publicField(_assertThisInitialized(_this), \"lastZoom\", 1);\n\n    __publicField(_assertThisInitialized(_this), \"lastPosition\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"cursorVector\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"targetVector\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"_state\", _this.STATE.NONE);\n\n    __publicField(_assertThisInitialized(_this), \"_keyState\", _this.STATE.NONE);\n\n    __publicField(_assertThisInitialized(_this), \"_eye\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"_movePrev\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"_moveCurr\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"_lastAxis\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"_lastAngle\", 0);\n\n    __publicField(_assertThisInitialized(_this), \"_zoomStart\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"_zoomEnd\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"_touchZoomDistanceStart\", 0);\n\n    __publicField(_assertThisInitialized(_this), \"_touchZoomDistanceEnd\", 0);\n\n    __publicField(_assertThisInitialized(_this), \"_panStart\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"_panEnd\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"target0\");\n\n    __publicField(_assertThisInitialized(_this), \"position0\");\n\n    __publicField(_assertThisInitialized(_this), \"up0\");\n\n    __publicField(_assertThisInitialized(_this), \"zoom0\"); // events\n\n\n    __publicField(_assertThisInitialized(_this), \"changeEvent\", {\n      type: \"change\"\n    });\n\n    __publicField(_assertThisInitialized(_this), \"startEvent\", {\n      type: \"start\"\n    });\n\n    __publicField(_assertThisInitialized(_this), \"endEvent\", {\n      type: \"end\"\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onScreenVector\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"getMouseOnScreen\", function (pageX, pageY) {\n      _this.onScreenVector.set((pageX - _this.screen.left) / _this.screen.width, (pageY - _this.screen.top) / _this.screen.height);\n\n      return _this.onScreenVector;\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onCircleVector\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"getMouseOnCircle\", function (pageX, pageY) {\n      _this.onCircleVector.set((pageX - _this.screen.width * 0.5 - _this.screen.left) / (_this.screen.width * 0.5), (_this.screen.height + 2 * (_this.screen.top - pageY)) / _this.screen.width // screen.width intentional\n      );\n\n      return _this.onCircleVector;\n    });\n\n    __publicField(_assertThisInitialized(_this), \"axis\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"quaternion\", new Quaternion());\n\n    __publicField(_assertThisInitialized(_this), \"eyeDirection\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"objectUpDirection\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"objectSidewaysDirection\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"moveDirection\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"angle\", 0);\n\n    __publicField(_assertThisInitialized(_this), \"rotateCamera\", function () {\n      _this.moveDirection.set(_this._moveCurr.x - _this._movePrev.x, _this._moveCurr.y - _this._movePrev.y, 0);\n\n      _this.angle = _this.moveDirection.length();\n\n      if (_this.angle) {\n        _this._eye.copy(_this.object.position).sub(_this.target);\n\n        _this.eyeDirection.copy(_this._eye).normalize();\n\n        _this.objectUpDirection.copy(_this.object.up).normalize();\n\n        _this.objectSidewaysDirection.crossVectors(_this.objectUpDirection, _this.eyeDirection).normalize();\n\n        _this.objectUpDirection.setLength(_this._moveCurr.y - _this._movePrev.y);\n\n        _this.objectSidewaysDirection.setLength(_this._moveCurr.x - _this._movePrev.x);\n\n        _this.moveDirection.copy(_this.objectUpDirection.add(_this.objectSidewaysDirection));\n\n        _this.axis.crossVectors(_this.moveDirection, _this._eye).normalize();\n\n        _this.angle *= _this.rotateSpeed;\n\n        _this.quaternion.setFromAxisAngle(_this.axis, _this.angle);\n\n        _this._eye.applyQuaternion(_this.quaternion);\n\n        _this.object.up.applyQuaternion(_this.quaternion);\n\n        _this._lastAxis.copy(_this.axis);\n\n        _this._lastAngle = _this.angle;\n      } else if (!_this.staticMoving && _this._lastAngle) {\n        _this._lastAngle *= Math.sqrt(1 - _this.dynamicDampingFactor);\n\n        _this._eye.copy(_this.object.position).sub(_this.target);\n\n        _this.quaternion.setFromAxisAngle(_this._lastAxis, _this._lastAngle);\n\n        _this._eye.applyQuaternion(_this.quaternion);\n\n        _this.object.up.applyQuaternion(_this.quaternion);\n      }\n\n      _this._movePrev.copy(_this._moveCurr);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"zoomCamera\", function () {\n      var factor;\n\n      if (_this._state === _this.STATE.TOUCH_ZOOM_PAN) {\n        factor = _this._touchZoomDistanceStart / _this._touchZoomDistanceEnd;\n        _this._touchZoomDistanceStart = _this._touchZoomDistanceEnd;\n\n        if (_this.object.isPerspectiveCamera) {\n          _this._eye.multiplyScalar(factor);\n        } else if (_this.object.isOrthographicCamera) {\n          _this.object.zoom /= factor;\n\n          _this.object.updateProjectionMatrix();\n        } else {\n          console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n        }\n      } else {\n        factor = 1 + (_this._zoomEnd.y - _this._zoomStart.y) * _this.zoomSpeed;\n\n        if (Math.abs(factor - 1) > _this.EPS && factor > 0) {\n          if (_this.object.isPerspectiveCamera) {\n            if (factor > 1 && _this._eye.length() >= _this.maxDistance - _this.EPS) {\n              factor = 1;\n            }\n\n            _this._eye.multiplyScalar(factor);\n          } else if (_this.object.isOrthographicCamera) {\n            if (factor > 1 && _this.object.zoom < _this.maxDistance * _this.maxDistance) {\n              factor = 1;\n            }\n\n            _this.object.zoom /= factor;\n          } else {\n            console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n          }\n        }\n\n        if (_this.staticMoving) {\n          _this._zoomStart.copy(_this._zoomEnd);\n        } else {\n          _this._zoomStart.y += (_this._zoomEnd.y - _this._zoomStart.y) * _this.dynamicDampingFactor;\n        }\n\n        if (_this.cursorZoom) {\n          _this.targetVector.copy(_this.target).project(_this.object);\n\n          var worldPos = _this.cursorVector.set(_this.mousePosition.x, _this.mousePosition.y, _this.targetVector.z).unproject(_this.object);\n\n          _this.target.lerpVectors(worldPos, _this.target, factor);\n        }\n\n        if (_this.object.isOrthographicCamera) {\n          _this.object.updateProjectionMatrix();\n        }\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"mouseChange\", new Vector2());\n\n    __publicField(_assertThisInitialized(_this), \"objectUp\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"pan\", new Vector3());\n\n    __publicField(_assertThisInitialized(_this), \"panCamera\", function () {\n      if (!_this.domElement) return;\n\n      _this.mouseChange.copy(_this._panEnd).sub(_this._panStart);\n\n      if (_this.mouseChange.lengthSq() > _this.EPS) {\n        if (_this.object.isOrthographicCamera) {\n          var orthoObject = _this.object;\n          var scale_x = (orthoObject.right - orthoObject.left) / _this.object.zoom;\n          var scale_y = (orthoObject.top - orthoObject.bottom) / _this.object.zoom;\n          _this.mouseChange.x *= scale_x;\n          _this.mouseChange.y *= scale_y;\n        } else {\n          _this.mouseChange.multiplyScalar(_this._eye.length() * _this.panSpeed);\n        }\n\n        _this.pan.copy(_this._eye).cross(_this.object.up).setLength(_this.mouseChange.x);\n\n        _this.pan.add(_this.objectUp.copy(_this.object.up).setLength(_this.mouseChange.y));\n\n        _this.object.position.add(_this.pan);\n\n        _this.target.add(_this.pan);\n\n        if (_this.staticMoving) {\n          _this._panStart.copy(_this._panEnd);\n        } else {\n          _this._panStart.add(_this.mouseChange.subVectors(_this._panEnd, _this._panStart).multiplyScalar(_this.dynamicDampingFactor));\n        }\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"checkDistances\", function () {\n      if (!_this.noZoom || !_this.noPan) {\n        if (_this._eye.lengthSq() > _this.maxDistance * _this.maxDistance) {\n          _this.object.position.addVectors(_this.target, _this._eye.setLength(_this.maxDistance));\n\n          _this._zoomStart.copy(_this._zoomEnd);\n        }\n\n        if (_this._eye.lengthSq() < _this.minDistance * _this.minDistance) {\n          _this.object.position.addVectors(_this.target, _this._eye.setLength(_this.minDistance));\n\n          _this._zoomStart.copy(_this._zoomEnd);\n        }\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"handleResize\", function () {\n      if (!_this.domElement) return;\n\n      var box = _this.domElement.getBoundingClientRect();\n\n      var d = _this.domElement.ownerDocument.documentElement;\n      _this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      _this.screen.top = box.top + window.pageYOffset - d.clientTop;\n      _this.screen.width = box.width;\n      _this.screen.height = box.height;\n    });\n\n    __publicField(_assertThisInitialized(_this), \"update\", function () {\n      _this._eye.subVectors(_this.object.position, _this.target);\n\n      if (!_this.noRotate) {\n        _this.rotateCamera();\n      }\n\n      if (!_this.noZoom) {\n        _this.zoomCamera();\n      }\n\n      if (!_this.noPan) {\n        _this.panCamera();\n      }\n\n      _this.object.position.addVectors(_this.target, _this._eye);\n\n      if (_this.object.isPerspectiveCamera) {\n        _this.checkDistances();\n\n        _this.object.lookAt(_this.target);\n\n        if (_this.lastPosition.distanceToSquared(_this.object.position) > _this.EPS) {\n          _this.dispatchEvent(_this.changeEvent);\n\n          _this.lastPosition.copy(_this.object.position);\n        }\n      } else if (_this.object.isOrthographicCamera) {\n        _this.object.lookAt(_this.target);\n\n        if (_this.lastPosition.distanceToSquared(_this.object.position) > _this.EPS || _this.lastZoom !== _this.object.zoom) {\n          _this.dispatchEvent(_this.changeEvent);\n\n          _this.lastPosition.copy(_this.object.position);\n\n          _this.lastZoom = _this.object.zoom;\n        }\n      } else {\n        console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"reset\", function () {\n      _this._state = _this.STATE.NONE;\n      _this._keyState = _this.STATE.NONE;\n\n      _this.target.copy(_this.target0);\n\n      _this.object.position.copy(_this.position0);\n\n      _this.object.up.copy(_this.up0);\n\n      _this.object.zoom = _this.zoom0;\n\n      _this.object.updateProjectionMatrix();\n\n      _this._eye.subVectors(_this.object.position, _this.target);\n\n      _this.object.lookAt(_this.target);\n\n      _this.dispatchEvent(_this.changeEvent);\n\n      _this.lastPosition.copy(_this.object.position);\n\n      _this.lastZoom = _this.object.zoom;\n    });\n\n    __publicField(_assertThisInitialized(_this), \"keydown\", function (event) {\n      if (_this.enabled === false) return;\n      window.removeEventListener(\"keydown\", _this.keydown);\n\n      if (_this._keyState !== _this.STATE.NONE) {\n        return;\n      } else if (event.code === _this.keys[_this.STATE.ROTATE] && !_this.noRotate) {\n        _this._keyState = _this.STATE.ROTATE;\n      } else if (event.code === _this.keys[_this.STATE.ZOOM] && !_this.noZoom) {\n        _this._keyState = _this.STATE.ZOOM;\n      } else if (event.code === _this.keys[_this.STATE.PAN] && !_this.noPan) {\n        _this._keyState = _this.STATE.PAN;\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onPointerDown\", function (event) {\n      if (_this.enabled === false) return;\n\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          _this.onMouseDown(event);\n\n          break;\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onPointerMove\", function (event) {\n      if (_this.enabled === false) return;\n\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          _this.onMouseMove(event);\n\n          break;\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onPointerUp\", function (event) {\n      if (_this.enabled === false) return;\n\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          _this.onMouseUp();\n\n          break;\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"keyup\", function () {\n      if (_this.enabled === false) return;\n      _this._keyState = _this.STATE.NONE;\n      window.addEventListener(\"keydown\", _this.keydown);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onMouseDown\", function (event) {\n      if (!_this.domElement) return;\n\n      if (_this._state === _this.STATE.NONE) {\n        switch (event.button) {\n          case _this.mouseButtons.LEFT:\n            _this._state = _this.STATE.ROTATE;\n            break;\n\n          case _this.mouseButtons.MIDDLE:\n            _this._state = _this.STATE.ZOOM;\n            break;\n\n          case _this.mouseButtons.RIGHT:\n            _this._state = _this.STATE.PAN;\n            break;\n\n          default:\n            _this._state = _this.STATE.NONE;\n        }\n      }\n\n      var state = _this._keyState !== _this.STATE.NONE ? _this._keyState : _this._state;\n\n      if (state === _this.STATE.ROTATE && !_this.noRotate) {\n        _this._moveCurr.copy(_this.getMouseOnCircle(event.pageX, event.pageY));\n\n        _this._movePrev.copy(_this._moveCurr);\n      } else if (state === _this.STATE.ZOOM && !_this.noZoom) {\n        _this._zoomStart.copy(_this.getMouseOnScreen(event.pageX, event.pageY));\n\n        _this._zoomEnd.copy(_this._zoomStart);\n      } else if (state === _this.STATE.PAN && !_this.noPan) {\n        _this._panStart.copy(_this.getMouseOnScreen(event.pageX, event.pageY));\n\n        _this._panEnd.copy(_this._panStart);\n      }\n\n      _this.domElement.ownerDocument.addEventListener(\"pointermove\", _this.onPointerMove);\n\n      _this.domElement.ownerDocument.addEventListener(\"pointerup\", _this.onPointerUp);\n\n      _this.dispatchEvent(_this.startEvent);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onMouseMove\", function (event) {\n      if (_this.enabled === false) return;\n      var state = _this._keyState !== _this.STATE.NONE ? _this._keyState : _this._state;\n\n      if (state === _this.STATE.ROTATE && !_this.noRotate) {\n        _this._movePrev.copy(_this._moveCurr);\n\n        _this._moveCurr.copy(_this.getMouseOnCircle(event.pageX, event.pageY));\n      } else if (state === _this.STATE.ZOOM && !_this.noZoom) {\n        _this._zoomEnd.copy(_this.getMouseOnScreen(event.pageX, event.pageY));\n      } else if (state === _this.STATE.PAN && !_this.noPan) {\n        _this._panEnd.copy(_this.getMouseOnScreen(event.pageX, event.pageY));\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"onMouseUp\", function () {\n      if (!_this.domElement) return;\n      if (_this.enabled === false) return;\n      _this._state = _this.STATE.NONE;\n\n      _this.domElement.ownerDocument.removeEventListener(\"pointermove\", _this.onPointerMove);\n\n      _this.domElement.ownerDocument.removeEventListener(\"pointerup\", _this.onPointerUp);\n\n      _this.dispatchEvent(_this.endEvent);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"mousewheel\", function (event) {\n      if (_this.enabled === false) return;\n      if (_this.noZoom === true) return;\n      event.preventDefault();\n\n      switch (event.deltaMode) {\n        case 2:\n          _this._zoomStart.y -= event.deltaY * 0.025;\n          break;\n\n        case 1:\n          _this._zoomStart.y -= event.deltaY * 0.01;\n          break;\n\n        default:\n          _this._zoomStart.y -= event.deltaY * 25e-5;\n          break;\n      }\n\n      _this.mousePosition.x = event.offsetX / _this.screen.width * 2 - 1;\n      _this.mousePosition.y = -(event.offsetY / _this.screen.height) * 2 + 1;\n\n      _this.dispatchEvent(_this.startEvent);\n\n      _this.dispatchEvent(_this.endEvent);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"touchstart\", function (event) {\n      if (_this.enabled === false) return;\n      event.preventDefault();\n\n      switch (event.touches.length) {\n        case 1:\n          _this._state = _this.STATE.TOUCH_ROTATE;\n\n          _this._moveCurr.copy(_this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n          _this._movePrev.copy(_this._moveCurr);\n\n          break;\n\n        default:\n          _this._state = _this.STATE.TOUCH_ZOOM_PAN;\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          _this._touchZoomDistanceEnd = _this._touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n          var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n          _this._panStart.copy(_this.getMouseOnScreen(x, y));\n\n          _this._panEnd.copy(_this._panStart);\n\n          break;\n      }\n\n      _this.dispatchEvent(_this.startEvent);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"touchmove\", function (event) {\n      if (_this.enabled === false) return;\n      event.preventDefault();\n\n      switch (event.touches.length) {\n        case 1:\n          _this._movePrev.copy(_this._moveCurr);\n\n          _this._moveCurr.copy(_this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n          break;\n\n        default:\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          _this._touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n          var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n          _this._panEnd.copy(_this.getMouseOnScreen(x, y));\n\n          break;\n      }\n    });\n\n    __publicField(_assertThisInitialized(_this), \"touchend\", function (event) {\n      if (_this.enabled === false) return;\n\n      switch (event.touches.length) {\n        case 0:\n          _this._state = _this.STATE.NONE;\n          break;\n\n        case 1:\n          _this._state = _this.STATE.TOUCH_ROTATE;\n\n          _this._moveCurr.copy(_this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n          _this._movePrev.copy(_this._moveCurr);\n\n          break;\n      }\n\n      _this.dispatchEvent(_this.endEvent);\n    });\n\n    __publicField(_assertThisInitialized(_this), \"contextmenu\", function (event) {\n      if (_this.enabled === false) return;\n      event.preventDefault();\n    }); // https://github.com/mrdoob/three.js/issues/20575\n\n\n    __publicField(_assertThisInitialized(_this), \"connect\", function (domElement) {\n      if (domElement === document) {\n        console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n      }\n\n      _this.domElement = domElement;\n\n      _this.domElement.addEventListener(\"contextmenu\", _this.contextmenu);\n\n      _this.domElement.addEventListener(\"pointerdown\", _this.onPointerDown);\n\n      _this.domElement.addEventListener(\"wheel\", _this.mousewheel);\n\n      _this.domElement.addEventListener(\"touchstart\", _this.touchstart);\n\n      _this.domElement.addEventListener(\"touchend\", _this.touchend);\n\n      _this.domElement.addEventListener(\"touchmove\", _this.touchmove);\n\n      _this.domElement.ownerDocument.addEventListener(\"pointermove\", _this.onPointerMove);\n\n      _this.domElement.ownerDocument.addEventListener(\"pointerup\", _this.onPointerUp);\n\n      window.addEventListener(\"keydown\", _this.keydown);\n      window.addEventListener(\"keyup\", _this.keyup);\n\n      _this.handleResize();\n    });\n\n    __publicField(_assertThisInitialized(_this), \"dispose\", function () {\n      if (!_this.domElement) return;\n\n      _this.domElement.removeEventListener(\"contextmenu\", _this.contextmenu);\n\n      _this.domElement.removeEventListener(\"pointerdown\", _this.onPointerDown);\n\n      _this.domElement.removeEventListener(\"wheel\", _this.mousewheel);\n\n      _this.domElement.removeEventListener(\"touchstart\", _this.touchstart);\n\n      _this.domElement.removeEventListener(\"touchend\", _this.touchend);\n\n      _this.domElement.removeEventListener(\"touchmove\", _this.touchmove);\n\n      _this.domElement.ownerDocument.removeEventListener(\"pointermove\", _this.onPointerMove);\n\n      _this.domElement.ownerDocument.removeEventListener(\"pointerup\", _this.onPointerUp);\n\n      window.removeEventListener(\"keydown\", _this.keydown);\n      window.removeEventListener(\"keyup\", _this.keyup);\n    });\n\n    _this.object = object;\n    _this.target0 = _this.target.clone();\n    _this.position0 = _this.object.position.clone();\n    _this.up0 = _this.object.up.clone();\n    _this.zoom0 = _this.object.zoom;\n    if (domElement !== void 0) _this.connect(domElement);\n\n    _this.update();\n\n    return _this;\n  }\n\n  return TrackballControls;\n}(EventDispatcher);\n\nexport { TrackballControls };","map":{"version":3,"sources":["/Users/theodaguier/_dev/pro/e-do/website/old/E-Do-Studio/node_modules/three-stdlib/controls/TrackballControls.js"],"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","EventDispatcher","MOUSE","Vector3","Vector2","Quaternion","TrackballControls","object","domElement","left","top","width","height","Infinity","LEFT","ROTATE","MIDDLE","DOLLY","RIGHT","PAN","NONE","ZOOM","TOUCH_ROTATE","TOUCH_ZOOM_PAN","STATE","type","pageX","pageY","onScreenVector","set","screen","onCircleVector","moveDirection","_moveCurr","x","_movePrev","y","angle","length","_eye","copy","position","sub","target","eyeDirection","normalize","objectUpDirection","up","objectSidewaysDirection","crossVectors","setLength","add","axis","rotateSpeed","quaternion","setFromAxisAngle","applyQuaternion","_lastAxis","_lastAngle","staticMoving","Math","sqrt","dynamicDampingFactor","factor","_state","_touchZoomDistanceStart","_touchZoomDistanceEnd","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","zoom","updateProjectionMatrix","console","warn","_zoomEnd","_zoomStart","zoomSpeed","abs","EPS","maxDistance","cursorZoom","targetVector","project","worldPos","cursorVector","mousePosition","z","unproject","lerpVectors","mouseChange","_panEnd","_panStart","lengthSq","orthoObject","scale_x","right","scale_y","bottom","panSpeed","pan","cross","objectUp","subVectors","noZoom","noPan","addVectors","minDistance","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","noRotate","rotateCamera","zoomCamera","panCamera","checkDistances","lookAt","lastPosition","distanceToSquared","dispatchEvent","changeEvent","lastZoom","_keyState","target0","position0","up0","zoom0","event","enabled","removeEventListener","keydown","code","keys","pointerType","onMouseDown","onMouseMove","onMouseUp","addEventListener","button","mouseButtons","state","getMouseOnCircle","getMouseOnScreen","onPointerMove","onPointerUp","startEvent","endEvent","preventDefault","deltaMode","deltaY","offsetX","offsetY","touches","dx","dy","document","error","contextmenu","onPointerDown","mousewheel","touchstart","touchend","touchmove","keyup","handleResize","clone","connect","update"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { EventDispatcher, MOUSE, Vector3, Vector2, Quaternion } from \"three\";\nclass TrackballControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n    __publicField(this, \"enabled\", true);\n    __publicField(this, \"screen\", { left: 0, top: 0, width: 0, height: 0 });\n    __publicField(this, \"rotateSpeed\", 1);\n    __publicField(this, \"zoomSpeed\", 1.2);\n    __publicField(this, \"panSpeed\", 0.3);\n    __publicField(this, \"noRotate\", false);\n    __publicField(this, \"noZoom\", false);\n    __publicField(this, \"noPan\", false);\n    __publicField(this, \"staticMoving\", false);\n    __publicField(this, \"dynamicDampingFactor\", 0.2);\n    __publicField(this, \"minDistance\", 0);\n    __publicField(this, \"maxDistance\", Infinity);\n    __publicField(this, \"keys\", [\n      \"KeyA\",\n      \"KeyS\",\n      \"KeyD\"\n      /*D*/\n    ]);\n    __publicField(this, \"mouseButtons\", {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    });\n    __publicField(this, \"object\");\n    __publicField(this, \"domElement\");\n    __publicField(this, \"cursorZoom\", false);\n    __publicField(this, \"target\", new Vector3());\n    __publicField(this, \"mousePosition\", new Vector2());\n    // internals\n    __publicField(this, \"STATE\", {\n      NONE: -1,\n      ROTATE: 0,\n      ZOOM: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_ZOOM_PAN: 4\n    });\n    __publicField(this, \"EPS\", 1e-6);\n    __publicField(this, \"lastZoom\", 1);\n    __publicField(this, \"lastPosition\", new Vector3());\n    __publicField(this, \"cursorVector\", new Vector3());\n    __publicField(this, \"targetVector\", new Vector3());\n    __publicField(this, \"_state\", this.STATE.NONE);\n    __publicField(this, \"_keyState\", this.STATE.NONE);\n    __publicField(this, \"_eye\", new Vector3());\n    __publicField(this, \"_movePrev\", new Vector2());\n    __publicField(this, \"_moveCurr\", new Vector2());\n    __publicField(this, \"_lastAxis\", new Vector3());\n    __publicField(this, \"_lastAngle\", 0);\n    __publicField(this, \"_zoomStart\", new Vector2());\n    __publicField(this, \"_zoomEnd\", new Vector2());\n    __publicField(this, \"_touchZoomDistanceStart\", 0);\n    __publicField(this, \"_touchZoomDistanceEnd\", 0);\n    __publicField(this, \"_panStart\", new Vector2());\n    __publicField(this, \"_panEnd\", new Vector2());\n    __publicField(this, \"target0\");\n    __publicField(this, \"position0\");\n    __publicField(this, \"up0\");\n    __publicField(this, \"zoom0\");\n    // events\n    __publicField(this, \"changeEvent\", { type: \"change\" });\n    __publicField(this, \"startEvent\", { type: \"start\" });\n    __publicField(this, \"endEvent\", { type: \"end\" });\n    __publicField(this, \"onScreenVector\", new Vector2());\n    __publicField(this, \"getMouseOnScreen\", (pageX, pageY) => {\n      this.onScreenVector.set(\n        (pageX - this.screen.left) / this.screen.width,\n        (pageY - this.screen.top) / this.screen.height\n      );\n      return this.onScreenVector;\n    });\n    __publicField(this, \"onCircleVector\", new Vector2());\n    __publicField(this, \"getMouseOnCircle\", (pageX, pageY) => {\n      this.onCircleVector.set(\n        (pageX - this.screen.width * 0.5 - this.screen.left) / (this.screen.width * 0.5),\n        (this.screen.height + 2 * (this.screen.top - pageY)) / this.screen.width\n        // screen.width intentional\n      );\n      return this.onCircleVector;\n    });\n    __publicField(this, \"axis\", new Vector3());\n    __publicField(this, \"quaternion\", new Quaternion());\n    __publicField(this, \"eyeDirection\", new Vector3());\n    __publicField(this, \"objectUpDirection\", new Vector3());\n    __publicField(this, \"objectSidewaysDirection\", new Vector3());\n    __publicField(this, \"moveDirection\", new Vector3());\n    __publicField(this, \"angle\", 0);\n    __publicField(this, \"rotateCamera\", () => {\n      this.moveDirection.set(this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0);\n      this.angle = this.moveDirection.length();\n      if (this.angle) {\n        this._eye.copy(this.object.position).sub(this.target);\n        this.eyeDirection.copy(this._eye).normalize();\n        this.objectUpDirection.copy(this.object.up).normalize();\n        this.objectSidewaysDirection.crossVectors(this.objectUpDirection, this.eyeDirection).normalize();\n        this.objectUpDirection.setLength(this._moveCurr.y - this._movePrev.y);\n        this.objectSidewaysDirection.setLength(this._moveCurr.x - this._movePrev.x);\n        this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection));\n        this.axis.crossVectors(this.moveDirection, this._eye).normalize();\n        this.angle *= this.rotateSpeed;\n        this.quaternion.setFromAxisAngle(this.axis, this.angle);\n        this._eye.applyQuaternion(this.quaternion);\n        this.object.up.applyQuaternion(this.quaternion);\n        this._lastAxis.copy(this.axis);\n        this._lastAngle = this.angle;\n      } else if (!this.staticMoving && this._lastAngle) {\n        this._lastAngle *= Math.sqrt(1 - this.dynamicDampingFactor);\n        this._eye.copy(this.object.position).sub(this.target);\n        this.quaternion.setFromAxisAngle(this._lastAxis, this._lastAngle);\n        this._eye.applyQuaternion(this.quaternion);\n        this.object.up.applyQuaternion(this.quaternion);\n      }\n      this._movePrev.copy(this._moveCurr);\n    });\n    __publicField(this, \"zoomCamera\", () => {\n      let factor;\n      if (this._state === this.STATE.TOUCH_ZOOM_PAN) {\n        factor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n        this._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n        if (this.object.isPerspectiveCamera) {\n          this._eye.multiplyScalar(factor);\n        } else if (this.object.isOrthographicCamera) {\n          this.object.zoom /= factor;\n          this.object.updateProjectionMatrix();\n        } else {\n          console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n        }\n      } else {\n        factor = 1 + (this._zoomEnd.y - this._zoomStart.y) * this.zoomSpeed;\n        if (Math.abs(factor - 1) > this.EPS && factor > 0) {\n          if (this.object.isPerspectiveCamera) {\n            if (factor > 1 && this._eye.length() >= this.maxDistance - this.EPS) {\n              factor = 1;\n            }\n            this._eye.multiplyScalar(factor);\n          } else if (this.object.isOrthographicCamera) {\n            if (factor > 1 && this.object.zoom < this.maxDistance * this.maxDistance) {\n              factor = 1;\n            }\n            this.object.zoom /= factor;\n          } else {\n            console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n          }\n        }\n        if (this.staticMoving) {\n          this._zoomStart.copy(this._zoomEnd);\n        } else {\n          this._zoomStart.y += (this._zoomEnd.y - this._zoomStart.y) * this.dynamicDampingFactor;\n        }\n        if (this.cursorZoom) {\n          this.targetVector.copy(this.target).project(this.object);\n          let worldPos = this.cursorVector.set(this.mousePosition.x, this.mousePosition.y, this.targetVector.z).unproject(this.object);\n          this.target.lerpVectors(worldPos, this.target, factor);\n        }\n        if (this.object.isOrthographicCamera) {\n          this.object.updateProjectionMatrix();\n        }\n      }\n    });\n    __publicField(this, \"mouseChange\", new Vector2());\n    __publicField(this, \"objectUp\", new Vector3());\n    __publicField(this, \"pan\", new Vector3());\n    __publicField(this, \"panCamera\", () => {\n      if (!this.domElement)\n        return;\n      this.mouseChange.copy(this._panEnd).sub(this._panStart);\n      if (this.mouseChange.lengthSq() > this.EPS) {\n        if (this.object.isOrthographicCamera) {\n          const orthoObject = this.object;\n          const scale_x = (orthoObject.right - orthoObject.left) / this.object.zoom;\n          const scale_y = (orthoObject.top - orthoObject.bottom) / this.object.zoom;\n          this.mouseChange.x *= scale_x;\n          this.mouseChange.y *= scale_y;\n        } else {\n          this.mouseChange.multiplyScalar(this._eye.length() * this.panSpeed);\n        }\n        this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x);\n        this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y));\n        this.object.position.add(this.pan);\n        this.target.add(this.pan);\n        if (this.staticMoving) {\n          this._panStart.copy(this._panEnd);\n        } else {\n          this._panStart.add(\n            this.mouseChange.subVectors(this._panEnd, this._panStart).multiplyScalar(this.dynamicDampingFactor)\n          );\n        }\n      }\n    });\n    __publicField(this, \"checkDistances\", () => {\n      if (!this.noZoom || !this.noPan) {\n        if (this._eye.lengthSq() > this.maxDistance * this.maxDistance) {\n          this.object.position.addVectors(this.target, this._eye.setLength(this.maxDistance));\n          this._zoomStart.copy(this._zoomEnd);\n        }\n        if (this._eye.lengthSq() < this.minDistance * this.minDistance) {\n          this.object.position.addVectors(this.target, this._eye.setLength(this.minDistance));\n          this._zoomStart.copy(this._zoomEnd);\n        }\n      }\n    });\n    __publicField(this, \"handleResize\", () => {\n      if (!this.domElement)\n        return;\n      const box = this.domElement.getBoundingClientRect();\n      const d = this.domElement.ownerDocument.documentElement;\n      this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      this.screen.top = box.top + window.pageYOffset - d.clientTop;\n      this.screen.width = box.width;\n      this.screen.height = box.height;\n    });\n    __publicField(this, \"update\", () => {\n      this._eye.subVectors(this.object.position, this.target);\n      if (!this.noRotate) {\n        this.rotateCamera();\n      }\n      if (!this.noZoom) {\n        this.zoomCamera();\n      }\n      if (!this.noPan) {\n        this.panCamera();\n      }\n      this.object.position.addVectors(this.target, this._eye);\n      if (this.object.isPerspectiveCamera) {\n        this.checkDistances();\n        this.object.lookAt(this.target);\n        if (this.lastPosition.distanceToSquared(this.object.position) > this.EPS) {\n          this.dispatchEvent(this.changeEvent);\n          this.lastPosition.copy(this.object.position);\n        }\n      } else if (this.object.isOrthographicCamera) {\n        this.object.lookAt(this.target);\n        if (this.lastPosition.distanceToSquared(this.object.position) > this.EPS || this.lastZoom !== this.object.zoom) {\n          this.dispatchEvent(this.changeEvent);\n          this.lastPosition.copy(this.object.position);\n          this.lastZoom = this.object.zoom;\n        }\n      } else {\n        console.warn(\"THREE.TrackballControls: Unsupported camera type\");\n      }\n    });\n    __publicField(this, \"reset\", () => {\n      this._state = this.STATE.NONE;\n      this._keyState = this.STATE.NONE;\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.up.copy(this.up0);\n      this.object.zoom = this.zoom0;\n      this.object.updateProjectionMatrix();\n      this._eye.subVectors(this.object.position, this.target);\n      this.object.lookAt(this.target);\n      this.dispatchEvent(this.changeEvent);\n      this.lastPosition.copy(this.object.position);\n      this.lastZoom = this.object.zoom;\n    });\n    __publicField(this, \"keydown\", (event) => {\n      if (this.enabled === false)\n        return;\n      window.removeEventListener(\"keydown\", this.keydown);\n      if (this._keyState !== this.STATE.NONE) {\n        return;\n      } else if (event.code === this.keys[this.STATE.ROTATE] && !this.noRotate) {\n        this._keyState = this.STATE.ROTATE;\n      } else if (event.code === this.keys[this.STATE.ZOOM] && !this.noZoom) {\n        this._keyState = this.STATE.ZOOM;\n      } else if (event.code === this.keys[this.STATE.PAN] && !this.noPan) {\n        this._keyState = this.STATE.PAN;\n      }\n    });\n    __publicField(this, \"onPointerDown\", (event) => {\n      if (this.enabled === false)\n        return;\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          this.onMouseDown(event);\n          break;\n      }\n    });\n    __publicField(this, \"onPointerMove\", (event) => {\n      if (this.enabled === false)\n        return;\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          this.onMouseMove(event);\n          break;\n      }\n    });\n    __publicField(this, \"onPointerUp\", (event) => {\n      if (this.enabled === false)\n        return;\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          this.onMouseUp();\n          break;\n      }\n    });\n    __publicField(this, \"keyup\", () => {\n      if (this.enabled === false)\n        return;\n      this._keyState = this.STATE.NONE;\n      window.addEventListener(\"keydown\", this.keydown);\n    });\n    __publicField(this, \"onMouseDown\", (event) => {\n      if (!this.domElement)\n        return;\n      if (this._state === this.STATE.NONE) {\n        switch (event.button) {\n          case this.mouseButtons.LEFT:\n            this._state = this.STATE.ROTATE;\n            break;\n          case this.mouseButtons.MIDDLE:\n            this._state = this.STATE.ZOOM;\n            break;\n          case this.mouseButtons.RIGHT:\n            this._state = this.STATE.PAN;\n            break;\n          default:\n            this._state = this.STATE.NONE;\n        }\n      }\n      const state = this._keyState !== this.STATE.NONE ? this._keyState : this._state;\n      if (state === this.STATE.ROTATE && !this.noRotate) {\n        this._moveCurr.copy(this.getMouseOnCircle(event.pageX, event.pageY));\n        this._movePrev.copy(this._moveCurr);\n      } else if (state === this.STATE.ZOOM && !this.noZoom) {\n        this._zoomStart.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n        this._zoomEnd.copy(this._zoomStart);\n      } else if (state === this.STATE.PAN && !this.noPan) {\n        this._panStart.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n        this._panEnd.copy(this._panStart);\n      }\n      this.domElement.ownerDocument.addEventListener(\"pointermove\", this.onPointerMove);\n      this.domElement.ownerDocument.addEventListener(\"pointerup\", this.onPointerUp);\n      this.dispatchEvent(this.startEvent);\n    });\n    __publicField(this, \"onMouseMove\", (event) => {\n      if (this.enabled === false)\n        return;\n      const state = this._keyState !== this.STATE.NONE ? this._keyState : this._state;\n      if (state === this.STATE.ROTATE && !this.noRotate) {\n        this._movePrev.copy(this._moveCurr);\n        this._moveCurr.copy(this.getMouseOnCircle(event.pageX, event.pageY));\n      } else if (state === this.STATE.ZOOM && !this.noZoom) {\n        this._zoomEnd.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n      } else if (state === this.STATE.PAN && !this.noPan) {\n        this._panEnd.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n      }\n    });\n    __publicField(this, \"onMouseUp\", () => {\n      if (!this.domElement)\n        return;\n      if (this.enabled === false)\n        return;\n      this._state = this.STATE.NONE;\n      this.domElement.ownerDocument.removeEventListener(\"pointermove\", this.onPointerMove);\n      this.domElement.ownerDocument.removeEventListener(\"pointerup\", this.onPointerUp);\n      this.dispatchEvent(this.endEvent);\n    });\n    __publicField(this, \"mousewheel\", (event) => {\n      if (this.enabled === false)\n        return;\n      if (this.noZoom === true)\n        return;\n      event.preventDefault();\n      switch (event.deltaMode) {\n        case 2:\n          this._zoomStart.y -= event.deltaY * 0.025;\n          break;\n        case 1:\n          this._zoomStart.y -= event.deltaY * 0.01;\n          break;\n        default:\n          this._zoomStart.y -= event.deltaY * 25e-5;\n          break;\n      }\n      this.mousePosition.x = event.offsetX / this.screen.width * 2 - 1;\n      this.mousePosition.y = -(event.offsetY / this.screen.height) * 2 + 1;\n      this.dispatchEvent(this.startEvent);\n      this.dispatchEvent(this.endEvent);\n    });\n    __publicField(this, \"touchstart\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      switch (event.touches.length) {\n        case 1:\n          this._state = this.STATE.TOUCH_ROTATE;\n          this._moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          this._movePrev.copy(this._moveCurr);\n          break;\n        default:\n          this._state = this.STATE.TOUCH_ZOOM_PAN;\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          this._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this._panStart.copy(this.getMouseOnScreen(x, y));\n          this._panEnd.copy(this._panStart);\n          break;\n      }\n      this.dispatchEvent(this.startEvent);\n    });\n    __publicField(this, \"touchmove\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n      switch (event.touches.length) {\n        case 1:\n          this._movePrev.copy(this._moveCurr);\n          this._moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n        default:\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          this._touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this._panEnd.copy(this.getMouseOnScreen(x, y));\n          break;\n      }\n    });\n    __publicField(this, \"touchend\", (event) => {\n      if (this.enabled === false)\n        return;\n      switch (event.touches.length) {\n        case 0:\n          this._state = this.STATE.NONE;\n          break;\n        case 1:\n          this._state = this.STATE.TOUCH_ROTATE;\n          this._moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          this._movePrev.copy(this._moveCurr);\n          break;\n      }\n      this.dispatchEvent(this.endEvent);\n    });\n    __publicField(this, \"contextmenu\", (event) => {\n      if (this.enabled === false)\n        return;\n      event.preventDefault();\n    });\n    // https://github.com/mrdoob/three.js/issues/20575\n    __publicField(this, \"connect\", (domElement) => {\n      if (domElement === document) {\n        console.error(\n          'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n        );\n      }\n      this.domElement = domElement;\n      this.domElement.addEventListener(\"contextmenu\", this.contextmenu);\n      this.domElement.addEventListener(\"pointerdown\", this.onPointerDown);\n      this.domElement.addEventListener(\"wheel\", this.mousewheel);\n      this.domElement.addEventListener(\"touchstart\", this.touchstart);\n      this.domElement.addEventListener(\"touchend\", this.touchend);\n      this.domElement.addEventListener(\"touchmove\", this.touchmove);\n      this.domElement.ownerDocument.addEventListener(\"pointermove\", this.onPointerMove);\n      this.domElement.ownerDocument.addEventListener(\"pointerup\", this.onPointerUp);\n      window.addEventListener(\"keydown\", this.keydown);\n      window.addEventListener(\"keyup\", this.keyup);\n      this.handleResize();\n    });\n    __publicField(this, \"dispose\", () => {\n      if (!this.domElement)\n        return;\n      this.domElement.removeEventListener(\"contextmenu\", this.contextmenu);\n      this.domElement.removeEventListener(\"pointerdown\", this.onPointerDown);\n      this.domElement.removeEventListener(\"wheel\", this.mousewheel);\n      this.domElement.removeEventListener(\"touchstart\", this.touchstart);\n      this.domElement.removeEventListener(\"touchend\", this.touchend);\n      this.domElement.removeEventListener(\"touchmove\", this.touchmove);\n      this.domElement.ownerDocument.removeEventListener(\"pointermove\", this.onPointerMove);\n      this.domElement.ownerDocument.removeEventListener(\"pointerup\", this.onPointerUp);\n      window.removeEventListener(\"keydown\", this.keydown);\n      window.removeEventListener(\"keyup\", this.keyup);\n    });\n    this.object = object;\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.up0 = this.object.up.clone();\n    this.zoom0 = this.object.zoom;\n    if (domElement !== void 0)\n      this.connect(domElement);\n    this.update();\n  }\n}\nexport {\n  TrackballControls\n};\n"]},"metadata":{},"sourceType":"module"}