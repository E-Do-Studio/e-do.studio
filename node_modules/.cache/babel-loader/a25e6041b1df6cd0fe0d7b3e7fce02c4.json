{"ast":null,"code":"import { Vector3 } from \"three\";\n\nconst _v1 = /* @__PURE__ */new Vector3();\n\nconst _v2 = /* @__PURE__ */new Vector3();\n\nconst _v3 = /* @__PURE__ */new Vector3();\n\nconst EPS = 1e-10;\n\nclass Capsule {\n  constructor(start = new Vector3(0, 0, 0), end = new Vector3(0, 1, 0), radius = 1) {\n    this.start = start;\n    this.end = end;\n    this.radius = radius;\n  }\n\n  clone() {\n    return new Capsule(this.start.clone(), this.end.clone(), this.radius);\n  }\n\n  set(start, end, radius) {\n    this.start.copy(start);\n    this.end.copy(end);\n    this.radius = radius;\n  }\n\n  copy(capsule) {\n    this.start.copy(capsule.start);\n    this.end.copy(capsule.end);\n    this.radius = capsule.radius;\n  }\n\n  getCenter(target) {\n    return target.copy(this.end).add(this.start).multiplyScalar(0.5);\n  }\n\n  translate(v) {\n    this.start.add(v);\n    this.end.add(v);\n  }\n\n  checkAABBAxis(p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius) {\n    return (minx - p1x < radius || minx - p2x < radius) && (p1x - maxx < radius || p2x - maxx < radius) && (miny - p1y < radius || miny - p2y < radius) && (p1y - maxy < radius || p2y - maxy < radius);\n  }\n\n  intersectsBox(box) {\n    return this.checkAABBAxis(this.start.x, this.start.y, this.end.x, this.end.y, box.min.x, box.max.x, box.min.y, box.max.y, this.radius) && this.checkAABBAxis(this.start.x, this.start.z, this.end.x, this.end.z, box.min.x, box.max.x, box.min.z, box.max.z, this.radius) && this.checkAABBAxis(this.start.y, this.start.z, this.end.y, this.end.z, box.min.y, box.max.y, box.min.z, box.max.z, this.radius);\n  }\n\n  lineLineMinimumPoints(line1, line2) {\n    const r = _v1.copy(line1.end).sub(line1.start);\n\n    const s = _v2.copy(line2.end).sub(line2.start);\n\n    const w = _v3.copy(line2.start).sub(line1.start);\n\n    const a = r.dot(s),\n          b = r.dot(r),\n          c = s.dot(s),\n          d = s.dot(w),\n          e = r.dot(w);\n    let t1, t2;\n    const divisor = b * c - a * a;\n\n    if (Math.abs(divisor) < EPS) {\n      const d1 = -d / c;\n      const d2 = (a - d) / c;\n\n      if (Math.abs(d1 - 0.5) < Math.abs(d2 - 0.5)) {\n        t1 = 0;\n        t2 = d1;\n      } else {\n        t1 = 1;\n        t2 = d2;\n      }\n    } else {\n      t1 = (d * a + e * c) / divisor;\n      t2 = (t1 * a - d) / c;\n    }\n\n    t2 = Math.max(0, Math.min(1, t2));\n    t1 = Math.max(0, Math.min(1, t1));\n    const point1 = r.multiplyScalar(t1).add(line1.start);\n    const point2 = s.multiplyScalar(t2).add(line2.start);\n    return [point1, point2];\n  }\n\n}\n\nexport { Capsule };","map":{"version":3,"sources":["/Users/theodaguier/_workdir/dev/pro/e-do/E-Do-Studio/node_modules/three-stdlib/math/Capsule.js"],"names":["Vector3","_v1","_v2","_v3","EPS","Capsule","constructor","start","end","radius","clone","set","copy","capsule","getCenter","target","add","multiplyScalar","translate","v","checkAABBAxis","p1x","p1y","p2x","p2y","minx","maxx","miny","maxy","intersectsBox","box","x","y","min","max","z","lineLineMinimumPoints","line1","line2","r","sub","s","w","a","dot","b","c","d","e","t1","t2","divisor","Math","abs","d1","d2","point1","point2"],"mappings":"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","sourcesContent":["import { Vector3 } from \"three\";\nconst _v1 = /* @__PURE__ */ new Vector3();\nconst _v2 = /* @__PURE__ */ new Vector3();\nconst _v3 = /* @__PURE__ */ new Vector3();\nconst EPS = 1e-10;\nclass Capsule {\n  constructor(start = new Vector3(0, 0, 0), end = new Vector3(0, 1, 0), radius = 1) {\n    this.start = start;\n    this.end = end;\n    this.radius = radius;\n  }\n  clone() {\n    return new Capsule(this.start.clone(), this.end.clone(), this.radius);\n  }\n  set(start, end, radius) {\n    this.start.copy(start);\n    this.end.copy(end);\n    this.radius = radius;\n  }\n  copy(capsule) {\n    this.start.copy(capsule.start);\n    this.end.copy(capsule.end);\n    this.radius = capsule.radius;\n  }\n  getCenter(target) {\n    return target.copy(this.end).add(this.start).multiplyScalar(0.5);\n  }\n  translate(v) {\n    this.start.add(v);\n    this.end.add(v);\n  }\n  checkAABBAxis(p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius) {\n    return (minx - p1x < radius || minx - p2x < radius) && (p1x - maxx < radius || p2x - maxx < radius) && (miny - p1y < radius || miny - p2y < radius) && (p1y - maxy < radius || p2y - maxy < radius);\n  }\n  intersectsBox(box) {\n    return this.checkAABBAxis(\n      this.start.x,\n      this.start.y,\n      this.end.x,\n      this.end.y,\n      box.min.x,\n      box.max.x,\n      box.min.y,\n      box.max.y,\n      this.radius\n    ) && this.checkAABBAxis(\n      this.start.x,\n      this.start.z,\n      this.end.x,\n      this.end.z,\n      box.min.x,\n      box.max.x,\n      box.min.z,\n      box.max.z,\n      this.radius\n    ) && this.checkAABBAxis(\n      this.start.y,\n      this.start.z,\n      this.end.y,\n      this.end.z,\n      box.min.y,\n      box.max.y,\n      box.min.z,\n      box.max.z,\n      this.radius\n    );\n  }\n  lineLineMinimumPoints(line1, line2) {\n    const r = _v1.copy(line1.end).sub(line1.start);\n    const s = _v2.copy(line2.end).sub(line2.start);\n    const w = _v3.copy(line2.start).sub(line1.start);\n    const a = r.dot(s), b = r.dot(r), c = s.dot(s), d = s.dot(w), e = r.dot(w);\n    let t1, t2;\n    const divisor = b * c - a * a;\n    if (Math.abs(divisor) < EPS) {\n      const d1 = -d / c;\n      const d2 = (a - d) / c;\n      if (Math.abs(d1 - 0.5) < Math.abs(d2 - 0.5)) {\n        t1 = 0;\n        t2 = d1;\n      } else {\n        t1 = 1;\n        t2 = d2;\n      }\n    } else {\n      t1 = (d * a + e * c) / divisor;\n      t2 = (t1 * a - d) / c;\n    }\n    t2 = Math.max(0, Math.min(1, t2));\n    t1 = Math.max(0, Math.min(1, t1));\n    const point1 = r.multiplyScalar(t1).add(line1.start);\n    const point2 = s.multiplyScalar(t2).add(line2.start);\n    return [point1, point2];\n  }\n}\nexport {\n  Capsule\n};\n"]},"metadata":{},"sourceType":"module"}